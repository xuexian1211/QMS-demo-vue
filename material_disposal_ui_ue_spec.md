# 来料不合格处置单 UI/UE 要求规范

## 1. 概述

### 1.1 功能定位
来料不合格处置单是质量管理系统中用于记录、跟踪和处理原材料检验不合格情况的核心模块。该模块实现了从不合格发现、记录、评审、处置到验证的全流程管理。

### 1.2 目标用户
- 品质部（IQC）检验人员
- 质量工程师
- 生产管理人员
- 采购人员
- 相关部门主管

### 1.3 设计原则
- **清晰直观**：信息层级分明，操作流程明确
- **高效易用**：减少操作步骤，提供快捷操作
- **数据完整**：确保所有必要信息被完整记录
- **流程可控**：支持审批流程和状态跟踪
- **响应式设计**：适配不同屏幕尺寸

## 2. 页面结构与布局

### 2.1 整体布局
- 采用标准后台系统布局：顶部导航栏 + 左侧菜单 + 主内容区
- 主内容区采用卡片式布局，信息模块清晰分离
- 所有页面保持一致的视觉风格和交互模式

### 2.2 列表页面 (MaterialDisposal.vue)

#### 2.2.1 工具栏
- **位置**：页面顶部，左侧对齐
- **元素**：
  - 新增按钮（蓝色主按钮，带加号图标）
  - 编辑按钮（灰色按钮，带编辑图标，单选时可用）
  - 查看按钮（灰色按钮，带眼睛图标，单选时可用）
  - 删除按钮（红色危险按钮，带删除图标，多选时可用）
  - 导出按钮（灰色按钮，带导出图标）
  - 刷新按钮（灰色按钮，带刷新图标）

#### 2.2.2 搜索区域
- **位置**：工具栏下方
- **元素**：
  - 单据编号输入框
  - 供应商名称输入框
  - 物料名称输入框
  - 处置状态下拉选择（待处理/处理中/已完成/已关闭）
  - 查询按钮（蓝色）
  - 重置按钮（灰色）

#### 2.2.3 数据表格
- **位置**：搜索区域下方，占满剩余空间
- **特性**：
  - 固定表头，可横向滚动
  - 支持行选择（单选/多选）
  - 分页显示（每页20条）
  - 列排序功能
- **列定义**：
  - 复选框（用于多选）
  - 单据编号
  - 物料名称
  - 供应商名称
  - 发现日期
  - 处置方式（标签形式显示）
  - 状态（标签形式显示）
  - 操作列（查看/编辑/删除按钮）

#### 2.2.4 状态标签设计
| 状态 | 颜色 | 说明 |
|------|------|------|
| 待处理 | 黄色 | 新创建的处置单，尚未开始处理 |
| 处理中 | 蓝色 | 正在进行评审或处置 |
| 已完成 | 绿色 | 处置流程已完成 |
| 已关闭 | 灰色 | 流程结束且归档 |

#### 2.2.5 处置方式标签设计
| 处置方式 | 颜色 | 说明 |
|----------|------|------|
| 退货 | 红色 | 退回供应商返工/分选 |
| 让步接收（不降价） | 黄色 | 允许接收但不降价 |
| 让步接收（降价） | 橙色 | 允许接收但需降价 |
| 挑选使用 | 绿色 | 我司分选后使用 |

### 2.3 详情页面 (MaterialDisposalView.vue)

#### 2.3.1 页面头部
- **左侧**：返回按钮 + 页面标题 + 状态徽章
- **右侧**：流程按钮 + 评论按钮 + 编辑按钮

#### 2.3.2 主信息区域
- **基本信息**：
  - 处置单号（系统生成，只读）
  - 发现时间
  - 发现部门
  - 处理状态
  - 发现人

#### 2.3.3 Tab页签区域
- **供应商信息**：
  - 物料名称、型号、批次号
  - 采购订单号
  - 供应商名称、编码
  - 联系人、联系电话

- **不合格详情**：
  - 不合格现象描述
  - 不合格类别（A/B/C类）
  - 不合格数量、总数量
  - 隔离区域、标识、隔离人

- **处理记录**：
  - 评审部门、评审日期
  - 处置方式、降价比例（如有）
  - 整改期限、需提交文件
  - 执行部门、执行人、执行完成日期
  - 执行结果
  - 验证部门、验证人、验证结论

- **审核信息**：
  - 填写人签字
  - 部门主管签字
  - 其他审批人签字区域

### 2.4 创建/编辑页面

#### 2.4.1 模态框设计
- **尺寸**：宽度1400px，高度自适应内容
- **标题**：新建处置单 / 编辑处置单
- **操作按钮**：确定 / 取消

#### 2.4.2 表单布局
- **基本信息区域**：
  - 单据编号（系统自动生成，只读）
  - 发现日期（日期时间选择器）
  - 发现部门（下拉选择，默认品质部（IQC），支持其他）
  - 发现人员（文本输入）
  - 其他部门（当发现部门为"其他"时显示）

- **不合格情况描述区域**：
  - 缺陷现象（多行文本输入，要求详细描述）
  - 缺陷类别（单选按钮组：A类/B类/C类）
  - 缺陷数量（数字输入）
  - 总到货数量（数字输入）

- **处置方式区域**：
  - 处置方式（单选按钮组）：
    - 退货（退回供应商返工/分选）
    - 让步接收（不降价）
    - 让步接收（降价____%）
    - 挑选使用（我司分选）
  - 降价比例（当选择"让步接收（降价）"时显示，数字输入，1-100%）

- **Tab页签区域**：
  - **产品信息**：物料名称、型号、批号、采购订单号
  - **供应商信息**：供应商名称、编码、联系人、联系电话
  - **隔离措施**：隔离区域、隔离标识、隔离人

## 3. 功能模块与交互

### 3.1 列表页面功能

#### 3.1.1 数据筛选
- 支持按单据编号、供应商名称、物料名称模糊搜索
- 支持按处置状态精确筛选
- 支持组合条件搜索
- 提供重置按钮清除所有筛选条件

#### 3.1.2 批量操作
- 支持批量删除（需要二次确认）
- 支持批量导出

#### 3.1.3 单行操作
- 查看：打开详情页面
- 编辑：打开编辑页面
- 删除：单个删除（需要二次确认）

#### 3.1.4 数据导出
- 支持导出Excel格式
- 导出数据包含表格中所有可见字段

### 3.2 详情页面功能

#### 3.2.1 状态显示
- 页面顶部显示当前状态徽章
- 状态颜色与列表页面保持一致

#### 3.2.2 操作功能
- 返回：返回列表页面
- 流程：查看审批流程
- 评论：查看/添加评论
- 编辑：进入编辑页面

#### 3.2.3 信息展示
- 所有信息以只读形式展示
- 日期时间格式统一（YYYY-MM-DD HH:mm）
- 列表数据使用逗号分隔显示

### 3.3 创建/编辑页面功能

#### 3.3.1 表单验证
- 所有必填字段在提交前进行验证
- 提供实时验证反馈
- 错误信息显示在字段下方

#### 3.3.2 条件字段
- 发现部门选择"其他"时，显示"其他部门"输入框
- 处置方式选择"让步接收（降价）"时，显示"降价比例"输入框

#### 3.3.3 数据保存
- 点击"确定"按钮提交表单
- 提交成功后关闭模态框并刷新列表
- 提交失败时显示错误信息

#### 3.3.4 取消操作
- 点击"取消"按钮关闭模态框
- 未保存的修改会被丢弃（可选提供提示）

## 4. 表单字段与验证

### 4.1 基本信息字段

| 字段名称 | 字段类型 | 必填 | 验证规则 | 说明 |
|----------|----------|------|----------|------|
| 单据编号 | 文本 | 否 | 系统自动生成 | 唯一标识符 |
| 发现日期 | 日期时间 | 是 | 不能为空 | 不合格发现的具体时间 |
| 发现部门 | 下拉选择 | 是 | 必选 | 默认品质部（IQC） |
| 其他部门 | 文本 | 条件必填 | 当发现部门为"其他"时必填 | 填写其他部门名称 |
| 发现人员 | 文本 | 是 | 不能为空 | 填写实际发现人姓名 |

### 4.2 不合格情况字段

| 字段名称 | 字段类型 | 必填 | 验证规则 | 说明 |
|----------|----------|------|----------|------|
| 缺陷现象 | 多行文本 | 是 | 不能为空，至少10个字符 | 详细描述缺陷情况 |
| 缺陷类别 | 单选 | 是 | 必选 | A类/B类/C类 |
| 缺陷数量 | 数字 | 是 | 大于0，小于等于总数量 | 不合格品数量 |
| 总到货数量 | 数字 | 是 | 大于0 | 本次到货总数量 |

### 4.3 处置方式字段

| 字段名称 | 字段类型 | 必填 | 验证规则 | 说明 |
|----------|----------|------|----------|------|
| 处置方式 | 单选 | 是 | 必选 | 退货/让步接收/挑选使用 |
| 降价比例 | 数字 | 条件必填 | 1-100%，当处置方式为"让步接收（降价）"时必填 | 降价百分比 |

### 4.4 产品信息字段

| 字段名称 | 字段类型 | 必填 | 验证规则 | 说明 |
|----------|----------|------|----------|------|
| 物料名称 | 文本 | 是 | 不能为空 | 与供应商送货单一致 |
| 物料型号 | 文本 | 是 | 不能为空 | 与供应商送货单一致 |
| 物料批号 | 文本 | 是 | 不能为空 | 与供应商送货单一致 |
| 采购订单号 | 文本 | 是 | 不能为空 | 与供应商送货单一致 |

### 4.5 供应商信息字段

| 字段名称 | 字段类型 | 必填 | 验证规则 | 说明 |
|----------|----------|------|----------|------|
| 供应商名称 | 下拉选择 | 是 | 必选 | 从供应商列表中选择 |
| 供应商代码 | 文本 | 是 | 不能为空 | 需准确填写 |
| 联系人 | 文本 | 是 | 不能为空 | 供应商联系人 |
| 联系电话 | 文本 | 是 | 符合电话号码格式 | 供应商联系电话 |

### 4.6 隔离措施字段

| 字段名称 | 字段类型 | 必填 | 验证规则 | 说明 |
|----------|----------|------|----------|------|
| 隔离区域 | 文本 | 是 | 不能为空 | 不合格品存放区域 |
| 隔离标识 | 文本 | 是 | 不能为空 | 隔离标识编号或描述 |
| 隔离人 | 文本 | 是 | 不能为空 | 执行隔离操作的人员 |

## 5. 数据展示与可视化

### 5.1 状态标签
- 使用不同颜色区分不同状态
- 标签样式统一（圆角矩形，居中文字）
- 状态名称简洁明了

### 5.2 数据表格
- 表头使用深色背景，文字白色
- 表格行交替背景色，提升可读性
- 操作按钮使用链接样式，减少视觉干扰
- 支持行悬停效果

### 5.3 时间格式
- 统一使用 YYYY-MM-DD HH:mm 格式
- 日期选择器支持快速选择（今天、本周、本月等）

### 5.4 数字格式
- 数量字段使用整数格式
- 百分比字段使用 % 符号
- 保持数据精度一致性

## 6. 用户体验要求

### 6.1 响应速度
- 页面加载时间 < 2秒
- 表单提交响应时间 < 1秒
- 数据筛选响应时间 < 1秒

### 6.2 操作反馈
- 所有操作提供明确的成功/失败提示
- 加载状态显示加载动画
- 确认操作提供二次确认对话框
- 错误信息清晰明确，指导用户如何修复

### 6.3 可访问性
- 支持键盘导航
- 按钮和链接有明确的焦点状态
- 文本与背景对比度符合WCAG标准
- 提供适当的ARIA标签

### 6.4 帮助与提示
- 重要字段提供提示信息
- 复杂操作提供操作指南
- 错误信息提供解决方案

## 7. 技术要求

### 7.1 前端技术栈
- Vue 3
- Element Plus 组件库
- Axios 网络请求
- Day.js 日期处理

### 7.2 后端接口
- RESTful API 设计
- 支持分页查询
- 提供表单验证接口
- 支持文件上传（未来扩展）

### 7.3 数据存储
- 所有数据持久化存储
- 支持数据导入/导出
- 数据备份与恢复机制

### 7.4 性能优化
- 数据缓存机制
- 懒加载策略
- 图片压缩处理

## 8. 测试要求

### 8.1 功能测试
- 所有页面正常加载
- 所有表单字段验证有效
- 所有操作功能正常
- 数据流转正确

### 8.2 兼容性测试
- 支持主流浏览器（Chrome、Firefox、Safari、Edge）
- 适配不同屏幕尺寸（1024px以上）

### 8.3 性能测试
- 页面加载速度测试
- 并发访问测试
- 大数据量测试

### 8.4 安全测试
- 权限控制测试
- 数据验证测试
- 防止SQL注入

## 9. 附录

### 9.1 术语定义
- **IQC**：来料质量控制（Incoming Quality Control）
- **A类缺陷**：严重缺陷，可能导致产品功能失效或安全问题
- **B类缺陷**：重要缺陷，影响产品性能但不影响安全
- **C类缺陷**：轻微缺陷，不影响产品功能和性能

### 9.2 状态流转图
```
新建 → 待处理 → 处理中 → 已完成 → 已关闭
        ↑        ↑         ↓
        └────────┴─────────┘
```

### 9.3 原型图链接
（此处可添加原型图链接）

### 9.4 设计资源
- 图标库：Element Plus 图标
- 颜色方案：系统统一颜色
- 字体：系统默认字体