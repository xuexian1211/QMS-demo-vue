# 任务清单: 检验主数据重构 - 第一阶段

## 阶段1: 基础数据重构

### 任务1.1: 重构不良现象管理页面
- [ ] 分析现有 `DefectPhenomenonList.vue` 功能和布局
- [ ] 创建独立的 `DefectCategory.vue` 页面
- [ ] 优化 `DefectPhenomenonList.vue` 页面布局
- [ ] 统一搜索表单样式
- [ ] 优化表格列展示和操作按钮
- [ ] 优化分类树的展示和操作
- [ ] 测试增删改查功能

### 任务1.2: 重构不良原因管理页面
- [ ] 分析现有 `DefectCauseList.vue` 功能和布局
- [ ] 优化 `DefectCauseList.vue` 页面布局
- [ ] 优化 `DefectCauseEdit.vue` 编辑页面
- [ ] 统一搜索表单样式
- [ ] 优化表格列展示和操作按钮
- [ ] 增加原因树状结构展示
- [ ] 为FMEA关联预留Tab（第二阶段实现）
- [ ] 测试增删改查功能

### 任务1.3: 重构物料档案管理页面
- [ ] 分析现有 `MaterialProduct.vue` 功能和布局
- [ ] 优化页面布局（工具栏+搜索+表格）
- [ ] 统一搜索表单样式
- [ ] 优化表格列展示
- [ ] 增加物料检验规格入口按钮
- [ ] 优化编辑弹窗布局
- [ ] 测试增删改查功能

### 任务1.4: 重构工艺路线管理页面
- [ ] 分析现有 `ProcessRoute.vue` 功能和布局
- [ ] 优化页面布局（工具栏+搜索+表格）
- [ ] 优化路线明细展开展示
- [ ] 统一搜索表单样式
- [ ] 优化表格列展示和操作按钮
- [ ] 优化编辑弹窗的工序明细Tab
- [ ] 测试增删改查功能

### 任务1.5: 重构检验项目管理页面
- [ ] 分析现有 `InspectionItemList.vue` 功能和布局
- [ ] 优化页面布局（工具栏+搜索+表格）
- [ ] 统一搜索表单样式
- [ ] 优化表格列展示和操作按钮
- [ ] 优化 `InspectionItemEdit.vue` 编辑页面
- [ ] 为关联不良现象预留Tab（第二阶段实现）
- [ ] 测试增删改查功能

## 阶段2: 缺失功能补充

### 任务2.1: 创建缺陷分类独立管理页面
- [ ] 创建 `src/views/inspection-model/DefectCategory.vue` 组件
- [ ] 实现树状分类展示（支持多级）
- [ ] 实现搜索功能
- [ ] 实现新增根分类、子分类功能
- [ ] 实现编辑、删除功能（带级联删除确认）
- [ ] 实现导出功能
- [ ] 添加路由配置
- [ ] 添加导航菜单

### 任务2.2: 创建量检具类型独立管理页面
- [ ] 创建 `src/views/inspection-model/MeasureType.vue` 组件
- [ ] 实现树状类型展示（支持多级）
- [ ] 实现搜索功能
- [ ] 实现新增根类型、子类型功能
- [ ] 实现编辑、删除功能（带级联删除确认）
- [ ] 实现精度、MSA要求配置
- [ ] 实现导出功能
- [ ] 添加路由配置
- [ ] 添加导航菜单

### 任务2.3: 创建物料检验规格管理页面
- [ ] 创建 `src/views/inspection-model/MaterialSpec.vue` 组件
- [ ] 实现搜索表单（物料、检验项目、数据类型）
- [ ] 实现数据表格展示
- [ ] 实现新增、编辑、删除功能
- [ ] 实现动态表单（计量型/计数型切换）
- [ ] 实现计量型表单（目标值、上限、下限、单位）
- [ ] 实现计数型表单（标准描述、标准代码、期望值、样板图）
- [ ] 实现表单验证（必填项、数据类型、范围校验）
- [ ] 实现批量删除功能
- [ ] 实现导出功能
- [ ] 添加路由配置
- [ ] 添加导航菜单

### 任务2.4: 创建检验模板管理页面
- [ ] 创建 `src/views/inspection-model/InspTemplateList.vue` 组件
- [ ] 实现搜索表单（模板编码、名称、状态、版本）
- [ ] 实现数据表格展示
- [ ] 实现状态标签显示（草稿/审批中/已批准/作废）
- [ ] 实现新增、查看、编辑、删除功能
- [ ] 实现状态变更功能（草稿→审批中→已批准→作废）
- [ ] 实现版本管理（查看历史版本）
- [ ] 实现导出功能
- [ ] 添加路由配置
- [ ] 添加导航菜单

### 任务2.5: 创建检验模板编辑页面
- [ ] 创建 `src/views/inspection-model/InspTemplateEdit.vue` 组件
- [ ] 实现模板基本信息表单（模板编码、名称、版本、状态）
- [ ] 实现模板明细表格
- [ ] 实现明细行新增、编辑、删除功能
- [ ] 实现明细行拖拽排序
- [ ] 实现检验项目、抽样规则、检验方法、量检具类型关联选择
- [ ] 实现IPQC频次配置（频次类型、频次值、单位）
- [ ] 实现SPC开关、实验室检验开关
- [ ] 实现表单验证
- [ ] 实现保存和返回功能
- [ ] 添加路由配置

## 阶段3: 检验方案优化

### 任务3.1: 优化检验方案列表页面
- [ ] 分析现有 `InspPlanList.vue` 功能和布局
- [ ] 优化页面布局（工具栏+搜索+表格）
- [ ] 统一搜索表单样式
- [ ] 优化表格列展示
- [ ] 优化状态标签显示
- [ ] 优化操作按钮布局
- [ ] 优化导出Excel功能
- [ ] 测试所有功能

### 任务3.2: 优化检验方案编辑页面
- [ ] 分析现有 `InspPlanEdit.vue` 功能和布局
- [ ] 优化页面头部（返回按钮+标题+保存按钮）
- [ ] 优化基本信息表单布局
- [ ] 优化方案关联绑定Tab
- [ ] 优化方案明细Tab
- [ ] 优化明细不良现象绑定Tab
- [ ] 优化物料检验规格Tab
- [ ] 完善表单验证规则
- [ ] 优化保存逻辑
- [ ] 测试所有功能

## 阶段4: 路由和导航配置

### 任务4.1: 更新路由配置
- [ ] 在 `src/router/index.ts` 中添加缺陷分类路由
- [ ] 在 `src/router/index.ts` 中添加量检具类型路由
- [ ] 在 `src/router/index.ts` 中添加物料检验规格路由
- [ ] 在 `src/router/index.ts` 中添加检验模板列表路由
- [ ] 在 `src/router/index.ts` 中添加检验模板编辑路由
- [ ] 验证所有路由跳转正常

### 任务4.2: 更新导航菜单
- [ ] 在左侧导航菜单中添加"缺陷分类"菜单项
- [ ] 在左侧导航菜单中添加"量检具类型"菜单项
- [ ] 在左侧导航菜单中添加"物料检验规格"菜单项
- [ ] 在左侧导航菜单中添加"检验模板"菜单项
- [ ] 调整菜单顺序和分组

## 阶段5: 数据模型和类型定义

### 任务5.1: 更新TypeScript类型定义
- [ ] 在 `src/types/index.ts` 中定义 DefectCategory 接口
- [ ] 在 `src/types/index.ts` 中定义 MeasureType 接口
- [ ] 在 `src/types/index.ts` 中定义 MaterialSpec 接口
- [ ] 在 `src/types/index.ts` 中定义 InspTemplate 接口
- [ ] 在 `src/types/index.ts` 中定义 InspTemplateDetail 接口
- [ ] 确保所有接口包含 orgId 字段
- [ ] 确保所有接口符合需求文档规范

### 任务5.2: 创建模拟数据
- [ ] 为缺陷分类创建模拟数据
- [ ] 为量检具类型创建模拟数据
- [ ] 为物料检验规格创建模拟数据
- [ ] 为检验模板创建模拟数据
- [ ] 为检验模板明细创建模拟数据

## 阶段6: 验证和测试

### 任务6.1: 功能验证
- [ ] 验证所有页面的增删改查功能
- [ ] 验证表单验证规则
- [ ] 验证搜索和筛选功能
- [ ] 验证导出功能
- [ ] 验证树状数据的加载和操作

### 任务6.2: UI/UX验证
- [ ] 验证页面布局符合设计规范
- [ ] 验证交互体验流畅
- [ ] 验证响应式布局在不同屏幕尺寸下的表现
- [ ] 验证加载状态和错误提示
- [ ] 验证操作按钮的禁用状态

### 任务6.3: 性能验证
- [ ] 验证页面加载速度（<500ms）
- [ ] 验证大数据量下的表格渲染性能
- [ ] 验证树状数据的加载性能
- [ ] 验证搜索过滤的性能

### 任务6.4: 代码质量检查
- [ ] 运行类型检查（vue-tsc）
- [ ] 确保代码符合项目规范
- [ ] 确保TypeScript类型定义完整
- [ ] 检查代码可读性和复用性

## 依赖关系

- 任务1.1-1.5可以并行开发
- 任务2.1-2.4依赖任务1完成（学习最佳实践）
- 任务3.1-3.2依赖任务2完成（统一布局风格）
- 任务4依赖所有页面开发完成
- 任务5可以与各阶段并行开发
- 任务6依赖所有功能开发完成

## 并行化机会

以下任务可以并行开发以提高效率：
- 任务1.1、1.2、1.3、1.4、1.5（基础数据重构）
- 任务2.1、2.2、2.3（独立页面创建）
- 任务3.1和3.2（检验方案优化）
- 阶段5的各个子任务（与功能开发并行）
- 阶段6的各个子任务（在功能开发完成后）

## 第一阶段完成后可进行的工作

以下功能将在第二阶段实施：
- 现象-原因关联知识库
- 原因-FMEA关联管理
- 检验项目-不良现象映射
- 数据导入导出功能
- 工作流集成
- 高级搜索和筛选
- 批量操作优化
