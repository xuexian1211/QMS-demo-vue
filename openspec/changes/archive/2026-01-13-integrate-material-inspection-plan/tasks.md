# 任务清单: 物料-工艺路线-检验方案集成

## 阶段1: 物料-工艺路线关联

### 任务1.1: 物料档案表格增强
- [x] 在 `MaterialProduct.vue` 表格增加"工艺路线数"列
- [x] 根据物料ID统计关联的工艺路线数量
- [x] 数量显示为可点击链接，点击打开关联抽屉

### 任务1.2: 创建工艺路线关联抽屉
- [x] 创建 `src/components/MaterialRouteDrawer.vue` 组件
- [x] 实现工艺路线列表展示（编码、名称、版本、状态）
- [x] 支持查看工艺路线详情（跳转）
- [x] 支持工序明细预览（展开行）
- [x] 在 `MaterialProduct.vue` 操作列增加"工艺路线"按钮
- [x] 集成抽屉组件到物料档案页面

### 任务1.3: 工艺路线物料选择优化
- [x] 将 `ProcessRoute.vue` 的"关联物料"从文本输入改为下拉选择
- [x] 实现物料搜索功能（支持编码、名称搜索）
- [x] 下拉选项显示"编码 - 名称"格式

---

## 阶段2: 物料级检验方案配置

### 任务2.1: 物料档案操作列增强
- [x] 将现有"检验规格"按钮改为下拉菜单"检验配置"
- [x] 下拉菜单项：IQC方案、FQC方案、OQC方案、检验规格
- [x] 点击对应菜单项打开配置抽屉

### 任务2.2: 创建物料检验方案配置抽屉
- [x] 创建 `src/components/MaterialInspPlanDrawer.vue` 组件
- [x] 支持通过props传入检验类型（IQC/FQC/OQC）
- [x] 实现已绑定方案列表展示
- [x] 实现新增绑定：选择检验方案、设置优先级、设置默认方案
- [x] 实现编辑绑定
- [x] 实现删除绑定
- [x] 在 `MaterialProduct.vue` 集成抽屉组件

### 任务2.3: 整合检验规格入口
- [x] 将现有 `MaterialSpecDrawer` 整合到新的下拉菜单中
- [x] 保持原有功能不变

---

## 阶段3: 工序级检验配置

### 任务3.1: 工序明细表格增强
- [x] 在 `ProcessRoute.vue` 工序明细表格增加"检验配置"列
- [x] 显示已配置的检验方案数量（首检/巡检/末检标签）
- [x] 提供"配置"按钮打开配置弹窗

### 任务3.2: 创建工序检验配置弹窗
- [x] 创建 `src/components/OperationInspConfigModal.vue` 组件
- [x] 实现分组展示：首检方案、巡检方案、末检方案
- [x] 每个分组显示已绑定的检验方案列表
- [x] 实现新增绑定：选择检验类型、选择方案、配置频次
- [x] 巡检方案支持频次配置（每N件、每N小时、每班次等）
- [x] 实现编辑和删除功能
- [x] 在 `ProcessRoute.vue` 工序明细中集成弹窗

### 任务3.3: 工序编辑界面增强
- [x] 在工艺路线编辑弹窗的工序明细Tab中增加检验配置列
- [x] 支持在编辑模式下直接配置检验方案

---

## 阶段4: 数据模型与联调

### 任务4.1: 模拟数据准备
- [x] 创建物料-检验方案绑定的模拟数据
- [x] 创建工序-检验方案绑定的模拟数据
- [x] 更新现有模拟数据添加关联关系

### 任务4.2: 类型定义
- [x] 在组件中使用TypeScript类型
- [x] 工序增加检验配置字段（hasFirstInsp/hasPatrolInsp/hasFinalInsp）

---

## 验收标准

### 阶段1验收
- [x] 物料档案列表显示工艺路线关联数量
- [x] 点击数量或按钮可打开工艺路线关联抽屉
- [x] 抽屉内正确展示该物料的工艺路线列表
- [x] 工艺路线编辑时物料字段为下拉选择器

### 阶段2验收
- [x] 物料档案有"检验配置"下拉菜单
- [x] 可分别打开IQC/FQC/OQC方案配置抽屉
- [x] 配置抽屉可增删改查检验方案绑定
- [x] 检验规格功能保持正常

### 阶段3验收
- [x] 工序明细显示检验配置数量/状态
- [x] 可打开工序检验配置弹窗
- [x] 支持首检/巡检/末检三种类型
- [x] 巡检支持频次配置
