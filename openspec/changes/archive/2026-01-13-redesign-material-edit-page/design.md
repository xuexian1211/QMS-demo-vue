# 设计文档: 物料档案编辑页面重构

## 页面结构设计

### MaterialProductEdit.vue 布局

```
┌─────────────────────────────────────────────────────────────┐
│ .page-header                                                │
│ [← 返回]  编辑物料档案  [V1.0] [启用]          [保存]      │
├─────────────────────────────────────────────────────────────┤
│ .form-card (基本信息)                                       │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 物料编码   物料名称   规格型号                          │ │
│ │ 分类       单位       来源       备注                   │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ .tab-card                                                   │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ [工艺路线] | [检验配置] | [检验规格]                    │ │
│ ├─────────────────────────────────────────────────────────┤ │
│ │                    Tab内容                              │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

## Tab内容设计

### Tab1: 工艺路线

```
┌───────────────────────────────────────────────────────────┐
│ 路线编码   路线名称       版本   状态   工序数   操作     │
├───────────────────────────────────────────────────────────┤
│ PR-001    壳体加工工艺    V1.0   生效    3     [查看详情] │
│   └─ 展开行: 工序明细                                     │
│      ┌─────────────────────────────────────────────────┐  │
│      │ 序号  工序名称  工作中心  检验配置        描述   │  │
│      │  10   熔炼      WC-01   [首检][巡检] [配置] ... │  │
│      │  20   压铸      WC-02   [首检][巡检] [配置] ... │  │
│      │  30   去毛刺    WC-03   [末检]       [配置] ... │  │
│      └─────────────────────────────────────────────────┘  │
└───────────────────────────────────────────────────────────┘
```

**工序检验配置交互流程：**
1. 点击工序行的"配置"按钮
2. 弹出 `OperationInspConfigModal` 检验配置弹窗
3. 弹窗内分三组显示：首检方案、巡检方案、末检方案
4. 每组可新增/删除检验方案绑定
5. 巡检方案支持配置频次（每N件/小时/班次/批次）
6. 点击确定后，工序行的检验标签实时更新

### Tab2: 检验配置

```
┌───────────────────────────────────────────────────────────┐
│ ┌─ IQC来料检验 ─────────────────────────────────────────┐ │
│ │ [+ 新增绑定]                                          │ │
│ │ 方案编码    方案名称           优先级  默认  操作     │ │
│ │ IQC-001    来料标准检验方案      1     ★   编辑 删除 │ │
│ └───────────────────────────────────────────────────────┘ │
│ ┌─ FQC成品检验 ─────────────────────────────────────────┐ │
│ │ [+ 新增绑定]                                          │ │
│ │ (暂无绑定)                                            │ │
│ └───────────────────────────────────────────────────────┘ │
│ ┌─ OQC出货检验 ─────────────────────────────────────────┐ │
│ │ [+ 新增绑定]                                          │ │
│ │ (暂无绑定)                                            │ │
│ └───────────────────────────────────────────────────────┘ │
└───────────────────────────────────────────────────────────┘
```

### Tab3: 检验规格

```
┌───────────────────────────────────────────────────────────┐
│ [+ 新增规格] [批量删除] [导出]                            │
├───────────────────────────────────────────────────────────┤
│ 检验项目  数据类型  目标值  上限   下限   单位   操作     │
│ 长度      计量型    100    101    99     mm   编辑 删除  │
│ 外观      计数型     -      -      -      -   编辑 删除  │
└───────────────────────────────────────────────────────────┘
```

## 路由设计

| 路径 | 模式 | 说明 |
|------|------|------|
| `/basic-data/material-products` | 列表 | 物料档案列表页 |
| `/basic-data/material-products/create` | 新增 | 新增物料 |
| `/basic-data/material-products/view/:id` | 查看 | 查看物料（只读） |
| `/basic-data/material-products/edit/:id` | 编辑 | 编辑物料 |

## 组件复用

| 组件 | 复用场景 |
|------|----------|
| `OperationInspConfigModal.vue` | 工序检验配置弹窗 |
| 检验规格表格逻辑 | 从 `MaterialSpecDrawer.vue` 提取 |

## 数据流

```
MaterialProductEdit.vue
    │
    ├── 基本信息表单 (form state)
    │
    ├── 工艺路线Tab
    │       ├── 查询: 根据materialId获取关联工艺路线
    │       └── 工序配置: 打开 OperationInspConfigModal
    │
    ├── 检验配置Tab
    │       ├── IQC绑定列表
    │       ├── FQC绑定列表
    │       └── OQC绑定列表
    │
    └── 检验规格Tab
            └── 规格列表 (增删改查)
```
