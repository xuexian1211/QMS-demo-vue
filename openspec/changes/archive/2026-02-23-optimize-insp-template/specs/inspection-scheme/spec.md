# Spec: 检验方案管理 (Inspection Scheme Management)

## ADDED Requirements

### Requirement: [REQ-IS-001] 基于模板的方案初始化
系统 SHALL 支持用户选择一个“已批准”的检验模板 (InspTemplate) 来创建新的检验方案 (InspScheme)。
系统 SHALL 自动将模板中的所有明细行 (Items) 复制到方案的明细表中，作为初始状态。

#### Scenario: 引用模板创建
- **GIVEN**: 系统中存在一个“电子料通用检验模板 (V1.0)”，包含“外观检查”和“尺寸测量”两项。
- **WHEN**: 工程师创建名为“IC芯片专用方案”的新方案，并选择引用上述模板。
- **THEN**: 新方案被创建，且其明细列表中自动包含“外观检查”和“尺寸测量”。
- **THEN**: 方案记录 `sourceTemplateId` 以供追溯，但数据已实现物理分离。

### Requirement: [REQ-IS-002] 方案明细的独立编辑能力
检验方案 (InspScheme) 的明细行 SHALL 支持独立于原模板的增、删、改操作。
修改方案明细 SHALL NOT 影响原模板或其他引用该模板的方案。

#### Scenario: 差异化定制
- **GIVEN**: 基于“电子料通用模板”创建的“IC芯片专用方案”。
- **WHEN**: 工程师在方案中删除了“尺寸测量”，并新增了“引脚平整度”检查。
- **THEN**: 该方案的明细更新为“外观检查”+“引脚平整度”。
- **THEN**: 原模板仍保持“外观检查”+“尺寸测量”不变。

### Requirement: [REQ-IS-003] 方案内的参数覆盖
系统 SHALL 允许在方案层级修改检验项目的具体执行参数（如抽样规则、检验方法、SPC开关）。

#### Scenario: 修改抽样规则
- **GIVEN**: 模板中“外观检查”默认使用 Level-II 正常抽样。
- **WHEN**: 工程师在“IC芯片专用方案”中，将“外观检查”的抽样规则修改为“全检”。
- **THEN**: 该方案在执行时，外观检查将按全检执行。
- **THEN**: 原模板的配置不受影响。
