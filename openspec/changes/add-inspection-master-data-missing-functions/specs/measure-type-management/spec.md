# 量检具类型管理

## ADDED Requirements

### Requirement: 独立的量检具类型管理页面
The system MUST provide an independent gauge type management page that supports tree-structured type management. 系统应提供独立的量检具类型管理页面，支持树状结构的类型管理

#### Scenario: 质量工程师访问量检具类型管理页面
- 当质量工程师访问"量检具类型管理"页面时
- 系统应显示量检具类型树
- 树应支持多级类型展示（如：卡尺 → 数显卡尺 → 0-150mm数显卡尺）
- 树应显示类型名称

#### Scenario: 质量工程师创建新的根级量检具类型
- 当质量工程师点击"新增根类型"按钮时
- 系统应显示新增类型表单
- 系统应允许用户输入类型名称、精度、是否需MSA
- 系统应在保存后刷新类型树并显示新创建的类型

#### Scenario: 质量工程师创建子级量检具类型
- 当质量工程师在树节点上点击"添加子类型"按钮时
- 系统应显示新增子类型表单
- 系统应自动填充父级类型信息
- 系统应在保存后刷新类型树并显示新创建的子类型

#### Scenario: 质量工程师编辑量检具类型
- 当质量工程师在树节点上点击"编辑"按钮时
- 系统应显示编辑表单，预填充当前类型信息
- 系统应允许用户修改类型名称、精度、是否需MSA
- 系统应在保存后更新类型树中的类型信息

#### Scenario: 质量工程师搜索量检具类型
- 当质量工程师在搜索框中输入搜索关键词时
- 系统应过滤类型树，显示匹配的类型节点
- 系统应支持按类型名称搜索

### Requirement: 量检具类型删除功能
The system MUST support gauge type deletion with cascade deletion confirmation. 系统应支持量检具类型的删除功能，并提供级联删除确认

#### Scenario: 质量工程师删除无引用的量检具类型
- 当质量工程师在树节点上点击"删除"按钮时
- 系统应显示确认对话框，提示删除类型及其所有子类型
- 如果该类型及其子类型未被量检具台账引用
- 系统应在用户确认后删除类型及其所有子类型
- 系统应刷新类型树

#### Scenario: 质量工程师删除被引用的量检具类型
- 当质量工程师在树节点上点击"删除"按钮时
- 系统应显示确认对话框，提示删除类型及其所有子类型
- 如果该类型或其子类型已被量检具台账引用
- 系统应提示用户该类型已被引用，并询问是否级联删除相关量检具台账或取消删除操作

#### Scenario: 质量工程师删除包含子类型的量检具类型
- 当质量工程师删除包含子类型的父类型时
- 系统应提示用户将同时删除所有子类型
- 系统应在用户确认后删除父类型及其所有子类型

### Requirement: 量检具类型树信息预览
The system MUST support previewing and operating on type information in the gauge type tree. 系统应在量检具类型树中支持类型信息的预览和操作

#### Scenario: 质量工程师在类型树中选择量检具类型
- 当质量工程师点击类型树中的某个类型节点时
- 系统应在右侧详情区域显示该类型的完整信息
- 系统应显示类型名称、精度、是否需MSA、父级类型（如有）

#### Scenario: 质量工程师展开/折叠类型树节点
- 当质量工程师点击类型树的展开/折叠图标时
- 系统应展开或折叠该节点的子类型
- 系统应保持展开/折叠状态

#### Scenario: 系统默认展开类型树
- 当页面加载时
- 系统应默认展开第一级类型节点
- 系统应自动加载类型树数据

### Requirement: 量检具类型导出功能
The system MUST support exporting gauge types. 系统应支持量检具类型的导出功能

#### Scenario: 质量工程师导出量检具类型
- 当质量工程师点击"导出"按钮时
- 系统应将当前类型树数据导出为Excel文件
- 系统应包含类型名称、精度、是否需MSA、父级类型等完整信息
- 系统应支持树状结构的导出（包含层级关系）
