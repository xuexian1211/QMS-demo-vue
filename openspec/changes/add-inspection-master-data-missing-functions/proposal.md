# 提案: 补充检验主数据管理缺失功能

## 概述

本提案旨在补充S_QMS系统中检验主数据管理的缺失功能。目前已完成不良现象库、不良原因库、量检具台账、检验项目库、检验方法库、抽样方案和检验方案等核心功能，但仍缺少以下关键组件：

1. **独立管理的缺陷分类页面** - 当前缺陷分类管理内嵌在不良现象页面中，需要独立管理页面
2. **独立管理的量检具类型页面** - 当前量检具类型管理内嵌在量检具台账页面中，需要独立管理页面
3. **物料检验规格管理** - 用于定义物料的具体检验规格（公差、标准值等）
4. **检验模板管理** - 检验方案的可复用蓝图，包含检验项目和抽样规则
5. **关联知识库管理** - 包括现象-原因关联、原因-FMEA关联等知识库功能

## 动机

### 当前问题
1. **缺陷分类和量检具类型管理不便** - 当前这些基础分类管理内嵌在其他页面中，不便于统一管理和维护
2. **缺少物料检验规格管理** - 无法为不同物料配置具体的检验规格（目标值、公差等）
3. **缺少检验模板** - 无法创建可复用的检验模板，导致检验方案配置重复性工作多
4. **缺少知识库关联** - 现象与原因、原因与FMEA之间缺少关联，无法进行智能推荐和知识复用

### 业务价值
1. **提高数据管理效率** - 独立的分类管理页面便于维护基础标准库
2. **支持多规格管理** - 物料检验规格支持同一物料在不同场景下的不同规格要求
3. **减少重复配置** - 检验模板提供可复用的检验配置，减少重复工作
4. **知识沉淀与复用** - 关联知识库支持智能推荐和经验积累

## 建议的解决方案

### 1. 缺陷分类独立管理页面
- 实现树状结构的缺陷分类管理
- 支持多级分类（如：铸造缺陷 → 气孔类缺陷）
- 提供增删改查功能
- 与不良现象库保持数据联动

### 2. 量检具类型独立管理页面
- 实现树状结构的量检具类型管理
- 支持精度、MSA要求等属性配置
- 提供增删改查功能
- 与量检具台账保持数据联动

### 3. 物料检验规格管理
- 为物料-检验项目组合配置具体规格
- 支持计量型和计数型数据
- 计量型：目标值、上限(USL)、下限(LSL)、单位
- 计数型：标准描述、标准代码、期望值、样板图
- 支持版本管理和组织隔离

### 4. 检验模板管理
- 创建检验模板主表（模板编码、名称、版本、状态）
- 配置模板明细（检验项目、抽样规则、特性分类、检验方法、量检具类型）
- 支持IPQC频次配置和SPC开关
- 支持工作流审批（草稿→审批中→已批准→作废）

### 5. 关联知识库管理
- **现象-原因关联**：当检验员选择不良现象时，系统可推荐常见原因
- **原因-FMEA关联**：建立根本原因与PFMEA失效模式的桥梁
- 支持权重配置用于排序推荐

## 替代方案

### 方案A：保持现状（不推荐）
- 继续将缺陷分类和量检具类型管理内嵌在其他页面中
- 优点：无需额外开发
- 缺点：管理不便，用户体验差，数据管理分散

### 方案B：简化功能
- 只实现物料检验规格和检验模板
- 暂不实现关联知识库
- 优点：开发量较小
- 缺点：功能不完整，无法充分发挥知识库的价值

### 方案C：完整实现（推荐）
- 实现所有缺失功能
- 支持完整的数据管理和知识库功能
- 优点：功能完整，符合业务需求
- 缺点：开发工作量较大

**建议采用方案C**，因为关联知识库是质量管理系统的重要特性，能够显著提升系统的智能化水平和用户体验。

## 影响分析

### 用户影响
- 质量工程师可以更方便地管理缺陷分类和量检具类型
- 可以为不同物料配置具体的检验规格
- 可以创建可复用的检验模板，减少重复配置
- 可以建立知识库关联，实现智能推荐

### 系统影响
- 需要新增6个页面组件
- 需要定义新的路由
- 需要实现新的数据模型（当前使用模拟数据）
- 需要与现有功能保持数据一致性

### 技术影响
- 遵循现有的Vue 3组合式API和TypeScript规范
- 使用Ant Design Vue组件库
- 保持与现有页面的一致性

## 成功标准

1. 所有新增功能页面能够正常创建、编辑、删除记录
2. 缺陷分类和量检具类型独立页面与内嵌在不良现象/台账中的数据保持同步
3. 物料检验规格支持计量型和计数型两种数据类型
4. 检验模板支持工作流状态流转
5. 关联知识库能够正确存储和检索关联关系
6. 所有功能符合现有的UI/UX规范和代码风格
7. 页面响应速度满足用户需求（<500ms）

## 未解决的问题

1. **数据持久化** - 当前使用模拟数据，需要确认后端API接口规范
2. **工作流集成** - 检验模板的审批流程需要与工作流系统集成
3. **FMEA系统集成** - 原因-FMEA关联需要确认FMEA模块的数据结构
4. **权限控制** - 需要确认不同角色对这些功能的访问权限
