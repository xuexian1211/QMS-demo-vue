# Implementation Plan: 检验方案功能扩展与优化

## 目标
实现 `insp_main_data_req.md` 需求文档中定义的检验方案核心逻辑，重点包括多组织支持、UI 布局重构、策略维度扩展以及物料规格的自动绑定与同步。

## 变更内容

### 1. 模型与数据层 (Models & API)
- **[修改] `src/api/inspScheme.ts`**
    - 更新 Mock 数据与接口定义，增加 `orgId` 组织 ID 字段。
    - `InspStrategy` 接口增加 `materialGroupId`, `customerId`, `ipqcType` 等新维度字段。
    - 增加不良现象绑定 API 模拟逻辑。
    - 增加物料规格拉取与反向同步 API 模拟逻辑。

### 2. UI 布局重构 (UI Redesign)
- **[修改] `src/views/inspection-model/InspSchemeEdit.vue`**
    - 页面布局调整：顶部基础信息卡片 + 底部 4 页签卡片。
    - **页签 1：检验项目明细** - 优化行内编辑体验。
    - **页签 2：明细不良现象绑定** - 实现项目行与不良现象关联。
    - **页签 3：策略绑定** - 弹窗增加物料组、客户、IPQC 类型选择。
    - **页签 4：物料检验规格** - 实现规格自动获取、编辑与“同步至物料档案”功能。

### 3. 核心业务逻辑 (Core Logic)
- **[修改] `src/utils/strategyMatcher.ts`**
    - 扩展匹配引擎，适配新增维度（物料组、客户、IPQC 类型）。
    - 增加基于 `orgId` 的组织隔离匹配逻辑。

## 验证计划

### 自动化测试
- 更新 `src/__tests__/strategyMatcher.spec.ts`，覆盖物料组、客户和不同 IPQC 类型的匹配场景。
- 验证多组织隔离逻辑。

### 手动验证
1. **布局检查**：进入编辑页，确认是否为 4 页签布局。
2. **策略匹配测试**：
    - 配置一个物料组策略，验证该组资产物料是否能自动匹配到方案。
    - 配置不同 IPQC 类型的策略（首件 vs 巡检），验证匹配准确性。
3. **规格同步测试**：
    - 在“物料检验规格”页签修改数值，点击同步按钮，验证提示及模拟数据更新。
