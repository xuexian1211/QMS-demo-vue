import{x as a,N as X,r as P,a as Z,m as ss,c as V,o as y,e as s,p as C,f as ts,q as e,h as u,y as D,K as es,s as p,G as as,t as n,F as os,z as ns,B as ls,j as is,C as T,E as H,O as ds,Q as rs,U as N,u as cs}from"./index-Ozo2vowX.js";import{_ as us}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as ps}from"./ExportOutlined-Bxr6hJMG.js";import{S as _s}from"./SyncOutlined-LrPHMa3W.js";var fs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M820 436h-40c-4.4 0-8 3.6-8 8v40c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-40c0-4.4-3.6-8-8-8zm32-104H732V120c0-4.4-3.6-8-8-8H300c-4.4 0-8 3.6-8 8v212H172c-44.2 0-80 35.8-80 80v328c0 17.7 14.3 32 32 32h168v132c0 4.4 3.6 8 8 8h424c4.4 0 8-3.6 8-8V772h168c17.7 0 32-14.3 32-32V412c0-44.2-35.8-80-80-80zM360 180h304v152H360V180zm304 664H360V568h304v276zm200-140H732V500H292v204H160V412c0-6.6 5.4-12 12-12h680c6.6 0 12 5.4 12 12v292z"}}]},name:"printer",theme:"outlined"};function j(_){for(var r=1;r<arguments.length;r++){var c=arguments[r]!=null?Object(arguments[r]):{},f=Object.keys(c);typeof Object.getOwnPropertySymbols=="function"&&(f=f.concat(Object.getOwnPropertySymbols(c).filter(function(v){return Object.getOwnPropertyDescriptor(c,v).enumerable}))),f.forEach(function(v){ms(_,v,c[v])})}return _}function ms(_,r,c){return r in _?Object.defineProperty(_,r,{value:c,enumerable:!0,configurable:!0,writable:!0}):_[r]=c,_}var x=function(r,c){var f=j({},r,c.attrs);return a(X,j({},f,{icon:fs}),null)};x.displayName="PrinterOutlined";x.inheritAttrs=!1;const vs={class:"process-disposal-view-container"},bs={class:"toolbar"},gs={class:"content-container"},ys={class:"info-item"},hs={class:"value"},Ms={class:"info-item"},Ds={class:"value"},Os={class:"info-item"},ws={class:"value"},ks={class:"info-item"},Ps={class:"info-item"},Cs={class:"value"},Ts={class:"info-item"},xs={class:"value"},zs={class:"info-item"},Vs={class:"value"},Hs={class:"info-item"},Ns={class:"value"},js={class:"info-item"},As={class:"value"},Es={class:"info-item"},Ls={class:"value"},Rs={class:"info-item"},Ss={class:"value"},Ys={class:"info-item"},Bs={class:"value"},Qs={class:"info-item"},Us={class:"value"},qs={class:"info-item"},Is={class:"info-item"},Fs={class:"info-item"},Ks={class:"value"},$s={class:"info-item"},Gs={class:"value"},Ws={class:"info-item"},Js={class:"value"},Xs={class:"info-item"},Zs={class:"value"},st={class:"info-item"},tt={class:"value"},et={class:"info-item"},at={class:"value"},ot={class:"info-item"},nt={class:"value"},lt={class:"info-item"},it={class:"value"},dt={class:"info-item"},rt={class:"value"},ct={class:"info-item"},ut={class:"value"},pt={class:"info-item"},_t={class:"value"},ft={class:"info-item"},mt={class:"value"},vt={class:"info-item"},bt={class:"value"},gt={class:"info-item"},yt={class:"value"},ht={class:"info-item"},Mt={class:"value"},Dt={class:"timeline-content"},Ot={class:"timeline-title"},wt={class:"timeline-desc"},kt={class:"timeline-time"},Pt={class:"timeline-user"},Ct={class:"info-item"},Tt={class:"value"},xt={class:"info-item"},zt={class:"value"},Vt={class:"info-item"},Ht={class:"value"},Nt={__name:"ProcessDisposalView",setup(_){const r=cs(),c=is(),f=P("personnel"),v=P(!1),o=Z({id:"",disposalNo:"",workOrder:"",discoveryDate:null,productionLine:"",process:"",shift:"",productCode:"",productName:"",defectQuantity:null,defectDescription:"",causeAnalysis:"",disposalMethod:"",urgencyLevel:"",disposalMeasures:"",disposalResult:"",disposalPerson:"",disposalDate:null,discoverer:"",processor:"",processingDate:null,reviewer:"",responsibleDept:"",responsiblePerson:"",contactPhone:"",status:"",createTime:null,updateTime:null,auditTime:null,auditOpinion:"",correctiveAction:"",remark:""}),z=P([]),A=()=>{r.push("/production-quality/exception-handling/process-disposal")},E=()=>{r.push(`/production-quality/exception-handling/process-disposal/edit/${o.id}`)},L=()=>{window.print(),T.success("打印功能已启动")},R=()=>{T.info("导出功能开发中...")},S=i=>({pending:"待处理",processing:"处理中",completed:"已完成",closed:"已关闭"})[i]||i,Y=i=>({pending:"orange",processing:"blue",completed:"green",closed:"default"})[i]||"default",B=i=>({rework:"返工",repair:"返修",scrap:"报废",concession:"让步接收",return:"退回供应商"})[i]||i,Q=i=>({rework:"blue",repair:"orange",scrap:"red",concession:"green",return:"purple"})[i]||"default",U=i=>({low:"低",medium:"中",high:"高",urgent:"紧急"})[i]||i,q=i=>({low:"green",medium:"blue",high:"orange",urgent:"red"})[i]||"default",I=i=>({created:N,processing:_s,completed:rs,rejected:ds})[i]||N,F=i=>({created:"gray",processing:"blue",completed:"green",rejected:"red"})[i]||"gray",O=i=>i?H(i).format("YYYY-MM-DD HH:mm"):"",g=i=>i?H(i).format("YYYY-MM-DD HH:mm:ss"):"",K=async()=>{const i=c.params.id;try{await new Promise(t=>setTimeout(t,500)),Object.assign(o,{id:i,disposalNo:"PROC202401001",workOrder:"WO202401001",discoveryDate:"2024-01-15 09:30:00",productionLine:"生产线A",process:"焊接工序",shift:"白班",productCode:"P001",productName:"传动轴组件",defectQuantity:5,defectDescription:"焊接出现气孔缺陷，主要分布在焊缝区域，影响产品质量",causeAnalysis:"焊接参数设置不当，电流过大导致焊缝气孔增多",disposalMethod:"rework",urgencyLevel:"high",disposalMeasures:"重新调整焊接参数，对不合格品进行返工处理",disposalResult:"已完成返工，质量检验合格",disposalPerson:"李四",disposalDate:"2024-01-15 16:30:00",discoverer:"张三",processor:"李四",processingDate:"2024-01-15 16:30:00",reviewer:"王五",responsibleDept:"生产部",responsiblePerson:"张三",contactPhone:"13800138000",status:"completed",createTime:"2024-01-15 09:30:00",updateTime:"2024-01-15 16:30:00",auditTime:"2024-01-15 17:00:00",auditOpinion:"返工处理符合要求，同意关闭",correctiveAction:"设备维护计划已制定，操作员培训已安排",remark:"需要加强过程质量控制"}),v.value=o.status==="completed",z.value=[{title:"创建处置单",description:"发现焊接气孔缺陷，创建过程不合格品处置单",time:"2024-01-15 09:30:00",user:"张三",status:"created"},{title:"开始处理",description:"开始对不合格品进行返工处理",time:"2024-01-15 14:00:00",user:"李四",status:"processing"},{title:"处理完成",description:"返工处理完成，质量检验合格",time:"2024-01-15 16:30:00",user:"李四",status:"completed"},{title:"审核通过",description:"审核通过，处置单关闭",time:"2024-01-15 17:00:00",user:"王五",status:"completed"}]}catch{T.error("获取详情失败")}};return ss(()=>{K()}),(i,t)=>{const h=p("a-button"),l=p("a-col"),w=p("a-tag"),d=p("a-row"),b=p("a-card"),M=p("a-tab-pane"),k=p("a-divider"),$=p("a-timeline-item"),G=p("a-timeline"),W=p("a-tabs");return y(),V("div",vs,[s("div",bs,[a(h,{onClick:A},{icon:e(()=>[a(D(es))]),default:e(()=>[t[1]||(t[1]=u(" 返回 ",-1))]),_:1}),v.value?ts("",!0):(y(),C(h,{key:0,type:"primary",onClick:E},{icon:e(()=>[a(D(as))]),default:e(()=>[t[2]||(t[2]=u(" 编辑 ",-1))]),_:1})),a(h,{onClick:L},{icon:e(()=>[a(D(x))]),default:e(()=>[t[3]||(t[3]=u(" 打印 ",-1))]),_:1}),a(h,{onClick:R},{icon:e(()=>[a(D(ps))]),default:e(()=>[t[4]||(t[4]=u(" 导出 ",-1))]),_:1})]),s("div",gs,[a(b,{title:"基本信息",size:"small",class:"info-card"},{default:e(()=>[a(d,{gutter:16},{default:e(()=>[a(l,{span:6},{default:e(()=>[s("div",ys,[t[5]||(t[5]=s("span",{class:"label"},"处置单号：",-1)),s("span",hs,n(o.disposalNo),1)])]),_:1}),a(l,{span:6},{default:e(()=>[s("div",Ms,[t[6]||(t[6]=s("span",{class:"label"},"生产工单：",-1)),s("span",Ds,n(o.workOrder),1)])]),_:1}),a(l,{span:6},{default:e(()=>[s("div",Os,[t[7]||(t[7]=s("span",{class:"label"},"发现日期：",-1)),s("span",ws,n(g(o.discoveryDate)),1)])]),_:1}),a(l,{span:6},{default:e(()=>[s("div",ks,[t[8]||(t[8]=s("span",{class:"label"},"状态：",-1)),a(w,{color:Y(o.status)},{default:e(()=>[u(n(S(o.status)),1)]),_:1},8,["color"])])]),_:1})]),_:1}),a(d,{gutter:16},{default:e(()=>[a(l,{span:6},{default:e(()=>[s("div",Ps,[t[9]||(t[9]=s("span",{class:"label"},"生产线：",-1)),s("span",Cs,n(o.productionLine),1)])]),_:1}),a(l,{span:6},{default:e(()=>[s("div",Ts,[t[10]||(t[10]=s("span",{class:"label"},"工序：",-1)),s("span",xs,n(o.process),1)])]),_:1}),a(l,{span:6},{default:e(()=>[s("div",zs,[t[11]||(t[11]=s("span",{class:"label"},"班次：",-1)),s("span",Vs,n(o.shift==="day"?"白班":"夜班"),1)])]),_:1}),a(l,{span:6},{default:e(()=>[s("div",Hs,[t[12]||(t[12]=s("span",{class:"label"},"发现人：",-1)),s("span",Ns,n(o.discoverer),1)])]),_:1})]),_:1})]),_:1}),a(b,{title:"不合格情况描述",size:"small",class:"info-card"},{default:e(()=>[a(d,{gutter:16},{default:e(()=>[a(l,{span:8},{default:e(()=>[s("div",js,[t[13]||(t[13]=s("span",{class:"label"},"产品编码：",-1)),s("span",As,n(o.productCode),1)])]),_:1}),a(l,{span:8},{default:e(()=>[s("div",Es,[t[14]||(t[14]=s("span",{class:"label"},"产品名称：",-1)),s("span",Ls,n(o.productName),1)])]),_:1}),a(l,{span:8},{default:e(()=>[s("div",Rs,[t[15]||(t[15]=s("span",{class:"label"},"不合格数量：",-1)),s("span",Ss,n(o.defectQuantity)+" 件",1)])]),_:1})]),_:1}),a(d,{gutter:16},{default:e(()=>[a(l,{span:24},{default:e(()=>[s("div",Ys,[t[16]||(t[16]=s("span",{class:"label"},"不合格描述：",-1)),s("span",Bs,n(o.defectDescription),1)])]),_:1})]),_:1}),a(d,{gutter:16},{default:e(()=>[a(l,{span:24},{default:e(()=>[s("div",Qs,[t[17]||(t[17]=s("span",{class:"label"},"原因分析：",-1)),s("span",Us,n(o.causeAnalysis),1)])]),_:1})]),_:1})]),_:1}),a(b,{title:"处置方式",size:"small",class:"info-card"},{default:e(()=>[a(d,{gutter:16},{default:e(()=>[a(l,{span:8},{default:e(()=>[s("div",qs,[t[18]||(t[18]=s("span",{class:"label"},"处置方式：",-1)),a(w,{color:Q(o.disposalMethod)},{default:e(()=>[u(n(B(o.disposalMethod)),1)]),_:1},8,["color"])])]),_:1}),a(l,{span:8},{default:e(()=>[s("div",Is,[t[19]||(t[19]=s("span",{class:"label"},"紧急程度：",-1)),a(w,{color:q(o.urgencyLevel)},{default:e(()=>[u(n(U(o.urgencyLevel)),1)]),_:1},8,["color"])])]),_:1}),a(l,{span:8},{default:e(()=>[s("div",Fs,[t[20]||(t[20]=s("span",{class:"label"},"处置人：",-1)),s("span",Ks,n(o.processor||"未指定"),1)])]),_:1})]),_:1}),a(d,{gutter:16},{default:e(()=>[a(l,{span:24},{default:e(()=>[s("div",$s,[t[21]||(t[21]=s("span",{class:"label"},"处置措施：",-1)),s("span",Gs,n(o.disposalMeasures),1)])]),_:1})]),_:1}),a(d,{gutter:16},{default:e(()=>[a(l,{span:24},{default:e(()=>[s("div",Ws,[t[22]||(t[22]=s("span",{class:"label"},"处置结果：",-1)),s("span",Js,n(o.disposalResult||"暂无"),1)])]),_:1})]),_:1})]),_:1}),a(W,{activeKey:f.value,"onUpdate:activeKey":t[0]||(t[0]=m=>f.value=m),class:"info-tabs"},{default:e(()=>[a(M,{key:"personnel",tab:"人员信息"},{default:e(()=>[a(b,{size:"small",class:"tab-card"},{default:e(()=>[a(d,{gutter:16},{default:e(()=>[a(l,{span:6},{default:e(()=>[s("div",Xs,[t[23]||(t[23]=s("span",{class:"label"},"发现人：",-1)),s("span",Zs,n(o.discoverer),1)])]),_:1}),a(l,{span:6},{default:e(()=>[s("div",st,[t[24]||(t[24]=s("span",{class:"label"},"发现时间：",-1)),s("span",tt,n(g(o.discoveryDate)),1)])]),_:1}),a(l,{span:6},{default:e(()=>[s("div",et,[t[25]||(t[25]=s("span",{class:"label"},"处理人：",-1)),s("span",at,n(o.processor||"未指定"),1)])]),_:1}),a(l,{span:6},{default:e(()=>[s("div",ot,[t[26]||(t[26]=s("span",{class:"label"},"处理时间：",-1)),s("span",nt,n(O(o.processingDate)),1)])]),_:1})]),_:1}),a(d,{gutter:16},{default:e(()=>[a(l,{span:6},{default:e(()=>[s("div",lt,[t[27]||(t[27]=s("span",{class:"label"},"责任部门：",-1)),s("span",it,n(o.responsibleDept),1)])]),_:1}),a(l,{span:6},{default:e(()=>[s("div",dt,[t[28]||(t[28]=s("span",{class:"label"},"责任人：",-1)),s("span",rt,n(o.responsiblePerson),1)])]),_:1}),a(l,{span:6},{default:e(()=>[s("div",ct,[t[29]||(t[29]=s("span",{class:"label"},"联系电话：",-1)),s("span",ut,n(o.contactPhone),1)])]),_:1})]),_:1})]),_:1})]),_:1}),a(M,{key:"process",tab:"流程管理"},{default:e(()=>[a(b,{size:"small",class:"tab-card"},{default:e(()=>[a(d,{gutter:16},{default:e(()=>[a(l,{span:8},{default:e(()=>[s("div",pt,[t[30]||(t[30]=s("span",{class:"label"},"审核人：",-1)),s("span",_t,n(o.reviewer||"未指定"),1)])]),_:1}),a(l,{span:8},{default:e(()=>[s("div",ft,[t[31]||(t[31]=s("span",{class:"label"},"审核时间：",-1)),s("span",mt,n(O(o.auditTime)),1)])]),_:1}),a(l,{span:8},{default:e(()=>[s("div",vt,[t[32]||(t[32]=s("span",{class:"label"},"处置日期：",-1)),s("span",bt,n(O(o.disposalDate)),1)])]),_:1})]),_:1}),a(k,null,{default:e(()=>[...t[33]||(t[33]=[u("审核意见",-1)])]),_:1}),a(d,{gutter:16},{default:e(()=>[a(l,{span:24},{default:e(()=>[s("div",gt,[t[34]||(t[34]=s("span",{class:"label"},"审核意见：",-1)),s("span",yt,n(o.auditOpinion||"暂无审核意见"),1)])]),_:1})]),_:1}),a(k,null,{default:e(()=>[...t[35]||(t[35]=[u("纠正措施",-1)])]),_:1}),a(d,{gutter:16},{default:e(()=>[a(l,{span:24},{default:e(()=>[s("div",ht,[t[36]||(t[36]=s("span",{class:"label"},"纠正措施：",-1)),s("span",Mt,n(o.correctiveAction||"暂无纠正措施"),1)])]),_:1})]),_:1})]),_:1})]),_:1}),a(M,{key:"timeline",tab:"流程记录"},{default:e(()=>[a(b,{size:"small",class:"tab-card"},{default:e(()=>[a(G,null,{default:e(()=>[(y(!0),V(os,null,ns(z.value,(m,J)=>(y(),C($,{key:J,color:F(m.status)},{dot:e(()=>[(y(),C(ls(I(m.status))))]),default:e(()=>[s("div",Dt,[s("div",Ot,n(m.title),1),s("div",wt,n(m.description),1),s("div",kt,n(g(m.time)),1),s("div",Pt,"操作人："+n(m.user),1)])]),_:2},1032,["color"]))),128))]),_:1})]),_:1})]),_:1}),a(M,{key:"remark",tab:"备注信息"},{default:e(()=>[a(b,{size:"small",class:"tab-card"},{default:e(()=>[a(d,{gutter:16},{default:e(()=>[a(l,{span:24},{default:e(()=>[s("div",Ct,[t[37]||(t[37]=s("span",{class:"label"},"备注：",-1)),s("span",Tt,n(o.remark||"暂无备注"),1)])]),_:1})]),_:1}),a(k,null,{default:e(()=>[...t[38]||(t[38]=[u("时间记录",-1)])]),_:1}),a(d,{gutter:16},{default:e(()=>[a(l,{span:8},{default:e(()=>[s("div",xt,[t[39]||(t[39]=s("span",{class:"label"},"创建时间：",-1)),s("span",zt,n(g(o.createTime)),1)])]),_:1}),a(l,{span:8},{default:e(()=>[s("div",Vt,[t[40]||(t[40]=s("span",{class:"label"},"更新时间：",-1)),s("span",Ht,n(g(o.updateTime)),1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["activeKey"])])])}}},Rt=us(Nt,[["__scopeId","data-v-b3242e83"]]);export{Rt as default};
