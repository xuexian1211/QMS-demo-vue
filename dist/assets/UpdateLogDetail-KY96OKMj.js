import{x as n,N as R,d as _e,r as j,c as C,o as i,p as k,s as m,q as e,F as H,z as Q,e as w,f as P,h as v,t as g,y as D,X as we,C as T,k as Te,j as Me,m as Pe,u as $e,G as ce,a5 as De,B as ze,Q as Le,L as ue}from"./index-C4MSyl8P.js";import{e as Se,b as je,f as He,h as Ue,p as Ae,a as Be}from"./updateLog-D3R9GQcA.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{D as Ie}from"./DatabaseOutlined-CZ-7bq5G.js";var Ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 280h56c4.4 0 8-3.6 8-8 0-28.3 5.9-53.2 17.1-73.5 10.6-19.4 26-34.8 45.4-45.4C450.9 142 475.7 136 504 136h16c28.3 0 53.2 5.9 73.5 17.1 19.4 10.6 34.8 26 45.4 45.4C650 218.9 656 243.7 656 272c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-40-8.8-76.7-25.9-108.1a184.31 184.31 0 00-74-74C596.7 72.8 560 64 520 64h-16c-40 0-76.7 8.8-108.1 25.9a184.31 184.31 0 00-74 74C304.8 195.3 296 232 296 272c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M940 512H792V412c76.8 0 139-62.2 139-139 0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8a63 63 0 01-63 63H232a63 63 0 01-63-63c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 76.8 62.2 139 139 139v100H84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h148v96c0 6.5.2 13 .7 19.3C164.1 728.6 116 796.7 116 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-44.2 23.9-82.9 59.6-103.7a273 273 0 0022.7 49c24.3 41.5 59 76.2 100.5 100.5S460.5 960 512 960s99.8-13.9 141.3-38.2a281.38 281.38 0 00123.2-149.5A120 120 0 01836 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-79.3-48.1-147.4-116.7-176.7.4-6.4.7-12.8.7-19.3v-96h148c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM716 680c0 36.8-9.7 72-27.8 102.9-17.7 30.3-43 55.6-73.3 73.3C584 874.3 548.8 884 512 884s-72-9.7-102.9-27.8c-30.3-17.7-55.6-43-73.3-73.3A202.75 202.75 0 01308 680V412h408v268z"}}]},name:"bug",theme:"outlined"};function ie(s){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},l=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(a).filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable}))),l.forEach(function(d){Ne(s,d,a[d])})}return s}function Ne(s,t,a){return t in s?Object.defineProperty(s,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[t]=a,s}var te=function(t,a){var l=ie({},t,a.attrs);return n(R,ie({},l,{icon:Ve}),null)};te.displayName="BugOutlined";te.inheritAttrs=!1;var Re={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M516 673c0 4.4 3.4 8 7.5 8h185c4.1 0 7.5-3.6 7.5-8v-48c0-4.4-3.4-8-7.5-8h-185c-4.1 0-7.5 3.6-7.5 8v48zm-194.9 6.1l192-161c3.8-3.2 3.8-9.1 0-12.3l-192-160.9A7.95 7.95 0 00308 351v62.7c0 2.4 1 4.6 2.9 6.1L420.7 512l-109.8 92.2a8.1 8.1 0 00-2.9 6.1V673c0 6.8 7.9 10.5 13.1 6.1zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"code",theme:"outlined"};function de(s){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},l=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(a).filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable}))),l.forEach(function(d){Ee(s,d,a[d])})}return s}function Ee(s,t,a){return t in s?Object.defineProperty(s,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[t]=a,s}var ne=function(t,a){var l=de({},t,a.attrs);return n(R,de({},l,{icon:Re}),null)};ne.displayName="CodeOutlined";ne.inheritAttrs=!1;var Fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M531.3 574.4l.3-1.4c5.8-23.9 13.1-53.7 7.4-80.7-3.8-21.3-19.5-29.6-32.9-30.2-15.8-.7-29.9 8.3-33.4 21.4-6.6 24-.7 56.8 10.1 98.6-13.6 32.4-35.3 79.5-51.2 107.5-29.6 15.3-69.3 38.9-75.2 68.7-1.2 5.5.2 12.5 3.5 18.8 3.7 7 9.6 12.4 16.5 15 3 1.1 6.6 2 10.8 2 17.6 0 46.1-14.2 84.1-79.4 5.8-1.9 11.8-3.9 17.6-5.9 27.2-9.2 55.4-18.8 80.9-23.1 28.2 15.1 60.3 24.8 82.1 24.8 21.6 0 30.1-12.8 33.3-20.5 5.6-13.5 2.9-30.5-6.2-39.6-13.2-13-45.3-16.4-95.3-10.2-24.6-15-40.7-35.4-52.4-65.8zM421.6 726.3c-13.9 20.2-24.4 30.3-30.1 34.7 6.7-12.3 19.8-25.3 30.1-34.7zm87.6-235.5c5.2 8.9 4.5 35.8.5 49.4-4.9-19.9-5.6-48.1-2.7-51.4.8.1 1.5.7 2.2 2zm-1.6 120.5c10.7 18.5 24.2 34.4 39.1 46.2-21.6 4.9-41.3 13-58.9 20.2-4.2 1.7-8.3 3.4-12.3 5 13.3-24.1 24.4-51.4 32.1-71.4zm155.6 65.5c.1.2.2.5-.4.9h-.2l-.2.3c-.8.5-9 5.3-44.3-8.6 40.6-1.9 45 7.3 45.1 7.4zm191.4-388.2L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-pdf",theme:"outlined"};function pe(s){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},l=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(a).filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable}))),l.forEach(function(d){qe(s,d,a[d])})}return s}function qe(s,t,a){return t in s?Object.defineProperty(s,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[t]=a,s}var ae=function(t,a){var l=pe({},t,a.attrs);return n(R,pe({},l,{icon:Fe}),null)};ae.displayName="FilePdfOutlined";ae.inheritAttrs=!1;var Ge={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"};function fe(s){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},l=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(a).filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable}))),l.forEach(function(d){Qe(s,d,a[d])})}return s}function Qe(s,t,a){return t in s?Object.defineProperty(s,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[t]=a,s}var oe=function(t,a){var l=fe({},t,a.attrs);return n(R,fe({},l,{icon:Ge}),null)};oe.displayName="InboxOutlined";oe.inheritAttrs=!1;var Xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};function me(s){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},l=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(a).filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable}))),l.forEach(function(d){Je(s,d,a[d])})}return s}function Je(s,t,a){return t in s?Object.defineProperty(s,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[t]=a,s}var se=function(t,a){var l=me({},t,a.attrs);return n(R,me({},l,{icon:Xe}),null)};se.displayName="PlusCircleOutlined";se.inheritAttrs=!1;const Ke={class:"design-document-list"},We={key:1,class:"document-list"},Ye={class:"task-list"},Ze={key:1,class:"task-title"},et={class:"title-text"},tt={key:0,class:"task-description"},nt={key:1,style:{color:"#999"}},at={class:"document-actions",style:{"margin-top":"16px"}},ot=_e({__name:"DesignDocumentList",props:{documents:{}},emits:["task-update"],setup(s,{emit:t}){const a=t,l=j([]),d=[{title:"任务编号",dataIndex:"taskNumber",key:"taskNumber",width:100},{title:"任务标题",dataIndex:"title",key:"title",ellipsis:!0},{title:"负责角色",dataIndex:"assigneeRole",key:"assigneeRole",width:100},{title:"状态",dataIndex:"status",key:"status",width:120},{title:"预估工时",dataIndex:"estimatedHours",key:"estimatedHours",width:100},{title:"依赖任务",dataIndex:"dependencies",key:"dependencies",width:150},{title:"完成时间",dataIndex:"completedAt",key:"completedAt",width:180}],B=r=>{if(!r.tasks||r.tasks.length===0)return 0;const c=r.tasks.filter(O=>O.status==="completed").length;return Math.round(c/r.tasks.length*100)},E=async(r,c)=>{try{const O=await Se(r,c.id,{status:c.status});O.success?(T.success("状态更新成功"),a("task-update")):T.error(O.message)}catch(O){T.error("状态更新失败"),console.error(O)}},p=r=>{let c=`# ${r.title}

`;c+=`**文档类型**: ${A(r.documentType)}

`,c+=`**创建时间**: ${U(r.createdAt)}

`,c+=`**创建人**: ${r.createdBy}

`,c+=`---

`,c+=`## 任务列表

`,r.tasks.forEach(b=>{c+=`### ${b.taskNumber} ${b.title}

`,b.description&&(c+=`${b.description}

`),c+=`- **负责角色**: ${I(b.assigneeRole)}
`,c+=`- **状态**: ${J(b.status)}
`,c+=`- **预估工时**: ${b.estimatedHours}h
`,b.dependencies&&b.dependencies.length>0&&(c+=`- **依赖任务**: ${b.dependencies.join(", ")}
`),b.completedAt&&(c+=`- **完成时间**: ${U(b.completedAt)}
`),c+=`
`});const O=new Blob([c],{type:"text/markdown;charset=utf-8"}),M=URL.createObjectURL(O),L=document.createElement("a");L.href=M,L.download=`${r.title}.md`,L.click(),URL.revokeObjectURL(M),T.success("导出成功")},z=r=>{T.info("PDF 导出功能开发中")},U=r=>new Date(r).toLocaleString("zh-CN"),A=r=>({frontend:"前端",backend:"后端",test:"测试",general:"通用"})[r]||r,F=r=>({frontend:"blue",backend:"green",test:"orange",general:"purple"})[r]||"default",I=r=>({frontend:"前端",backend:"后端",test:"测试",devops:"运维",general:"通用"})[r]||r,X=r=>({frontend:"blue",backend:"green",test:"orange",devops:"purple",general:"default"})[r]||"default",J=r=>({pending:"待处理","in-progress":"进行中",completed:"已完成"})[r]||r,K=r=>r>=80?"#52c41a":r>=50?"#1890ff":r>=30?"#faad14":"#ff4d4f";return(r,c)=>{const O=m("a-empty"),M=m("a-tag"),L=m("a-progress"),b=m("a-space"),V=m("a-select-option"),W=m("a-select"),Y=m("a-table"),q=m("a-button"),Z=m("a-collapse-panel"),o=m("a-collapse");return i(),C("div",Ke,[s.documents.length===0?(i(),k(O,{key:0,description:"暂无设计文档"})):(i(),C("div",We,[n(o,{activeKey:l.value,"onUpdate:activeKey":c[0]||(c[0]=f=>l.value=f),accordion:""},{default:e(()=>[(i(!0),C(H,null,Q(s.documents,f=>(i(),k(Z,{key:f.id,header:f.title},{extra:e(()=>[n(b,null,{default:e(()=>[n(M,{color:F(f.documentType)},{default:e(()=>[v(g(A(f.documentType)),1)]),_:2},1032,["color"]),n(L,{type:"circle",width:40,percent:B(f),"stroke-color":K(B(f))},null,8,["percent","stroke-color"])]),_:2},1024)]),default:e(()=>[w("div",Ye,[n(Y,{columns:d,"data-source":f.tasks,pagination:!1,size:"small","row-key":"id"},{bodyCell:e(({column:x,record:y})=>[x.key==="taskNumber"?(i(),k(M,{key:0},{default:e(()=>[v(g(y.taskNumber),1)]),_:2},1024)):x.key==="title"?(i(),C("div",Ze,[w("div",et,g(y.title),1),y.description?(i(),C("div",tt,g(y.description),1)):P("",!0)])):x.key==="assigneeRole"?(i(),k(M,{key:2,color:X(y.assigneeRole)},{default:e(()=>[v(g(I(y.assigneeRole)),1)]),_:2},1032,["color"])):x.key==="status"?(i(),k(W,{key:3,value:y.status,"onUpdate:value":$=>y.status=$,size:"small",style:{width:"100px"},onChange:$=>E(f.id,y)},{default:e(()=>[n(V,{value:"pending"},{default:e(()=>[n(M,{color:"default"},{default:e(()=>[...c[1]||(c[1]=[v("待处理",-1)])]),_:1})]),_:1}),n(V,{value:"in-progress"},{default:e(()=>[n(M,{color:"processing"},{default:e(()=>[...c[2]||(c[2]=[v("进行中",-1)])]),_:1})]),_:1}),n(V,{value:"completed"},{default:e(()=>[n(M,{color:"success"},{default:e(()=>[...c[3]||(c[3]=[v("已完成",-1)])]),_:1})]),_:1})]),_:1},8,["value","onUpdate:value","onChange"])):x.key==="estimatedHours"?(i(),C(H,{key:4},[v(g(y.estimatedHours)+"h ",1)],64)):x.key==="dependencies"?(i(),C(H,{key:5},[y.dependencies&&y.dependencies.length>0?(i(),k(b,{key:0},{default:e(()=>[(i(!0),C(H,null,Q(y.dependencies,$=>(i(),k(M,{key:$,size:"small"},{default:e(()=>[v(g($),1)]),_:2},1024))),128))]),_:2},1024)):(i(),C("span",nt,"-"))],64)):x.key==="completedAt"?(i(),C(H,{key:6},[v(g(y.completedAt?U(y.completedAt):"-"),1)],64)):P("",!0)]),_:2},1032,["data-source"])]),w("div",at,[n(b,null,{default:e(()=>[n(q,{size:"small",onClick:x=>p(f)},{icon:e(()=>[n(D(we))]),default:e(()=>[c[4]||(c[4]=v(" 导出 Markdown ",-1))]),_:1},8,["onClick"]),n(q,{size:"small",onClick:x=>z(f)},{icon:e(()=>[n(D(ae))]),default:e(()=>[c[5]||(c[5]=v(" 导出 PDF ",-1))]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1032,["header"]))),128))]),_:1},8,["activeKey"])]))])}}}),G=ge(ot,[["__scopeId","data-v-c8be882a"]]),st={class:"update-log-detail-container"},lt={class:"detail-content"},rt={class:"content-section"},ct=["innerHTML"],ut=["innerHTML"],it={class:"design-section"},dt={style:{"margin-top":"8px","font-size":"12px",color:"#999"}},pt=_e({__name:"UpdateLogDetail",setup(s){const t=$e(),a=Me(),l=Te(()=>a.params.id),d=j(!1),B=j("content"),E=j("all"),p=j(),z=j([]),U=j([]),A=async()=>{d.value=!0;try{const o=await je(l.value);o.success?p.value=o.data:(T.error(o.message),t.back())}catch(o){T.error("加载失败"),console.error(o),t.back()}finally{d.value=!1}},F=async()=>{try{const o=await He({updateLogId:l.value});o.success&&(z.value=o.data)}catch(o){console.error("加载设计文档失败",o)}},I=async()=>{try{const o=await Ue(l.value);o.success&&(U.value=o.data)}catch(o){console.error("加载进度失败",o)}},X=()=>{t.push(`/system/update-log/edit/${l.value}`)},J=async()=>{try{const o=await Ae(l.value);o.success?(T.success("发布成功"),A()):T.error(o.message)}catch(o){T.error("发布失败"),console.error(o)}},K=async()=>{try{const o=await Be(l.value);o.success?(T.success("归档成功"),A()):T.error(o.message)}catch(o){T.error("归档失败"),console.error(o)}},r=()=>{F(),I()},c=()=>{t.push("/system/update-log")},O=o=>new Date(o).toLocaleString("zh-CN"),M=o=>o.replace(/\n/g,"<br>"),L=o=>({draft:"default",published:"success",archived:"warning"})[o||""]||"default",b=o=>({draft:"草稿",published:"已发布",archived:"已归档"})[o||""]||o,V=o=>({feature:"green",fix:"orange",optimize:"blue",breaking:"red"})[o||""]||"default",W=o=>({feature:"新功能",fix:"修复",optimize:"优化",breaking:"重大变更"})[o||""]||o,Y=o=>({frontend:"前端",backend:"后端",test:"测试",general:"通用"})[o]||o,q=o=>({frontend:ne,backend:Ie,test:te,general:ue})[o]||ue,Z=o=>o>=80?"#52c41a":o>=50?"#1890ff":o>=30?"#faad14":"#ff4d4f";return Pe(()=>{A(),F(),I()}),(o,f)=>{const x=m("a-tag"),y=m("a-button"),$=m("a-space"),N=m("a-descriptions-item"),ve=m("a-descriptions"),ye=m("a-page-header"),S=m("a-tab-pane"),be=m("a-statistic"),he=m("a-card"),ke=m("a-col"),Oe=m("a-row"),le=m("a-tabs"),ee=m("a-timeline-item"),xe=m("a-timeline"),Ce=m("a-spin");return i(),C("div",st,[n(Ce,{spinning:d.value},{default:e(()=>{var re;return[n(ye,{title:(re=p.value)==null?void 0:re.title,onBack:c},{tags:e(()=>{var u,_;return[n(x,{color:L((u=p.value)==null?void 0:u.status)},{default:e(()=>{var h;return[v(g(b((h=p.value)==null?void 0:h.status)),1)]}),_:1},8,["color"]),n(x,{color:V((_=p.value)==null?void 0:_.updateType)},{default:e(()=>{var h;return[v(g(W((h=p.value)==null?void 0:h.updateType)),1)]}),_:1},8,["color"])]}),extra:e(()=>[n($,null,{default:e(()=>{var u,_,h;return[((u=p.value)==null?void 0:u.status)==="draft"?(i(),k(y,{key:0,onClick:X},{icon:e(()=>[n(D(ce))]),default:e(()=>[f[2]||(f[2]=v(" 编辑 ",-1))]),_:1})):P("",!0),((_=p.value)==null?void 0:_.status)==="draft"?(i(),k(y,{key:1,type:"primary",onClick:J},{icon:e(()=>[n(D(De))]),default:e(()=>[f[3]||(f[3]=v(" 发布 ",-1))]),_:1})):P("",!0),((h=p.value)==null?void 0:h.status)==="published"?(i(),k(y,{key:2,onClick:K},{icon:e(()=>[n(D(oe))]),default:e(()=>[f[4]||(f[4]=v(" 归档 ",-1))]),_:1})):P("",!0)]}),_:1})]),default:e(()=>[n(ve,{column:3,size:"small"},{default:e(()=>{var u;return[n(N,{label:"版本号"},{default:e(()=>[n(x,{color:"blue"},{default:e(()=>{var _;return[v(g((_=p.value)==null?void 0:_.version),1)]}),_:1})]),_:1}),n(N,{label:"发布时间"},{default:e(()=>{var _;return[v(g((_=p.value)!=null&&_.publishedAt?O(p.value.publishedAt):"-"),1)]}),_:1}),n(N,{label:"发布人"},{default:e(()=>{var _;return[v(g(((_=p.value)==null?void 0:_.publishedBy)||"-"),1)]}),_:1}),n(N,{label:"影响模块",span:3},{default:e(()=>[n($,null,{default:e(()=>{var _;return[(i(!0),C(H,null,Q((_=p.value)==null?void 0:_.affectedModules,h=>(i(),k(x,{key:h},{default:e(()=>[v(g(h),1)]),_:2},1024))),128))]}),_:1})]),_:1}),(u=p.value)!=null&&u.relatedChangeId?(i(),k(N,{key:0,label:"关联变更",span:3},{default:e(()=>[n(x,{color:"purple"},{default:e(()=>[v(g(p.value.relatedChangeId),1)]),_:1})]),_:1})):P("",!0)]}),_:1})]),_:1},8,["title"]),w("div",lt,[n(le,{activeKey:B.value,"onUpdate:activeKey":f[1]||(f[1]=u=>B.value=u)},{default:e(()=>[n(S,{key:"content",tab:"更新内容"},{default:e(()=>{var u,_,h;return[w("div",rt,[((u=p.value)==null?void 0:u.contentType)==="html"?(i(),C("div",{key:0,class:"html-content",innerHTML:(_=p.value)==null?void 0:_.content},null,8,ct)):(i(),C("div",{key:1,class:"markdown-content",innerHTML:M(((h=p.value)==null?void 0:h.content)||"")},null,8,ut))])]}),_:1}),n(S,{key:"design",tab:"功能设计文档"},{default:e(()=>[w("div",it,[n(Oe,{gutter:16,style:{"margin-bottom":"24px"}},{default:e(()=>[(i(!0),C(H,null,Q(U.value,u=>(i(),k(ke,{span:6,key:u.documentType},{default:e(()=>[n(he,{size:"small"},{default:e(()=>[n(be,{title:Y(u.documentType),value:u.completionRate,suffix:"%","value-style":{color:Z(u.completionRate)}},{prefix:e(()=>[(i(),k(ze(q(u.documentType))))]),_:2},1032,["title","value","value-style"]),w("div",dt,g(u.completedTasks)+" / "+g(u.totalTasks)+" 任务完成 ",1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),n(le,{activeKey:E.value,"onUpdate:activeKey":f[0]||(f[0]=u=>E.value=u),type:"card"},{default:e(()=>[n(S,{key:"all",tab:"全部"},{default:e(()=>[n(G,{documents:z.value,onTaskUpdate:r},null,8,["documents"])]),_:1}),n(S,{key:"frontend",tab:"前端任务"},{default:e(()=>[n(G,{documents:z.value.filter(u=>u.documentType==="frontend"),onTaskUpdate:r},null,8,["documents"])]),_:1}),n(S,{key:"backend",tab:"后端任务"},{default:e(()=>[n(G,{documents:z.value.filter(u=>u.documentType==="backend"),onTaskUpdate:r},null,8,["documents"])]),_:1}),n(S,{key:"test",tab:"测试任务"},{default:e(()=>[n(G,{documents:z.value.filter(u=>u.documentType==="test"),onTaskUpdate:r},null,8,["documents"])]),_:1})]),_:1},8,["activeKey"])])]),_:1}),n(S,{key:"history",tab:"变更历史"},{default:e(()=>[n(xe,null,{default:e(()=>{var u,_,h;return[(u=p.value)!=null&&u.publishedAt?(i(),k(ee,{key:0,color:"green"},{dot:e(()=>[n(D(Le))]),default:e(()=>[w("p",null,g(O(p.value.publishedAt)),1),w("p",null,g(p.value.publishedBy)+" 发布了此更新日志",1)]),_:1})):P("",!0),(_=p.value)!=null&&_.updateTime?(i(),k(ee,{key:1},{dot:e(()=>[n(D(ce))]),default:e(()=>[w("p",null,g(O(p.value.updateTime)),1),w("p",null,g(p.value.updater)+" 更新了内容",1)]),_:1})):P("",!0),(h=p.value)!=null&&h.createTime?(i(),k(ee,{key:2},{dot:e(()=>[n(D(se))]),default:e(()=>[w("p",null,g(O(p.value.createTime)),1),w("p",null,g(p.value.creator)+" 创建了此更新日志",1)]),_:1})):P("",!0)]}),_:1})]),_:1})]),_:1},8,["activeKey"])])]}),_:1},8,["spinning"])])}}}),vt=ge(pt,[["__scopeId","data-v-af3d3afa"]]);export{vt as default};
