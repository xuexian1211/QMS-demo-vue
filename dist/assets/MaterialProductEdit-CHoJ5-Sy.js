import{d as Ke,r as k,k as j,j as Ge,a as K,m as Xe,c as _,e as G,x as a,f as d,q as t,s as c,p as m,t as P,o,h as i,y as E,K as He,a9 as ie,P as X,F as T,z as Je,M as ce,C as F,u as Ye}from"./index-Ozo2vowX.js";import{O as Ze}from"./OperationInspConfigModal-cp7OygM3.js";import{_ as ea}from"./_plugin-vue_export-helper-DlAUqK2U.js";const aa={class:"page-container"},ta={class:"page-header"},la={class:"header-left"},sa={class:"title-section"},na={class:"page-title"},ia={key:0,class:"header-actions"},oa={key:0,class:"tab-toolbar"},ua=Ke({__name:"MaterialProductEdit",setup(da){const H=Ye(),J=Ge(),oe=k(),Y=k(!1),ue=k("routes"),p=j(()=>J.path.includes("/view/")),de=j(()=>J.path.includes("/edit/")),ge=j(()=>p.value?"查看物料档案":de.value?"编辑物料档案":"新增物料档案"),u=K({id:null,code:"",name:"",spec:"",category:void 0,unit:"",source:void 0,status:"Active",nationalCode:"",shelfLifeDays:void 0,grossWeight:void 0,netWeight:void 0,dimensions:"",remark:""}),Ie={code:[{required:!0,message:"请输入物料编码",trigger:"blur"}],name:[{required:!0,message:"请输入物料名称",trigger:"blur"}],category:[{required:!0,message:"请选择物料分类",trigger:"change"}]},Ce=s=>({Raw:"blue",Semi:"orange",Finish:"green"})[s]||"default",be=s=>({Raw:"原材料",Semi:"半成品",Finish:"成品"})[s]||s,W=k(!1),$=k([]),_e=[{title:"路线编码",dataIndex:"code",key:"code",width:150},{title:"路线名称",dataIndex:"name",key:"name",width:200},{title:"版本",dataIndex:"version",key:"version",width:80},{title:"状态",dataIndex:"status",key:"status",width:100},{title:"工序数",dataIndex:"stepCount",key:"stepCount",width:80},{title:"操作",key:"action",width:100}],we=[{title:"序号",dataIndex:"opSeq",key:"opSeq",width:60},{title:"工序名称",dataIndex:"opName",key:"opName",width:120},{title:"工作中心",dataIndex:"workCenter",key:"workCenter",width:100},{title:"检验配置",key:"inspConfig",width:200},{title:"工序描述",dataIndex:"description",key:"description"}],Te=s=>({Active:"success",Draft:"default",Obsolete:"error"})[s]||"default",xe=s=>({Active:"生效",Draft:"草稿",Obsolete:"失效"})[s]||s,Ne=s=>{H.push(`/basic-data/process-routes?code=${s.code}`)},Z=k(!1),re=k(""),pe=K({id:"",opSeq:0,opName:"",routeId:""}),Se=(s,e)=>{re.value=s.id,Object.assign(pe,{id:String(e.id),opSeq:e.opSeq,opName:e.opName,routeId:s.id}),Z.value=!0},Fe=s=>{const e=$.value.find(n=>n.id===re.value);if(e){const n=e.steps.find(g=>String(g.id)===s.operationId);n&&(n.hasFirstInsp=s.firstInspPlans.length>0,n.hasPatrolInsp=s.patrolInspPlans.length>0,n.hasFinalInsp=s.finalInspPlans.length>0)}},q=k([]),D=k([]),Q=k([]),ee=[{title:"方案编码",dataIndex:"planCode",key:"planCode",width:150},{title:"方案名称",dataIndex:"planName",key:"planName"},{title:"优先级",dataIndex:"priority",key:"priority",width:80},{title:"默认",key:"isDefault",width:80},{title:"操作",key:"action",width:120}],me=k([{id:"p1",code:"IQC-001",name:"来料标准检验方案"},{id:"p2",code:"IQC-002",name:"来料加严检验方案"},{id:"p3",code:"FQC-001",name:"成品标准检验方案"},{id:"p4",code:"OQC-001",name:"出货抽样检验方案"}]),L=k(!1),ve=k(),V=k("IQC"),M=k(!1),b=K({id:null,planId:void 0,priority:1,isDefault:!1}),qe={planId:[{required:!0,message:"请选择检验方案",trigger:"change"}]},De=j(()=>{const s={IQC:"IQC来料检验",FQC:"FQC成品检验",OQC:"OQC出货检验"};return`${M.value?"编辑":"新增"}${s[V.value]}方案绑定`}),ae=s=>{V.value=s,M.value=!1,Object.assign(b,{id:null,planId:void 0,priority:1,isDefault:!1}),L.value=!0},te=(s,e)=>{V.value=s,M.value=!0,Object.assign(b,{...e}),L.value=!0},le=(s,e)=>{ce.confirm({title:"确认删除",content:`确定删除与 ${e.planName} 的绑定吗？`,okType:"danger",onOk(){s==="IQC"?q.value=q.value.filter(n=>n.id!==e.id):s==="FQC"?D.value=D.value.filter(n=>n.id!==e.id):Q.value=Q.value.filter(n=>n.id!==e.id),F.success("删除成功")}})},Qe=()=>{var s;(s=ve.value)==null||s.validate().then(()=>{const e=me.value.find(I=>I.id===b.planId),n={...b,id:b.id||Date.now().toString(),planCode:e==null?void 0:e.code,planName:e==null?void 0:e.name},g=V.value==="IQC"?q:V.value==="FQC"?D:Q;if(n.isDefault&&g.value.forEach(I=>{I.isDefault=!1}),M.value){const I=g.value.findIndex(r=>r.id===n.id);I>-1&&Object.assign(g.value[I],n)}else g.value.push(n);F.success("保存成功"),L.value=!1})},x=k([]),h=k(!1),fe=k(),B=k(!1),Ue=[{title:"检验项目",dataIndex:"inspItemName",key:"inspItemName",width:150},{title:"数据类型",key:"dataType",width:100},{title:"目标值",dataIndex:"targetValue",key:"targetValue",width:80},{title:"上限",dataIndex:"upperLimit",key:"upperLimit",width:80},{title:"下限",dataIndex:"lowerLimit",key:"lowerLimit",width:80},{title:"单位",dataIndex:"uom",key:"uom",width:60},{title:"操作",key:"action",width:120}],f=K({id:null,inspItemName:"",dataType:"QUANTITATIVE",targetValue:void 0,upperLimit:void 0,lowerLimit:void 0,uom:"",qualitativeStandard:""}),Ae={inspItemName:[{required:!0,message:"请输入检验项目",trigger:"blur"}],dataType:[{required:!0,message:"请选择数据类型",trigger:"change"}]},Pe=()=>{B.value=!1,Object.assign(f,{id:null,inspItemName:"",dataType:"QUANTITATIVE",targetValue:void 0,upperLimit:void 0,lowerLimit:void 0,uom:"",qualitativeStandard:""}),h.value=!0},Le=s=>{B.value=!0,Object.assign(f,{...s}),h.value=!0},Ve=s=>{ce.confirm({title:"确认删除",content:`确定删除检验规格 ${s.inspItemName} 吗？`,okType:"danger",onOk(){x.value=x.value.filter(e=>e.id!==s.id),F.success("删除成功")}})},he=()=>{var s;(s=fe.value)==null||s.validate().then(()=>{if(B.value){const e=x.value.findIndex(n=>n.id===f.id);e>-1&&Object.assign(x.value[e],{...f})}else x.value.push({...f,id:Date.now().toString()});F.success("保存成功"),h.value=!1})},ze=()=>{F.success("导出任务已开始")},Oe=()=>{H.push("/basic-data/material")},Re=async()=>{var s;try{Y.value=!0,await((s=oe.value)==null?void 0:s.validate()),F.success("保存成功"),H.push("/basic-data/material")}catch{F.error("请完善必填项")}finally{Y.value=!1}},Ee=()=>{const s=J.params.id;if(s){const n={1:{id:"1",code:"M001",name:"铝锭",spec:"ADC12",category:"Raw",unit:"kg",source:"Buy",status:"Active",nationalCode:"GB/T 8733",shelfLifeDays:365,grossWeight:25.5,netWeight:25,dimensions:"200x100x50",remark:""},2:{id:"2",code:"P001",name:"发动机壳体",spec:"V1.0",category:"Semi",unit:"pcs",source:"Make",status:"Active",nationalCode:"",shelfLifeDays:void 0,grossWeight:3.2,netWeight:2.8,dimensions:"350x250x150",remark:""},3:{id:"3",code:"F001",name:"电动车电机",spec:"500W",category:"Finish",unit:"set",source:"Make",status:"Active",nationalCode:"GB/T 18488",shelfLifeDays:730,grossWeight:5.5,netWeight:5,dimensions:"180x180x220",remark:""}}[s];n&&Object.assign(u,n),We(s),$e(s),Me(s)}},We=s=>{W.value=!0,setTimeout(()=>{const e={1:[{id:"r1",code:"PR-ALU-001",name:"铝锭标准工艺",version:"V1.0",status:"Active",stepCount:3,steps:[{id:"s1",opSeq:10,opName:"熔炼",workCenter:"WC-01",description:"铝液熔炼",hasFirstInsp:!0,hasPatrolInsp:!0,hasFinalInsp:!1},{id:"s2",opSeq:20,opName:"浇铸",workCenter:"WC-02",description:"连续浇铸",hasFirstInsp:!1,hasPatrolInsp:!0,hasFinalInsp:!1},{id:"s3",opSeq:30,opName:"冷却切割",workCenter:"WC-03",description:"冷却定型切割",hasFirstInsp:!1,hasPatrolInsp:!1,hasFinalInsp:!0}]}],2:[{id:"r2",code:"PR-SHELL-001",name:"壳体加工工艺",version:"V1.0",status:"Active",stepCount:4,steps:[{id:"s4",opSeq:10,opName:"压铸",workCenter:"WC-10",description:"高压压铸",hasFirstInsp:!0,hasPatrolInsp:!0,hasFinalInsp:!1},{id:"s5",opSeq:20,opName:"去毛刺",workCenter:"WC-11",description:"人工去毛刺",hasFirstInsp:!1,hasPatrolInsp:!1,hasFinalInsp:!1},{id:"s6",opSeq:30,opName:"机加工",workCenter:"WC-12",description:"CNC加工",hasFirstInsp:!0,hasPatrolInsp:!0,hasFinalInsp:!1},{id:"s7",opSeq:40,opName:"抛光",workCenter:"WC-13",description:"表面抛光",hasFirstInsp:!1,hasPatrolInsp:!1,hasFinalInsp:!0}]}],3:[]};$.value=e[s]||[],W.value=!1},300)},$e=s=>{const n={1:{iqc:[{id:"b1",planId:"p1",planCode:"IQC-001",planName:"来料标准检验方案",priority:1,isDefault:!0}],fqc:[],oqc:[]},2:{iqc:[],fqc:[{id:"b2",planId:"p3",planCode:"FQC-001",planName:"成品标准检验方案",priority:1,isDefault:!0}],oqc:[]},3:{iqc:[],fqc:[{id:"b3",planId:"p3",planCode:"FQC-001",planName:"成品标准检验方案",priority:1,isDefault:!0}],oqc:[{id:"b4",planId:"p4",planCode:"OQC-001",planName:"出货抽样检验方案",priority:1,isDefault:!0}]}}[s]||{iqc:[],fqc:[],oqc:[]};q.value=n.iqc,D.value=n.fqc,Q.value=n.oqc},Me=s=>{const e={1:[{id:"sp1",inspItemName:"化学成分-Si",dataType:"QUANTITATIVE",targetValue:11,upperLimit:13,lowerLimit:9,uom:"%"},{id:"sp2",inspItemName:"化学成分-Fe",dataType:"QUANTITATIVE",targetValue:1.2,upperLimit:1.5,lowerLimit:0,uom:"%"}],2:[{id:"sp3",inspItemName:"外观",dataType:"QUALITATIVE",qualitativeStandard:"无裂纹、无气孔"},{id:"sp4",inspItemName:"尺寸A",dataType:"QUANTITATIVE",targetValue:100,upperLimit:100.5,lowerLimit:99.5,uom:"mm"}],3:[]};x.value=e[s]||[]};return Xe(()=>{Ee()}),(s,e)=>{const n=c("a-button"),g=c("a-tag"),I=c("a-input"),r=c("a-form-item"),y=c("a-col"),N=c("a-row"),w=c("a-select-option"),z=c("a-select"),S=c("a-input-number"),ye=c("a-textarea"),se=c("a-form"),O=c("a-card"),U=c("a-space"),A=c("a-table"),R=c("a-empty"),ne=c("a-tab-pane"),Be=c("a-tabs"),je=c("a-switch"),ke=c("a-modal");return o(),_("div",aa,[G("div",ta,[G("div",la,[a(n,{type:"text",onClick:Oe,class:"back-button"},{icon:t(()=>[a(E(He))]),default:t(()=>[e[30]||(e[30]=i(" 返回 ",-1))]),_:1}),G("div",sa,[G("h2",na,P(ge.value),1),u.category?(o(),m(g,{key:0,color:Ce(u.category)},{default:t(()=>[i(P(be(u.category)),1)]),_:1},8,["color"])):d("",!0),a(g,{color:"green"},{default:t(()=>[...e[31]||(e[31]=[i("启用",-1)])]),_:1})])]),p.value?d("",!0):(o(),_("div",ia,[a(n,{type:"primary",onClick:Re,loading:Y.value},{default:t(()=>[...e[32]||(e[32]=[i("保存",-1)])]),_:1},8,["loading"])]))]),a(O,{class:"form-card",title:"基本信息"},{default:t(()=>[a(se,{ref_key:"formRef",ref:oe,model:u,rules:Ie,layout:"horizontal","label-col":{span:6},"wrapper-col":{span:16}},{default:t(()=>[a(N,{gutter:24},{default:t(()=>[a(y,{span:8},{default:t(()=>[a(r,{label:"物料编码",name:"code"},{default:t(()=>[a(I,{value:u.code,"onUpdate:value":e[0]||(e[0]=l=>u.code=l),disabled:p.value||de.value,placeholder:"请输入"},null,8,["value","disabled"])]),_:1})]),_:1}),a(y,{span:8},{default:t(()=>[a(r,{label:"物料名称",name:"name"},{default:t(()=>[a(I,{value:u.name,"onUpdate:value":e[1]||(e[1]=l=>u.name=l),disabled:p.value,placeholder:"请输入"},null,8,["value","disabled"])]),_:1})]),_:1}),a(y,{span:8},{default:t(()=>[a(r,{label:"规格型号",name:"spec"},{default:t(()=>[a(I,{value:u.spec,"onUpdate:value":e[2]||(e[2]=l=>u.spec=l),disabled:p.value,placeholder:"请输入"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1}),a(N,{gutter:24},{default:t(()=>[a(y,{span:8},{default:t(()=>[a(r,{label:"物料分类",name:"category"},{default:t(()=>[a(z,{value:u.category,"onUpdate:value":e[3]||(e[3]=l=>u.category=l),disabled:p.value,placeholder:"请选择"},{default:t(()=>[a(w,{value:"Raw"},{default:t(()=>[...e[33]||(e[33]=[i("原材料",-1)])]),_:1}),a(w,{value:"Semi"},{default:t(()=>[...e[34]||(e[34]=[i("半成品",-1)])]),_:1}),a(w,{value:"Finish"},{default:t(()=>[...e[35]||(e[35]=[i("成品",-1)])]),_:1})]),_:1},8,["value","disabled"])]),_:1})]),_:1}),a(y,{span:8},{default:t(()=>[a(r,{label:"单位",name:"unit"},{default:t(()=>[a(I,{value:u.unit,"onUpdate:value":e[4]||(e[4]=l=>u.unit=l),disabled:p.value,placeholder:"请输入"},null,8,["value","disabled"])]),_:1})]),_:1}),a(y,{span:8},{default:t(()=>[a(r,{label:"来源",name:"source"},{default:t(()=>[a(z,{value:u.source,"onUpdate:value":e[5]||(e[5]=l=>u.source=l),disabled:p.value,placeholder:"请选择"},{default:t(()=>[a(w,{value:"Buy"},{default:t(()=>[...e[36]||(e[36]=[i("采购",-1)])]),_:1}),a(w,{value:"Make"},{default:t(()=>[...e[37]||(e[37]=[i("自制",-1)])]),_:1})]),_:1},8,["value","disabled"])]),_:1})]),_:1})]),_:1}),a(N,{gutter:24},{default:t(()=>[a(y,{span:8},{default:t(()=>[a(r,{label:"状态",name:"status"},{default:t(()=>[a(z,{value:u.status,"onUpdate:value":e[6]||(e[6]=l=>u.status=l),disabled:p.value,placeholder:"请选择"},{default:t(()=>[a(w,{value:"Active"},{default:t(()=>[...e[38]||(e[38]=[i("启用",-1)])]),_:1}),a(w,{value:"Inactive"},{default:t(()=>[...e[39]||(e[39]=[i("停用",-1)])]),_:1}),a(w,{value:"Obsolete"},{default:t(()=>[...e[40]||(e[40]=[i("废弃",-1)])]),_:1})]),_:1},8,["value","disabled"])]),_:1})]),_:1}),a(y,{span:8},{default:t(()=>[a(r,{label:"国标码",name:"nationalCode"},{default:t(()=>[a(I,{value:u.nationalCode,"onUpdate:value":e[7]||(e[7]=l=>u.nationalCode=l),disabled:p.value,placeholder:"如: GB/T XXX"},null,8,["value","disabled"])]),_:1})]),_:1}),a(y,{span:8},{default:t(()=>[a(r,{label:"保质期(天)",name:"shelfLifeDays"},{default:t(()=>[a(S,{value:u.shelfLifeDays,"onUpdate:value":e[8]||(e[8]=l=>u.shelfLifeDays=l),disabled:p.value,min:0,style:{width:"100%"},placeholder:"输入天数"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1}),a(N,{gutter:24},{default:t(()=>[a(y,{span:8},{default:t(()=>[a(r,{label:"毛重(kg)",name:"grossWeight"},{default:t(()=>[a(S,{value:u.grossWeight,"onUpdate:value":e[9]||(e[9]=l=>u.grossWeight=l),disabled:p.value,min:0,precision:3,style:{width:"100%"}},null,8,["value","disabled"])]),_:1})]),_:1}),a(y,{span:8},{default:t(()=>[a(r,{label:"净重(kg)",name:"netWeight"},{default:t(()=>[a(S,{value:u.netWeight,"onUpdate:value":e[10]||(e[10]=l=>u.netWeight=l),disabled:p.value,min:0,precision:3,style:{width:"100%"}},null,8,["value","disabled"])]),_:1})]),_:1}),a(y,{span:8},{default:t(()=>[a(r,{label:"尺寸(mm)",name:"dimensions"},{default:t(()=>[a(I,{value:u.dimensions,"onUpdate:value":e[11]||(e[11]=l=>u.dimensions=l),disabled:p.value,placeholder:"如: 100x50x30"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1}),a(N,{gutter:24},{default:t(()=>[a(y,{span:16},{default:t(()=>[a(r,{label:"备注",name:"remark","label-col":{span:3},"wrapper-col":{span:20}},{default:t(()=>[a(ye,{value:u.remark,"onUpdate:value":e[12]||(e[12]=l=>u.remark=l),disabled:p.value,rows:2,placeholder:"请输入备注"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(O,{class:"tab-card"},{default:t(()=>[a(Be,{activeKey:ue.value,"onUpdate:activeKey":e[16]||(e[16]=l=>ue.value=l)},{default:t(()=>[a(ne,{key:"routes",tab:"工艺路线"},{default:t(()=>[a(A,{columns:_e,"data-source":$.value,loading:W.value,"row-key":"id",size:"middle",pagination:!1},{bodyCell:t(({column:l,record:v})=>[l.key==="status"?(o(),m(g,{key:0,color:Te(v.status)},{default:t(()=>[i(P(xe(v.status)),1)]),_:2},1032,["color"])):d("",!0),l.key==="action"?(o(),m(n,{key:1,type:"link",size:"small",onClick:C=>Ne(v)},{default:t(()=>[...e[41]||(e[41]=[i("查看详情",-1)])]),_:1},8,["onClick"])):d("",!0)]),expandedRowRender:t(({record:l})=>[a(A,{columns:we,"data-source":l.steps,pagination:!1,size:"small"},{bodyCell:t(({column:v,record:C})=>[v.key==="inspConfig"?(o(),m(U,{key:0},{default:t(()=>[C.hasFirstInsp?(o(),m(g,{key:0,color:"blue",size:"small"},{default:t(()=>[...e[42]||(e[42]=[i("首检",-1)])]),_:1})):d("",!0),C.hasPatrolInsp?(o(),m(g,{key:1,color:"green",size:"small"},{default:t(()=>[...e[43]||(e[43]=[i("巡检",-1)])]),_:1})):d("",!0),C.hasFinalInsp?(o(),m(g,{key:2,color:"orange",size:"small"},{default:t(()=>[...e[44]||(e[44]=[i("末检",-1)])]),_:1})):d("",!0),p.value?d("",!0):(o(),m(n,{key:3,type:"link",size:"small",onClick:ra=>Se(l,C)},{default:t(()=>[...e[45]||(e[45]=[i("配置",-1)])]),_:1},8,["onClick"]))]),_:2},1024)):d("",!0)]),_:2},1032,["data-source"])]),_:1},8,["data-source","loading"]),$.value.length===0&&!W.value?(o(),m(R,{key:0,description:"暂无关联的工艺路线"})):d("",!0)]),_:1}),a(ne,{key:"inspConfig",tab:"检验配置"},{default:t(()=>[a(O,{size:"small",title:"IQC 来料检验",class:"insp-section"},ie({default:t(()=>[a(A,{columns:ee,"data-source":q.value,"row-key":"id",size:"small",pagination:!1},{bodyCell:t(({column:l,record:v})=>[l.key==="isDefault"?(o(),_(T,{key:0},[v.isDefault?(o(),m(g,{key:0,color:"gold"},{default:t(()=>[...e[47]||(e[47]=[i("默认",-1)])]),_:1})):d("",!0)],64)):d("",!0),l.key==="action"?(o(),_(T,{key:1},[p.value?d("",!0):(o(),m(U,{key:0},{default:t(()=>[a(n,{type:"link",size:"small",onClick:C=>te("IQC",v)},{default:t(()=>[...e[48]||(e[48]=[i("编辑",-1)])]),_:1},8,["onClick"]),a(n,{type:"link",danger:"",size:"small",onClick:C=>le("IQC",v)},{default:t(()=>[...e[49]||(e[49]=[i("删除",-1)])]),_:1},8,["onClick"])]),_:2},1024))],64)):d("",!0)]),_:1},8,["data-source"]),q.value.length===0?(o(),m(R,{key:0,description:"暂无绑定"})):d("",!0)]),_:2},[p.value?void 0:{name:"extra",fn:t(()=>[a(n,{type:"primary",size:"small",ghost:"",onClick:e[13]||(e[13]=l=>ae("IQC"))},{default:t(()=>[a(E(X)),e[46]||(e[46]=i(" 新增绑定 ",-1))]),_:1})]),key:"0"}]),1024),a(O,{size:"small",title:"FQC 成品检验",class:"insp-section"},ie({default:t(()=>[a(A,{columns:ee,"data-source":D.value,"row-key":"id",size:"small",pagination:!1},{bodyCell:t(({column:l,record:v})=>[l.key==="isDefault"?(o(),_(T,{key:0},[v.isDefault?(o(),m(g,{key:0,color:"gold"},{default:t(()=>[...e[51]||(e[51]=[i("默认",-1)])]),_:1})):d("",!0)],64)):d("",!0),l.key==="action"?(o(),_(T,{key:1},[p.value?d("",!0):(o(),m(U,{key:0},{default:t(()=>[a(n,{type:"link",size:"small",onClick:C=>te("FQC",v)},{default:t(()=>[...e[52]||(e[52]=[i("编辑",-1)])]),_:1},8,["onClick"]),a(n,{type:"link",danger:"",size:"small",onClick:C=>le("FQC",v)},{default:t(()=>[...e[53]||(e[53]=[i("删除",-1)])]),_:1},8,["onClick"])]),_:2},1024))],64)):d("",!0)]),_:1},8,["data-source"]),D.value.length===0?(o(),m(R,{key:0,description:"暂无绑定"})):d("",!0)]),_:2},[p.value?void 0:{name:"extra",fn:t(()=>[a(n,{type:"primary",size:"small",ghost:"",onClick:e[14]||(e[14]=l=>ae("FQC"))},{default:t(()=>[a(E(X)),e[50]||(e[50]=i(" 新增绑定 ",-1))]),_:1})]),key:"0"}]),1024),a(O,{size:"small",title:"OQC 出货检验",class:"insp-section"},ie({default:t(()=>[a(A,{columns:ee,"data-source":Q.value,"row-key":"id",size:"small",pagination:!1},{bodyCell:t(({column:l,record:v})=>[l.key==="isDefault"?(o(),_(T,{key:0},[v.isDefault?(o(),m(g,{key:0,color:"gold"},{default:t(()=>[...e[55]||(e[55]=[i("默认",-1)])]),_:1})):d("",!0)],64)):d("",!0),l.key==="action"?(o(),_(T,{key:1},[p.value?d("",!0):(o(),m(U,{key:0},{default:t(()=>[a(n,{type:"link",size:"small",onClick:C=>te("OQC",v)},{default:t(()=>[...e[56]||(e[56]=[i("编辑",-1)])]),_:1},8,["onClick"]),a(n,{type:"link",danger:"",size:"small",onClick:C=>le("OQC",v)},{default:t(()=>[...e[57]||(e[57]=[i("删除",-1)])]),_:1},8,["onClick"])]),_:2},1024))],64)):d("",!0)]),_:1},8,["data-source"]),Q.value.length===0?(o(),m(R,{key:0,description:"暂无绑定"})):d("",!0)]),_:2},[p.value?void 0:{name:"extra",fn:t(()=>[a(n,{type:"primary",size:"small",ghost:"",onClick:e[15]||(e[15]=l=>ae("OQC"))},{default:t(()=>[a(E(X)),e[54]||(e[54]=i(" 新增绑定 ",-1))]),_:1})]),key:"0"}]),1024)]),_:1}),a(ne,{key:"specs",tab:"检验规格"},{default:t(()=>[p.value?d("",!0):(o(),_("div",oa,[a(U,null,{default:t(()=>[a(n,{type:"primary",size:"small",onClick:Pe},{default:t(()=>[a(E(X)),e[58]||(e[58]=i(" 新增规格 ",-1))]),_:1}),a(n,{size:"small",onClick:ze},{default:t(()=>[...e[59]||(e[59]=[i("导出",-1)])]),_:1})]),_:1})])),a(A,{columns:Ue,"data-source":x.value,"row-key":"id",size:"small",pagination:!1},{bodyCell:t(({column:l,record:v})=>[l.key==="dataType"?(o(),m(g,{key:0,color:v.dataType==="QUANTITATIVE"?"blue":"purple"},{default:t(()=>[i(P(v.dataType==="QUANTITATIVE"?"计量型":"计数型"),1)]),_:2},1032,["color"])):d("",!0),l.key==="action"?(o(),_(T,{key:1},[p.value?d("",!0):(o(),m(U,{key:0},{default:t(()=>[a(n,{type:"link",size:"small",onClick:C=>Le(v)},{default:t(()=>[...e[60]||(e[60]=[i("编辑",-1)])]),_:1},8,["onClick"]),a(n,{type:"link",danger:"",size:"small",onClick:C=>Ve(v)},{default:t(()=>[...e[61]||(e[61]=[i("删除",-1)])]),_:1},8,["onClick"])]),_:2},1024))],64)):d("",!0)]),_:1},8,["data-source"]),x.value.length===0?(o(),m(R,{key:1,description:"暂无检验规格"})):d("",!0)]),_:1})]),_:1},8,["activeKey"])]),_:1}),a(Ze,{visible:Z.value,"onUpdate:visible":e[17]||(e[17]=l=>Z.value=l),operationInfo:pe,onSave:Fe},null,8,["visible","operationInfo"]),a(ke,{visible:L.value,"onUpdate:visible":e[21]||(e[21]=l=>L.value=l),title:De.value,width:"500px",onOk:Qe},{default:t(()=>[a(se,{ref_key:"inspPlanFormRef",ref:ve,model:b,rules:qe,layout:"vertical"},{default:t(()=>[a(r,{label:"检验方案",name:"planId"},{default:t(()=>[a(z,{value:b.planId,"onUpdate:value":e[18]||(e[18]=l=>b.planId=l),placeholder:"请选择检验方案","show-search":""},{default:t(()=>[(o(!0),_(T,null,Je(me.value,l=>(o(),m(w,{key:l.id,value:l.id},{default:t(()=>[i(P(l.code)+" - "+P(l.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),a(r,{label:"优先级",name:"priority"},{default:t(()=>[a(S,{value:b.priority,"onUpdate:value":e[19]||(e[19]=l=>b.priority=l),min:1,max:99,style:{width:"100%"}},null,8,["value"])]),_:1}),a(r,{label:"设为默认"},{default:t(()=>[a(je,{checked:b.isDefault,"onUpdate:checked":e[20]||(e[20]=l=>b.isDefault=l)},null,8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"]),a(ke,{visible:h.value,"onUpdate:visible":e[29]||(e[29]=l=>h.value=l),title:B.value?"编辑检验规格":"新增检验规格",width:"600px",onOk:he},{default:t(()=>[a(se,{ref_key:"specFormRef",ref:fe,model:f,rules:Ae,layout:"vertical"},{default:t(()=>[a(N,{gutter:16},{default:t(()=>[a(y,{span:12},{default:t(()=>[a(r,{label:"检验项目",name:"inspItemName"},{default:t(()=>[a(I,{value:f.inspItemName,"onUpdate:value":e[22]||(e[22]=l=>f.inspItemName=l),placeholder:"请输入"},null,8,["value"])]),_:1})]),_:1}),a(y,{span:12},{default:t(()=>[a(r,{label:"数据类型",name:"dataType"},{default:t(()=>[a(z,{value:f.dataType,"onUpdate:value":e[23]||(e[23]=l=>f.dataType=l),placeholder:"请选择"},{default:t(()=>[a(w,{value:"QUANTITATIVE"},{default:t(()=>[...e[62]||(e[62]=[i("计量型",-1)])]),_:1}),a(w,{value:"QUALITATIVE"},{default:t(()=>[...e[63]||(e[63]=[i("计数型",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),f.dataType==="QUANTITATIVE"?(o(),_(T,{key:0},[a(N,{gutter:16},{default:t(()=>[a(y,{span:8},{default:t(()=>[a(r,{label:"目标值"},{default:t(()=>[a(S,{value:f.targetValue,"onUpdate:value":e[24]||(e[24]=l=>f.targetValue=l),style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),a(y,{span:8},{default:t(()=>[a(r,{label:"上限"},{default:t(()=>[a(S,{value:f.upperLimit,"onUpdate:value":e[25]||(e[25]=l=>f.upperLimit=l),style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),a(y,{span:8},{default:t(()=>[a(r,{label:"下限"},{default:t(()=>[a(S,{value:f.lowerLimit,"onUpdate:value":e[26]||(e[26]=l=>f.lowerLimit=l),style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(N,{gutter:16},{default:t(()=>[a(y,{span:8},{default:t(()=>[a(r,{label:"单位"},{default:t(()=>[a(I,{value:f.uom,"onUpdate:value":e[27]||(e[27]=l=>f.uom=l),placeholder:"如: mm"},null,8,["value"])]),_:1})]),_:1})]),_:1})],64)):(o(),m(r,{key:1,label:"合格标准"},{default:t(()=>[a(ye,{value:f.qualitativeStandard,"onUpdate:value":e[28]||(e[28]=l=>f.qualitativeStandard=l),rows:2,placeholder:"请描述合格标准"},null,8,["value"])]),_:1}))]),_:1},8,["model"])]),_:1},8,["visible","title"])])}}}),fa=ea(ua,[["__scopeId","data-v-50bc33d4"]]);export{fa as default};
