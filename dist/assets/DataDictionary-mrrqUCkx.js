import{d as Ve,r,a as Z,m as Le,c as De,e as N,x as t,q as a,s as n,o as y,h as s,y as q,P as ee,S as Ne,p as k,f as b,t as v,C as O,J as te}from"./index-BhbkSrG8.js";import{E as Ue}from"./ExportOutlined-iuxpVXnR.js";import{_ as Se}from"./_plugin-vue_export-helper-DlAUqK2U.js";const he={class:"data-dictionary"},qe={class:"page-header"},ze={class:"search-section"},Re={class:"items-header"},Ee=Ve({__name:"DataDictionary",setup($e){const z=r(""),R=r(),E=r(),$=r(!1),x=r(!1),B=r(!1),I=r(!1),U=r(!1),M=r(),m=r({}),S=r({}),F=r([]),V=Z({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:l=>`共 ${l} 条记录`}),ae=[{title:"字典ID",dataIndex:"id",key:"id",width:80},{title:"字典名称",dataIndex:"dictName",key:"dictName",width:150},{title:"字典编码",dataIndex:"dictCode",key:"dictCode",width:150},{title:"字典类型",dataIndex:"dictType",key:"dictType",width:100},{title:"状态",dataIndex:"status",key:"status",width:80},{title:"排序",dataIndex:"sortOrder",key:"sortOrder",width:80},{title:"描述",dataIndex:"description",key:"description",ellipsis:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",width:150},{title:"操作",key:"action",width:200,fixed:"right"}],le=[{title:"项目标签",dataIndex:"itemLabel",key:"itemLabel"},{title:"项目值",dataIndex:"itemValue",key:"itemValue"},{title:"状态",dataIndex:"status",key:"status",width:80},{title:"排序",dataIndex:"sortOrder",key:"sortOrder",width:100},{title:"备注",dataIndex:"remark",key:"remark"},{title:"操作",key:"action",width:80}],d=Z({dictName:"",dictCode:"",dictType:"",description:"",status:"active",sortOrder:0}),C=r([]),ie={dictName:[{required:!0,message:"请输入字典名称",trigger:"blur"}],dictCode:[{required:!0,message:"请输入字典编码",trigger:"blur"}],dictType:[{required:!0,message:"请选择字典类型",trigger:"change"}]},p=r([{id:4001,dictName:"检验结果",dictCode:"inspection_result",dictType:"quality",status:"active",description:"来料检验结果分类",sortOrder:1,createTime:"2024-01-10 10:00:00",updateTime:"2024-01-15 14:30:00",items:[{itemLabel:"合格",itemValue:"qualified",status:"active",sortOrder:1,remark:"检验合格"},{itemLabel:"不合格",itemValue:"unqualified",status:"active",sortOrder:2,remark:"检验不合格"},{itemLabel:"待定",itemValue:"pending",status:"active",sortOrder:3,remark:"需要进一步确认"}]},{id:4002,dictName:"物料类型",dictCode:"material_type",dictType:"business",status:"active",description:"物料分类类型",sortOrder:2,createTime:"2024-01-08 14:20:00",updateTime:"2024-01-14 09:15:00",items:[{itemLabel:"原材料",itemValue:"raw_material",status:"active",sortOrder:1,remark:"生产用原材料"},{itemLabel:"辅料",itemValue:"auxiliary_material",status:"active",sortOrder:2,remark:"辅助材料"},{itemLabel:"包装材料",itemValue:"packaging_material",status:"active",sortOrder:3,remark:"包装用材料"}]},{id:4003,dictName:"用户状态",dictCode:"user_status",dictType:"system",status:"active",description:"系统用户状态",sortOrder:3,createTime:"2024-01-05 16:45:00",updateTime:"2024-01-12 11:20:00",items:[{itemLabel:"正常",itemValue:"normal",status:"active",sortOrder:1,remark:"用户状态正常"},{itemLabel:"禁用",itemValue:"disabled",status:"active",sortOrder:2,remark:"用户被禁用"},{itemLabel:"锁定",itemValue:"locked",status:"active",sortOrder:3,remark:"用户被锁定"}]},{id:4004,dictName:"紧急程度",dictCode:"urgency_level",dictType:"quality",status:"inactive",description:"检验紧急程度分类",sortOrder:4,createTime:"2024-01-03 10:30:00",updateTime:"2024-01-10 15:45:00",items:[{itemLabel:"紧急",itemValue:"urgent",status:"active",sortOrder:1,remark:"紧急处理"},{itemLabel:"一般",itemValue:"normal",status:"active",sortOrder:2,remark:"正常处理"},{itemLabel:"缓急",itemValue:"low",status:"active",sortOrder:3,remark:"可以延后处理"}]}]),P=()=>{V.current=1,L()},se=()=>{z.value="",R.value=void 0,E.value=void 0,P()},ne=l=>{V.current=l.current,V.pageSize=l.pageSize,L()},de=l=>{const e=l.items||[];return te("div",[te("a-table",{columns:[{title:"项目标签",dataIndex:"itemLabel",key:"itemLabel"},{title:"项目值",dataIndex:"itemValue",key:"itemValue"},{title:"状态",dataIndex:"status",key:"status",customRender:({text:o})=>o==="active"?"启用":"禁用"},{title:"排序",dataIndex:"sortOrder",key:"sortOrder"},{title:"备注",dataIndex:"remark",key:"remark"}],dataSource:e,pagination:!1,size:"small"})])},ue=l=>{F.value=l},oe=()=>{U.value=!1,J(),x.value=!0},re=l=>{U.value=!0,Object.assign(d,l),x.value=!0},me=l=>{m.value={...l,itemCount:(l.items||[]).length},B.value=!0},pe=l=>{S.value=l,C.value=[...l.items||[]],I.value=!0},ce=l=>{const e=p.value.findIndex(o=>o.id===l);e>-1&&(p.value.splice(e,1),O.success("删除成功"),L())},ve=l=>{const e=p.value.findIndex(o=>o.id===l.id);e>-1&&(p.value[e].status=l.status==="active"?"inactive":"active",O.success("状态更新成功"))},fe=async()=>{try{if(await M.value.validate(),U.value){const l=p.value.findIndex(e=>e.id===d.id);l>-1&&(p.value[l]={...d,updateTime:new Date().toLocaleString()},O.success("更新成功"))}else{const l={...d,id:Date.now(),createTime:new Date().toLocaleString(),updateTime:new Date().toLocaleString(),items:[]};p.value.unshift(l),O.success("创建成功")}x.value=!1,L()}catch(l){console.error("表单验证失败:",l)}},ye=()=>{x.value=!1,J()},_e=()=>{C.value.push({itemLabel:"",itemValue:"",status:"active",sortOrder:C.value.length+1,remark:""})},ke=l=>{C.value.splice(l,1)},be=()=>{const l=p.value.findIndex(e=>e.id===S.value.id);l>-1&&(p.value[l].items=[...C.value],p.value[l].updateTime=new Date().toLocaleString(),O.success("字典项保存成功")),I.value=!1},ge=()=>{I.value=!1},xe=()=>{O.info("导出功能开发中...")},L=()=>{$.value=!0,setTimeout(()=>{V.total=p.value.length,$.value=!1},500)},J=()=>{var l;Object.assign(d,{dictName:"",dictCode:"",dictType:"",description:"",status:"active",sortOrder:0}),(l=M.value)==null||l.resetFields()},K=l=>({system:"red",business:"blue",quality:"green",user:"purple"})[l]||"default",Q=l=>({system:"系统字典",business:"业务字典",quality:"质量字典",user:"用户字典"})[l]||l;return Le(()=>{L()}),(l,e)=>{const o=n("a-button"),G=n("a-space"),D=n("a-input"),_=n("a-col"),c=n("a-select-option"),h=n("a-select"),j=n("a-row"),H=n("a-tag"),W=n("a-switch"),Ce=n("a-popconfirm"),X=n("a-table"),w=n("a-form-item"),we=n("a-textarea"),Y=n("a-input-number"),Te=n("a-form"),A=n("a-modal"),f=n("a-descriptions-item"),Oe=n("a-badge"),Ie=n("a-descriptions");return y(),De("div",he,[N("div",qe,[e[14]||(e[14]=N("h2",null,"数据字典管理",-1)),t(G,null,{default:a(()=>[t(o,{type:"primary",onClick:oe},{icon:a(()=>[t(q(ee))]),default:a(()=>[e[12]||(e[12]=s(" 新建字典 ",-1))]),_:1}),t(o,{onClick:xe},{icon:a(()=>[t(q(Ue))]),default:a(()=>[e[13]||(e[13]=s(" 导出字典 ",-1))]),_:1})]),_:1})]),N("div",ze,[t(j,{gutter:16},{default:a(()=>[t(_,{span:5},{default:a(()=>[t(D,{value:z.value,"onUpdate:value":e[0]||(e[0]=i=>z.value=i),placeholder:"搜索字典名称/编码",onPressEnter:P},{prefix:a(()=>[t(q(Ne))]),_:1},8,["value"])]),_:1}),t(_,{span:4},{default:a(()=>[t(h,{value:R.value,"onUpdate:value":e[1]||(e[1]=i=>R.value=i),placeholder:"字典类型",allowClear:""},{default:a(()=>[t(c,{value:"system"},{default:a(()=>[...e[15]||(e[15]=[s("系统字典",-1)])]),_:1}),t(c,{value:"business"},{default:a(()=>[...e[16]||(e[16]=[s("业务字典",-1)])]),_:1}),t(c,{value:"quality"},{default:a(()=>[...e[17]||(e[17]=[s("质量字典",-1)])]),_:1}),t(c,{value:"user"},{default:a(()=>[...e[18]||(e[18]=[s("用户字典",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(_,{span:4},{default:a(()=>[t(h,{value:E.value,"onUpdate:value":e[2]||(e[2]=i=>E.value=i),placeholder:"状态",allowClear:""},{default:a(()=>[t(c,{value:"active"},{default:a(()=>[...e[19]||(e[19]=[s("启用",-1)])]),_:1}),t(c,{value:"inactive"},{default:a(()=>[...e[20]||(e[20]=[s("禁用",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(_,{span:5},{default:a(()=>[t(o,{type:"primary",onClick:P},{default:a(()=>[...e[21]||(e[21]=[s("查询",-1)])]),_:1}),t(o,{style:{"margin-left":"8px"},onClick:se},{default:a(()=>[...e[22]||(e[22]=[s("重置",-1)])]),_:1})]),_:1})]),_:1})]),t(X,{columns:ae,"data-source":p.value,pagination:V,loading:$.value,onChange:ne,"row-key":"id",expandable:{expandedRowRender:de,expandedRowKeys:F.value,onExpandedRowsChange:ue}},{bodyCell:a(({column:i,record:u})=>[i.key==="dictType"?(y(),k(H,{key:0,color:K(u.dictType)},{default:a(()=>[s(v(Q(u.dictType)),1)]),_:2},1032,["color"])):b("",!0),i.key==="status"?(y(),k(W,{key:1,checked:u.status==="active",onChange:T=>ve(u)},null,8,["checked","onChange"])):b("",!0),i.key==="action"?(y(),k(G,{key:2},{default:a(()=>[t(o,{type:"link",size:"small",onClick:T=>me(u)},{default:a(()=>[...e[23]||(e[23]=[s("查看",-1)])]),_:1},8,["onClick"]),t(o,{type:"link",size:"small",onClick:T=>re(u)},{default:a(()=>[...e[24]||(e[24]=[s("编辑",-1)])]),_:1},8,["onClick"]),t(o,{type:"link",size:"small",onClick:T=>pe(u)},{default:a(()=>[...e[25]||(e[25]=[s("管理项",-1)])]),_:1},8,["onClick"]),t(Ce,{title:"确定要删除这个字典吗？",onConfirm:T=>ce(u.id)},{default:a(()=>[t(o,{type:"link",size:"small",danger:""},{default:a(()=>[...e[26]||(e[26]=[s("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:2},1024)):b("",!0)]),_:1},8,["data-source","pagination","loading","expandable"]),t(A,{open:x.value,"onUpdate:open":e[9]||(e[9]=i=>x.value=i),title:U.value?"编辑字典":"新建字典",width:"700px",onOk:fe,onCancel:ye},{default:a(()=>[t(Te,{ref_key:"formRef",ref:M,model:d,rules:ie,layout:"vertical"},{default:a(()=>[t(j,{gutter:16},{default:a(()=>[t(_,{span:12},{default:a(()=>[t(w,{label:"字典名称",name:"dictName"},{default:a(()=>[t(D,{value:d.dictName,"onUpdate:value":e[3]||(e[3]=i=>d.dictName=i),placeholder:"请输入字典名称"},null,8,["value"])]),_:1})]),_:1}),t(_,{span:12},{default:a(()=>[t(w,{label:"字典编码",name:"dictCode"},{default:a(()=>[t(D,{value:d.dictCode,"onUpdate:value":e[4]||(e[4]=i=>d.dictCode=i),placeholder:"请输入字典编码"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(j,{gutter:16},{default:a(()=>[t(_,{span:12},{default:a(()=>[t(w,{label:"字典类型",name:"dictType"},{default:a(()=>[t(h,{value:d.dictType,"onUpdate:value":e[5]||(e[5]=i=>d.dictType=i),placeholder:"请选择字典类型"},{default:a(()=>[t(c,{value:"system"},{default:a(()=>[...e[27]||(e[27]=[s("系统字典",-1)])]),_:1}),t(c,{value:"business"},{default:a(()=>[...e[28]||(e[28]=[s("业务字典",-1)])]),_:1}),t(c,{value:"quality"},{default:a(()=>[...e[29]||(e[29]=[s("质量字典",-1)])]),_:1}),t(c,{value:"user"},{default:a(()=>[...e[30]||(e[30]=[s("用户字典",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),t(_,{span:12},{default:a(()=>[t(w,{label:"状态",name:"status"},{default:a(()=>[t(h,{value:d.status,"onUpdate:value":e[6]||(e[6]=i=>d.status=i),placeholder:"请选择状态"},{default:a(()=>[t(c,{value:"active"},{default:a(()=>[...e[31]||(e[31]=[s("启用",-1)])]),_:1}),t(c,{value:"inactive"},{default:a(()=>[...e[32]||(e[32]=[s("禁用",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t(w,{label:"字典描述",name:"description"},{default:a(()=>[t(we,{value:d.description,"onUpdate:value":e[7]||(e[7]=i=>d.description=i),rows:3,placeholder:"请输入字典描述"},null,8,["value"])]),_:1}),t(w,{label:"排序",name:"sortOrder"},{default:a(()=>[t(Y,{value:d.sortOrder,"onUpdate:value":e[8]||(e[8]=i=>d.sortOrder=i),min:0,style:{width:"100%"},placeholder:"排序号，数字越小越靠前"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"]),t(A,{open:B.value,"onUpdate:open":e[10]||(e[10]=i=>B.value=i),title:"字典详情",width:"800px",footer:null},{default:a(()=>[t(Ie,{column:2,bordered:""},{default:a(()=>[t(f,{label:"字典ID"},{default:a(()=>[s(v(m.value.id),1)]),_:1}),t(f,{label:"字典名称"},{default:a(()=>[s(v(m.value.dictName),1)]),_:1}),t(f,{label:"字典编码"},{default:a(()=>[s(v(m.value.dictCode),1)]),_:1}),t(f,{label:"字典类型"},{default:a(()=>[t(H,{color:K(m.value.dictType)},{default:a(()=>[s(v(Q(m.value.dictType)),1)]),_:1},8,["color"])]),_:1}),t(f,{label:"状态"},{default:a(()=>[t(Oe,{status:m.value.status==="active"?"success":"default",text:m.value.status==="active"?"启用":"禁用"},null,8,["status","text"])]),_:1}),t(f,{label:"排序"},{default:a(()=>[s(v(m.value.sortOrder),1)]),_:1}),t(f,{label:"创建时间"},{default:a(()=>[s(v(m.value.createTime),1)]),_:1}),t(f,{label:"更新时间"},{default:a(()=>[s(v(m.value.updateTime),1)]),_:1}),t(f,{label:"字典描述",span:2},{default:a(()=>[s(v(m.value.description),1)]),_:1}),t(f,{label:"字典项数量",span:2},{default:a(()=>[s(v(m.value.itemCount||0)+" 项",1)]),_:1})]),_:1})]),_:1},8,["open"]),t(A,{open:I.value,"onUpdate:open":e[11]||(e[11]=i=>I.value=i),title:"管理字典项",width:"900px",onOk:be,onCancel:ge},{default:a(()=>[N("div",Re,[N("h4",null,"字典："+v(S.value.dictName)+" ("+v(S.value.dictCode)+")",1),t(o,{type:"primary",onClick:_e},{icon:a(()=>[t(q(ee))]),default:a(()=>[e[33]||(e[33]=s(" 添加字典项 ",-1))]),_:1})]),t(X,{columns:le,"data-source":C.value,pagination:!1,size:"small"},{bodyCell:a(({column:i,record:u,index:T})=>[i.key==="itemLabel"?(y(),k(D,{key:0,value:u.itemLabel,"onUpdate:value":g=>u.itemLabel=g,placeholder:"项目标签"},null,8,["value","onUpdate:value"])):b("",!0),i.key==="itemValue"?(y(),k(D,{key:1,value:u.itemValue,"onUpdate:value":g=>u.itemValue=g,placeholder:"项目值"},null,8,["value","onUpdate:value"])):b("",!0),i.key==="status"?(y(),k(W,{key:2,checked:u.status==="active",onChange:g=>u.status=u.status==="active"?"inactive":"active"},null,8,["checked","onChange"])):b("",!0),i.key==="sortOrder"?(y(),k(Y,{key:3,value:u.sortOrder,"onUpdate:value":g=>u.sortOrder=g,min:0,size:"small"},null,8,["value","onUpdate:value"])):b("",!0),i.key==="action"?(y(),k(o,{key:4,type:"link",size:"small",danger:"",onClick:g=>ke(T)},{default:a(()=>[...e[34]||(e[34]=[s("删除",-1)])]),_:1},8,["onClick"])):b("",!0)]),_:1},8,["data-source"])]),_:1},8,["open"])])}}}),je=Se(Ee,[["__scopeId","data-v-4f51ded5"]]);export{je as default};
