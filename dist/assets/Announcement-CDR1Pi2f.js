import{d as fe,r,a as Q,m as ve,c as _e,e as w,x as e,q as a,s as o,o as T,h as s,y as G,P as ye,S as ge,p as q,f as O,t as d,C as H}from"./index-D0CfuKge.js";import{_ as be}from"./_plugin-vue_export-helper-DlAUqK2U.js";const xe={class:"system-announcement"},ke={class:"page-header"},he={class:"search-section"},we={style:{"white-space":"pre-wrap"}},Te=fe({__name:"Announcement",setup(Ce){const C=r(""),P=r(),U=r(),S=r(!1),v=r(!1),I=r(!1),b=r("新建公告"),z=r(),y=Q({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:l=>`共 ${l} 条记录`}),K=[{title:"公告标题",dataIndex:"title",key:"title",width:200},{title:"公告类型",dataIndex:"type",key:"type",width:100},{title:"优先级",dataIndex:"priority",key:"priority",width:80},{title:"状态",dataIndex:"status",key:"status",width:80},{title:"发布人",dataIndex:"publisher",key:"publisher",width:100},{title:"生效时间",dataIndex:"effectiveTime",key:"effectiveTime",width:150},{title:"失效时间",dataIndex:"expiryTime",key:"expiryTime",width:150},{title:"操作",key:"action",width:150,fixed:"right"}],i=Q({title:"",type:"",priority:"medium",content:"",effectiveTime:null,expiryTime:null,status:"draft",isPinned:!1}),L={title:[{required:!0,message:"请输入公告标题",trigger:"blur"}],type:[{required:!0,message:"请选择公告类型",trigger:"change"}],content:[{required:!0,message:"请输入公告内容",trigger:"blur"}],effectiveTime:[{required:!0,message:"请选择生效时间",trigger:"change"}],expiryTime:[{required:!0,message:"请选择失效时间",trigger:"change"}]},x=r([{id:1,title:"系统维护通知",type:"maintenance",priority:"high",status:"published",publisher:"系统管理员",effectiveTime:"2024-01-15 10:00:00",expiryTime:"2024-01-20 10:00:00",content:"系统将于本周六凌晨2点进行例行维护，预计持续2小时。",isPinned:!0},{id:2,title:"新功能上线公告",type:"update",priority:"medium",status:"published",publisher:"产品经理",effectiveTime:"2024-01-10 09:00:00",expiryTime:"2024-02-10 09:00:00",content:"质量管理模块新增统计分析功能，欢迎体验使用。",isPinned:!1}]),u=r({}),k=()=>{y.current=1,g()},W=()=>{C.value="",P.value=void 0,U.value=void 0,k()},X=l=>{y.current=l.current,y.pageSize=l.pageSize,g()},Y=()=>{b.value="新建公告",B(),v.value=!0},Z=l=>{b.value="编辑公告",Object.assign(i,l),v.value=!0},ee=l=>{u.value=l,I.value=!0},te=l=>{const t=x.value.findIndex(p=>p.id===l);t>-1&&(x.value.splice(t,1),H.success("删除成功"),g())},ae=async()=>{try{await z.value.validate(),H.success(b.value==="新建公告"?"创建成功":"更新成功"),v.value=!1,g()}catch(l){console.error("表单验证失败:",l)}},le=()=>{v.value=!1,B()},B=()=>{var l;Object.assign(i,{title:"",type:"",priority:"medium",content:"",effectiveTime:null,expiryTime:null,status:"draft",isPinned:!1}),(l=z.value)==null||l.resetFields()},g=()=>{S.value=!0,setTimeout(()=>{y.total=x.value.length,S.value=!1},500)},D=l=>({published:"green",draft:"orange",expired:"red"})[l]||"default",N=l=>({published:"已发布",draft:"草稿",expired:"已过期"})[l]||l,R=l=>({high:"red",medium:"orange",low:"blue"})[l]||"default",$=l=>({high:"高",medium:"中",low:"低"})[l]||l,ne=l=>({system:"系统公告",maintenance:"维护公告",update:"更新公告",security:"安全公告"})[l]||l;return ve(()=>{g()}),(l,t)=>{const p=o("a-button"),A=o("a-input"),_=o("a-col"),V=o("a-select"),oe=o("a-range-picker"),E=o("a-row"),h=o("a-tag"),ie=o("a-popconfirm"),se=o("a-space"),ue=o("a-table"),m=o("a-form-item"),re=o("a-textarea"),M=o("a-date-picker"),j=o("a-radio"),de=o("a-radio-group"),pe=o("a-switch"),me=o("a-form"),F=o("a-modal"),c=o("a-descriptions-item"),ce=o("a-descriptions");return T(),_e("div",xe,[w("div",ke,[t[14]||(t[14]=w("h2",null,"系统公告管理",-1)),e(p,{type:"primary",onClick:Y},{icon:a(()=>[e(G(ye))]),default:a(()=>[t[13]||(t[13]=s(" 新建公告 ",-1))]),_:1})]),w("div",he,[e(E,{gutter:16},{default:a(()=>[e(_,{span:6},{default:a(()=>[e(A,{value:C.value,"onUpdate:value":t[0]||(t[0]=n=>C.value=n),placeholder:"搜索公告标题",onPressEnter:k},{prefix:a(()=>[e(G(ge))]),_:1},8,["value"])]),_:1}),e(_,{span:4},{default:a(()=>[e(V,{value:P.value,"onUpdate:value":t[1]||(t[1]=n=>P.value=n),placeholder:"公告状态",allowClear:"",options:[{value:"published",label:"已发布"},{value:"draft",label:"草稿"},{value:"expired",label:"已过期"}]},null,8,["value"])]),_:1}),e(_,{span:6},{default:a(()=>[e(oe,{value:U.value,"onUpdate:value":t[2]||(t[2]=n=>U.value=n),onChange:k},null,8,["value"])]),_:1}),e(_,{span:4},{default:a(()=>[e(p,{type:"primary",onClick:k},{default:a(()=>[...t[15]||(t[15]=[s("查询",-1)])]),_:1}),e(p,{style:{"margin-left":"8px"},onClick:W},{default:a(()=>[...t[16]||(t[16]=[s("重置",-1)])]),_:1})]),_:1})]),_:1})]),e(ue,{columns:K,"data-source":x.value,pagination:y,loading:S.value,onChange:X,"row-key":"id"},{bodyCell:a(({column:n,record:f})=>[n.key==="status"?(T(),q(h,{key:0,color:D(f.status)},{default:a(()=>[s(d(N(f.status)),1)]),_:2},1032,["color"])):O("",!0),n.key==="priority"?(T(),q(h,{key:1,color:R(f.priority)},{default:a(()=>[s(d($(f.priority)),1)]),_:2},1032,["color"])):O("",!0),n.key==="action"?(T(),q(se,{key:2},{default:a(()=>[e(p,{type:"link",size:"small",onClick:J=>ee(f)},{default:a(()=>[...t[17]||(t[17]=[s("查看",-1)])]),_:1},8,["onClick"]),e(p,{type:"link",size:"small",onClick:J=>Z(f)},{default:a(()=>[...t[18]||(t[18]=[s("编辑",-1)])]),_:1},8,["onClick"]),e(ie,{title:"确定要删除这条公告吗？",onConfirm:J=>te(f.id)},{default:a(()=>[e(p,{type:"link",size:"small",danger:""},{default:a(()=>[...t[19]||(t[19]=[s("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:2},1024)):O("",!0)]),_:1},8,["data-source","pagination","loading"]),e(F,{open:v.value,"onUpdate:open":t[11]||(t[11]=n=>v.value=n),title:b.value,width:"800px",onOk:ae,onCancel:le},{default:a(()=>[e(me,{ref_key:"formRef",ref:z,model:i,rules:L,layout:"vertical"},{default:a(()=>[e(m,{label:"公告标题",name:"title"},{default:a(()=>[e(A,{value:i.title,"onUpdate:value":t[3]||(t[3]=n=>i.title=n),placeholder:"请输入公告标题"},null,8,["value"])]),_:1}),e(m,{label:"公告类型",name:"type"},{default:a(()=>[e(V,{value:i.type,"onUpdate:value":t[4]||(t[4]=n=>i.type=n),placeholder:"请选择公告类型",options:[{value:"system",label:"系统公告"},{value:"maintenance",label:"维护公告"},{value:"update",label:"更新公告"},{value:"security",label:"安全公告"}]},null,8,["value"])]),_:1}),e(m,{label:"优先级",name:"priority"},{default:a(()=>[e(V,{value:i.priority,"onUpdate:value":t[5]||(t[5]=n=>i.priority=n),placeholder:"请选择优先级",options:[{value:"high",label:"高"},{value:"medium",label:"中"},{value:"low",label:"低"}]},null,8,["value"])]),_:1}),e(m,{label:"公告内容",name:"content"},{default:a(()=>[e(re,{value:i.content,"onUpdate:value":t[6]||(t[6]=n=>i.content=n),rows:6,placeholder:"请输入公告内容"},null,8,["value"])]),_:1}),e(E,{gutter:16},{default:a(()=>[e(_,{span:12},{default:a(()=>[e(m,{label:"生效时间",name:"effectiveTime"},{default:a(()=>[e(M,{value:i.effectiveTime,"onUpdate:value":t[7]||(t[7]=n=>i.effectiveTime=n),"show-time":"",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),e(_,{span:12},{default:a(()=>[e(m,{label:"失效时间",name:"expiryTime"},{default:a(()=>[e(M,{value:i.expiryTime,"onUpdate:value":t[8]||(t[8]=n=>i.expiryTime=n),"show-time":"",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(m,{label:"状态",name:"status"},{default:a(()=>[e(de,{value:i.status,"onUpdate:value":t[9]||(t[9]=n=>i.status=n)},{default:a(()=>[e(j,{value:"draft"},{default:a(()=>[...t[20]||(t[20]=[s("草稿",-1)])]),_:1}),e(j,{value:"published"},{default:a(()=>[...t[21]||(t[21]=[s("发布",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),e(m,{label:"是否置顶",name:"isPinned"},{default:a(()=>[e(pe,{checked:i.isPinned,"onUpdate:checked":t[10]||(t[10]=n=>i.isPinned=n)},null,8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"]),e(F,{open:I.value,"onUpdate:open":t[12]||(t[12]=n=>I.value=n),title:"公告详情",width:"700px",footer:null},{default:a(()=>[e(ce,{column:1,bordered:""},{default:a(()=>[e(c,{label:"公告标题"},{default:a(()=>[s(d(u.value.title),1)]),_:1}),e(c,{label:"公告类型"},{default:a(()=>[s(d(ne(u.value.type)),1)]),_:1}),e(c,{label:"优先级"},{default:a(()=>[e(h,{color:R(u.value.priority)},{default:a(()=>[s(d($(u.value.priority)),1)]),_:1},8,["color"])]),_:1}),e(c,{label:"状态"},{default:a(()=>[e(h,{color:D(u.value.status)},{default:a(()=>[s(d(N(u.value.status)),1)]),_:1},8,["color"])]),_:1}),e(c,{label:"生效时间"},{default:a(()=>[s(d(u.value.effectiveTime),1)]),_:1}),e(c,{label:"失效时间"},{default:a(()=>[s(d(u.value.expiryTime),1)]),_:1}),e(c,{label:"是否置顶"},{default:a(()=>[s(d(u.value.isPinned?"是":"否"),1)]),_:1}),e(c,{label:"公告内容"},{default:a(()=>[w("div",we,d(u.value.content),1)]),_:1})]),_:1})]),_:1},8,["open"])])}}}),Se=be(Te,[["__scopeId","data-v-a04b7255"]]);export{Se as default};
