import{u as Ie}from"./excel-B07CBqJs.js";import{_ as xe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as w,a as V,k as Se,m as Ne,c as Te,o as O,e as ee,x as t,q as a,s as u,h as n,y as S,P as Me,G as Ue,I as Ee,Y as Le,R as Oe,p as $,f as z,t as v,M as R,C as y}from"./index-BhbkSrG8.js";import{E as he}from"./ExportOutlined-iuxpVXnR.js";const De={class:"page-container"},Ve={class:"toolbar"},$e={class:"table-container"},ze={__name:"ProductionTeam",setup(Re){const h=w(!1),C=w(!1),q=w(!1),N=w(!1),f=w(!1),D=w(),k=w([]),r=V({teamCode:"",teamName:"",departmentId:void 0,status:void 0}),o=V({id:"",teamCode:"",teamName:"",departmentId:void 0,leaderId:void 0,workShift:"day",memberCount:1,phone:"",workLocation:"",responsibilities:"",remark:"",status:"1"}),te=[{title:"班组编码",dataIndex:"teamCode",key:"teamCode",width:120},{title:"班组名称",dataIndex:"teamName",key:"teamName",width:150},{title:"所属部门",key:"departmentName",width:120,customRender:({record:l})=>A(l.departmentId)},{title:"班组长",key:"leaderName",width:100,customRender:({record:l})=>B(l.leaderId)},{title:"工作班次",dataIndex:"workShift",key:"workShift",width:100},{title:"班组人数",dataIndex:"memberCount",key:"memberCount",width:100,sorter:!0},{title:"联系电话",dataIndex:"phone",key:"phone",width:120},{title:"状态",dataIndex:"status",key:"status",width:80},{title:"创建时间",dataIndex:"createTime",key:"createTime",width:150},{title:"操作",key:"action",width:180,fixed:"right"}],b=w([{id:"1",teamCode:"TEAM001",teamName:"装配一组",departmentId:"1",leaderId:"1",workShift:"day",memberCount:8,phone:"13800138001",workLocation:"生产车间A区",responsibilities:"负责电子产品的装配工作",remark:"技术骨干班组",status:"1",createTime:"2024-01-15 10:30:00",updateTime:"2024-01-15 10:30:00"},{id:"2",teamCode:"TEAM002",teamName:"装配二组",departmentId:"1",leaderId:"2",workShift:"night",memberCount:6,phone:"13800138002",workLocation:"生产车间A区",responsibilities:"负责夜间装配工作",remark:"夜班班组",status:"1",createTime:"2024-01-15 10:35:00",updateTime:"2024-01-15 10:35:00"},{id:"3",teamCode:"TEAM003",teamName:"测试班组",departmentId:"4",leaderId:"3",workShift:"day",memberCount:5,phone:"13800138003",workLocation:"测试车间B区",responsibilities:"负责产品质量测试",remark:"质量控制关键班组",status:"1",createTime:"2024-01-15 10:40:00",updateTime:"2024-01-15 10:40:00"},{id:"4",teamCode:"TEAM004",teamName:"包装班组",departmentId:"2",leaderId:"4",workShift:"afternoon",memberCount:7,phone:"13800138004",workLocation:"包装车间C区",responsibilities:"负责产品包装、标识和入库工作",remark:"包装效率优秀班组",status:"1",createTime:"2024-01-15 10:45:00",updateTime:"2024-01-15 10:45:00"}]),T=V({current:1,pageSize:20,total:4,showSizeChanger:!0,showQuickJumper:!0}),p=w({}),ae={teamCode:[{required:!0,message:"请输入班组编码",trigger:"blur"}],teamName:[{required:!0,message:"请输入班组名称",trigger:"blur"}],departmentId:[{required:!0,message:"请选择所属部门",trigger:"change"}],leaderId:[{required:!0,message:"请选择班组长",trigger:"change"}],workShift:[{required:!0,message:"请选择工作班次",trigger:"change"}],memberCount:[{required:!0,message:"请输入班组人数",trigger:"blur"}]},A=l=>({1:"生产一部",2:"生产二部",3:"生产三部",4:"质量部"})[l]||"未知",B=l=>({1:"张三",2:"李四",3:"王五",4:"赵六"})[l]||"未指定",j=l=>({day:"白班",night:"夜班",morning:"早班",afternoon:"中班",mixed:"混合班"})[l]||"未知",P=l=>({day:"blue",night:"purple",morning:"green",afternoon:"orange",mixed:"cyan"})[l]||"default",le=Se(()=>f.value?"查看生产班组":N.value?"编辑生产班组":"新增生产班组"),ne=l=>{k.value=l},F=()=>{T.current=1,I()},de=()=>{Object.assign(r,{teamCode:"",teamName:"",departmentId:void 0,status:void 0}),F()},oe=l=>{T.current=l.current,T.pageSize=l.pageSize,I()},ue=()=>{N.value=!1,C.value=!0,G()},ie=()=>{const l=b.value.find(e=>e.id===k.value[0]);l&&K(l)},K=l=>{N.value=!0,f.value=!1,C.value=!0,Object.assign(o,l)},se=l=>{N.value=!0,f.value=!0,Object.assign(o,l),C.value=!0},re=l=>{R.confirm({title:"确认删除",content:`确定删除班组 ${l.teamName} 吗？`,okType:"danger",onOk(){const e=b.value.findIndex(i=>i.id===l.id);e>-1&&(b.value.splice(e,1),y.success("删除成功"),I())}})},me=()=>{R.confirm({title:"确认批量删除",content:`确定删除选中的 ${k.value.length} 条记录吗？`,okType:"danger",onOk(){b.value=b.value.filter(l=>!k.value.includes(l.id)),k.value=[],y.success("删除成功")}})},fe=async()=>{try{if(await D.value.validate(),N.value){const l=b.value.findIndex(e=>e.id===o.id);l>-1&&(b.value[l]={...o,updateTime:new Date().toLocaleString()},y.success("更新成功"))}else{const l=(Math.max(...b.value.map(i=>parseInt(i.id)))+1).toString(),e={...o,id:l,createTime:new Date().toLocaleString(),updateTime:new Date().toLocaleString()};b.value.push(e),y.success("新增成功")}C.value=!1,I()}catch(l){console.error("表单验证失败:",l)}},pe=()=>{C.value=!1,G()},G=()=>{var l;Object.assign(o,{id:"",teamCode:"",teamName:"",departmentId:void 0,leaderId:void 0,workShift:"day",memberCount:1,phone:"",workLocation:"",responsibilities:"",remark:"",status:"1"}),(l=D.value)==null||l.resetFields()},ve=()=>{if(b.value.length===0){y.warning("暂无数据可导出");return}const l=[{title:"班组编码",dataIndex:"teamCode"},{title:"班组名称",dataIndex:"teamName"},{title:"所属部门",dataIndex:"departmentName"},{title:"班组长",dataIndex:"leaderName"},{title:"班次",dataIndex:"workShift"},{title:"人数",dataIndex:"memberCount"},{title:"状态",dataIndex:"status"}],{exportToCSV:e}=Ie();e(b.value,l,"生产班组"),y.success("导出成功")},be=({key:l})=>{const e=l==="enable"?"1":"0",i=l==="enable"?"启用":"禁用";R.confirm({title:`确认批量${i}`,content:`确定${i}选中的 ${k.value.length} 条记录吗？`,onOk(){b.value.forEach(M=>{k.value.includes(M.id)&&(M.status=e)}),k.value=[],y.success(`批量${i}成功`)}})},I=()=>{h.value=!0,setTimeout(()=>{let l=[...b.value];r.teamCode&&(l=l.filter(e=>e.teamCode.includes(r.teamCode))),r.teamName&&(l=l.filter(e=>e.teamName.includes(r.teamName))),r.departmentId&&(l=l.filter(e=>e.departmentId===r.departmentId)),r.status!==void 0&&(l=l.filter(e=>e.status===r.status)),T.total=l.length,h.value=!1},300)};return Ne(()=>{I()}),(l,e)=>{const i=u("a-button"),M=u("a-menu-item"),_e=u("a-menu"),ke=u("a-dropdown"),J=u("a-space"),x=u("a-input"),m=u("a-form-item"),s=u("a-select-option"),U=u("a-select"),Q=u("a-form"),ge=u("a-card"),E=u("a-tag"),Y=u("a-divider"),we=u("a-table"),g=u("a-col"),L=u("a-row"),Ce=u("a-input-number"),H=u("a-radio"),ce=u("a-radio-group"),W=u("a-textarea"),X=u("a-modal"),_=u("a-descriptions-item"),ye=u("a-descriptions");return O(),Te("div",De,[ee("div",Ve,[t(J,null,{default:a(()=>[t(i,{type:"primary",onClick:ue},{icon:a(()=>[t(S(Me))]),default:a(()=>[e[17]||(e[17]=n("新增 ",-1))]),_:1}),t(i,{disabled:k.value.length!==1,onClick:ie},{icon:a(()=>[t(S(Ue))]),default:a(()=>[e[18]||(e[18]=n("编辑 ",-1))]),_:1},8,["disabled"]),t(i,{danger:"",disabled:k.value.length===0,onClick:me},{icon:a(()=>[t(S(Ee))]),default:a(()=>[e[19]||(e[19]=n("删除 ",-1))]),_:1},8,["disabled"]),t(ke,{disabled:k.value.length===0},{overlay:a(()=>[t(_e,{onClick:be},{default:a(()=>[t(M,{key:"enable"},{default:a(()=>[...e[21]||(e[21]=[n("批量启用",-1)])]),_:1}),t(M,{key:"disable"},{default:a(()=>[...e[22]||(e[22]=[n("批量禁用",-1)])]),_:1})]),_:1})]),default:a(()=>[t(i,null,{default:a(()=>[e[20]||(e[20]=n("状态操作 ",-1)),t(S(Le))]),_:1})]),_:1},8,["disabled"]),t(i,{onClick:ve},{icon:a(()=>[t(S(he))]),default:a(()=>[e[23]||(e[23]=n("导出 ",-1))]),_:1}),t(i,{onClick:I},{icon:a(()=>[t(S(Oe))]),default:a(()=>[e[24]||(e[24]=n("刷新 ",-1))]),_:1})]),_:1})]),t(ge,{class:"search-card",bordered:!1},{default:a(()=>[t(Q,{layout:"inline",model:r},{default:a(()=>[t(m,{label:"班组编码"},{default:a(()=>[t(x,{value:r.teamCode,"onUpdate:value":e[0]||(e[0]=d=>r.teamCode=d),placeholder:"请输入","allow-clear":""},null,8,["value"])]),_:1}),t(m,{label:"班组名称"},{default:a(()=>[t(x,{value:r.teamName,"onUpdate:value":e[1]||(e[1]=d=>r.teamName=d),placeholder:"请输入","allow-clear":""},null,8,["value"])]),_:1}),t(m,{label:"所属部门"},{default:a(()=>[t(U,{value:r.departmentId,"onUpdate:value":e[2]||(e[2]=d=>r.departmentId=d),style:{width:"150px"},placeholder:"请选择","allow-clear":""},{default:a(()=>[t(s,{value:"1"},{default:a(()=>[...e[25]||(e[25]=[n("生产一部",-1)])]),_:1}),t(s,{value:"2"},{default:a(()=>[...e[26]||(e[26]=[n("生产二部",-1)])]),_:1}),t(s,{value:"3"},{default:a(()=>[...e[27]||(e[27]=[n("生产三部",-1)])]),_:1}),t(s,{value:"4"},{default:a(()=>[...e[28]||(e[28]=[n("质量部",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(m,{label:"状态"},{default:a(()=>[t(U,{value:r.status,"onUpdate:value":e[3]||(e[3]=d=>r.status=d),style:{width:"100px"},placeholder:"请选择","allow-clear":""},{default:a(()=>[t(s,{value:"1"},{default:a(()=>[...e[29]||(e[29]=[n("启用",-1)])]),_:1}),t(s,{value:"0"},{default:a(()=>[...e[30]||(e[30]=[n("禁用",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(m,null,{default:a(()=>[t(i,{type:"primary",onClick:F},{default:a(()=>[...e[31]||(e[31]=[n("查询",-1)])]),_:1}),t(i,{style:{"margin-left":"8px"},onClick:de},{default:a(()=>[...e[32]||(e[32]=[n("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),ee("div",$e,[t(we,{columns:te,"data-source":b.value,loading:h.value,"row-key":"id",size:"middle","row-selection":{selectedRowKeys:k.value,onChange:ne},pagination:T,onChange:oe},{bodyCell:a(({column:d,record:c})=>[d.key==="status"?(O(),$(E,{key:0,color:c.status==="1"?"green":"red"},{default:a(()=>[n(v(c.status==="1"?"启用":"禁用"),1)]),_:2},1032,["color"])):z("",!0),d.key==="workShift"?(O(),$(E,{key:1,color:P(c.workShift)},{default:a(()=>[n(v(j(c.workShift)),1)]),_:2},1032,["color"])):z("",!0),d.key==="action"?(O(),$(J,{key:2},{default:a(()=>[t(i,{type:"link",size:"small",onClick:Z=>se(c)},{default:a(()=>[...e[33]||(e[33]=[n("查看",-1)])]),_:1},8,["onClick"]),t(Y,{type:"vertical"}),t(i,{type:"link",size:"small",onClick:Z=>K(c)},{default:a(()=>[...e[34]||(e[34]=[n("编辑",-1)])]),_:1},8,["onClick"]),t(Y,{type:"vertical"}),t(i,{type:"link",danger:"",size:"small",onClick:Z=>re(c)},{default:a(()=>[...e[35]||(e[35]=[n("删除",-1)])]),_:1},8,["onClick"])]),_:2},1024)):z("",!0)]),_:1},8,["data-source","loading","row-selection","pagination"])]),t(X,{visible:C.value,"onUpdate:visible":e[15]||(e[15]=d=>C.value=d),title:le.value,width:"900px",onOk:fe,onCancel:pe,footer:f.value?null:void 0},{default:a(()=>[t(Q,{ref_key:"formRef",ref:D,model:o,rules:ae,layout:"vertical"},{default:a(()=>[t(L,{gutter:16},{default:a(()=>[t(g,{span:12},{default:a(()=>[t(m,{label:"班组编码",name:"teamCode"},{default:a(()=>[t(x,{value:o.teamCode,"onUpdate:value":e[4]||(e[4]=d=>o.teamCode=d),placeholder:"请输入班组编码",disabled:f.value},null,8,["value","disabled"])]),_:1})]),_:1}),t(g,{span:12},{default:a(()=>[t(m,{label:"班组名称",name:"teamName"},{default:a(()=>[t(x,{value:o.teamName,"onUpdate:value":e[5]||(e[5]=d=>o.teamName=d),placeholder:"请输入班组名称",disabled:f.value},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1}),t(L,{gutter:16},{default:a(()=>[t(g,{span:12},{default:a(()=>[t(m,{label:"所属部门",name:"departmentId"},{default:a(()=>[t(U,{value:o.departmentId,"onUpdate:value":e[6]||(e[6]=d=>o.departmentId=d),placeholder:"请选择所属部门",disabled:f.value},{default:a(()=>[t(s,{value:"1"},{default:a(()=>[...e[36]||(e[36]=[n("生产一部",-1)])]),_:1}),t(s,{value:"2"},{default:a(()=>[...e[37]||(e[37]=[n("生产二部",-1)])]),_:1}),t(s,{value:"3"},{default:a(()=>[...e[38]||(e[38]=[n("生产三部",-1)])]),_:1}),t(s,{value:"4"},{default:a(()=>[...e[39]||(e[39]=[n("质量部",-1)])]),_:1})]),_:1},8,["value","disabled"])]),_:1})]),_:1}),t(g,{span:12},{default:a(()=>[t(m,{label:"班组长",name:"leaderId"},{default:a(()=>[t(U,{value:o.leaderId,"onUpdate:value":e[7]||(e[7]=d=>o.leaderId=d),placeholder:"请选择班组长",disabled:f.value},{default:a(()=>[t(s,{value:"1"},{default:a(()=>[...e[40]||(e[40]=[n("张三",-1)])]),_:1}),t(s,{value:"2"},{default:a(()=>[...e[41]||(e[41]=[n("李四",-1)])]),_:1}),t(s,{value:"3"},{default:a(()=>[...e[42]||(e[42]=[n("王五",-1)])]),_:1}),t(s,{value:"4"},{default:a(()=>[...e[43]||(e[43]=[n("赵六",-1)])]),_:1})]),_:1},8,["value","disabled"])]),_:1})]),_:1})]),_:1}),t(L,{gutter:16},{default:a(()=>[t(g,{span:8},{default:a(()=>[t(m,{label:"工作班次",name:"workShift"},{default:a(()=>[t(U,{value:o.workShift,"onUpdate:value":e[8]||(e[8]=d=>o.workShift=d),placeholder:"请选择工作班次",disabled:f.value},{default:a(()=>[t(s,{value:"day"},{default:a(()=>[...e[44]||(e[44]=[n("白班",-1)])]),_:1}),t(s,{value:"night"},{default:a(()=>[...e[45]||(e[45]=[n("夜班",-1)])]),_:1}),t(s,{value:"morning"},{default:a(()=>[...e[46]||(e[46]=[n("早班",-1)])]),_:1}),t(s,{value:"afternoon"},{default:a(()=>[...e[47]||(e[47]=[n("中班",-1)])]),_:1}),t(s,{value:"mixed"},{default:a(()=>[...e[48]||(e[48]=[n("混合班",-1)])]),_:1})]),_:1},8,["value","disabled"])]),_:1})]),_:1}),t(g,{span:8},{default:a(()=>[t(m,{label:"班组人数",name:"memberCount"},{default:a(()=>[t(Ce,{value:o.memberCount,"onUpdate:value":e[9]||(e[9]=d=>o.memberCount=d),placeholder:"请输入",min:1,max:50,style:{width:"100%"},disabled:f.value},null,8,["value","disabled"])]),_:1})]),_:1}),t(g,{span:8},{default:a(()=>[t(m,{label:"状态",name:"status"},{default:a(()=>[t(ce,{value:o.status,"onUpdate:value":e[10]||(e[10]=d=>o.status=d),disabled:f.value},{default:a(()=>[t(H,{value:"1"},{default:a(()=>[...e[49]||(e[49]=[n("启用",-1)])]),_:1}),t(H,{value:"0"},{default:a(()=>[...e[50]||(e[50]=[n("禁用",-1)])]),_:1})]),_:1},8,["value","disabled"])]),_:1})]),_:1})]),_:1}),t(L,{gutter:16},{default:a(()=>[t(g,{span:12},{default:a(()=>[t(m,{label:"联系电话",name:"phone"},{default:a(()=>[t(x,{value:o.phone,"onUpdate:value":e[11]||(e[11]=d=>o.phone=d),placeholder:"请输入联系电话",disabled:f.value},null,8,["value","disabled"])]),_:1})]),_:1}),t(g,{span:12},{default:a(()=>[t(m,{label:"工作地点",name:"workLocation"},{default:a(()=>[t(x,{value:o.workLocation,"onUpdate:value":e[12]||(e[12]=d=>o.workLocation=d),placeholder:"请输入工作地点",disabled:f.value},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1}),t(m,{label:"主要职责",name:"responsibilities"},{default:a(()=>[t(W,{value:o.responsibilities,"onUpdate:value":e[13]||(e[13]=d=>o.responsibilities=d),placeholder:"请输入班组主要职责",rows:3,disabled:f.value},null,8,["value","disabled"])]),_:1}),t(m,{label:"备注",name:"remark"},{default:a(()=>[t(W,{value:o.remark,"onUpdate:value":e[14]||(e[14]=d=>o.remark=d),placeholder:"请输入备注信息",rows:2,disabled:f.value},null,8,["value","disabled"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","footer"]),t(X,{visible:q.value,"onUpdate:visible":e[16]||(e[16]=d=>q.value=d),title:"班组详情",width:"800px",footer:null},{default:a(()=>[t(ye,{column:3,bordered:""},{default:a(()=>[t(_,{label:"班组编码"},{default:a(()=>[n(v(p.value.teamCode),1)]),_:1}),t(_,{label:"班组名称"},{default:a(()=>[n(v(p.value.teamName),1)]),_:1}),t(_,{label:"所属部门"},{default:a(()=>[n(v(A(p.value.departmentId)),1)]),_:1}),t(_,{label:"班组长"},{default:a(()=>[n(v(B(p.value.leaderId)),1)]),_:1}),t(_,{label:"工作班次"},{default:a(()=>[t(E,{color:P(p.value.workShift)},{default:a(()=>[n(v(j(p.value.workShift)),1)]),_:1},8,["color"])]),_:1}),t(_,{label:"班组人数"},{default:a(()=>[n(v(p.value.memberCount)+"人",1)]),_:1}),t(_,{label:"联系电话"},{default:a(()=>[n(v(p.value.phone),1)]),_:1}),t(_,{label:"工作地点"},{default:a(()=>[n(v(p.value.workLocation),1)]),_:1}),t(_,{label:"状态"},{default:a(()=>[t(E,{color:p.value.status==="1"?"green":"red"},{default:a(()=>[n(v(p.value.status==="1"?"启用":"禁用"),1)]),_:1},8,["color"])]),_:1}),t(_,{label:"创建时间"},{default:a(()=>[n(v(p.value.createTime),1)]),_:1}),t(_,{label:"更新时间"},{default:a(()=>[n(v(p.value.updateTime),1)]),_:1}),t(_,{label:"主要职责",span:3},{default:a(()=>[n(v(p.value.responsibilities||"无"),1)]),_:1}),t(_,{label:"备注",span:3},{default:a(()=>[n(v(p.value.remark||"无"),1)]),_:1})]),_:1})]),_:1},8,["visible"])])}}},Pe=xe(ze,[["__scopeId","data-v-d286a5a7"]]);export{Pe as default};
