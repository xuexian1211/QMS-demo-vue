import{x as a,N as E,r as C,a as ts,m as es,c as j,o as y,e as s,p as k,f as as,q as e,h as f,y as M,K as ns,s as m,G as os,t as o,F as ls,z as is,B as rs,j as ds,C as T,E as N,O as cs,Q as us,U as V,u as ps}from"./index-CAjnGs0g.js";import{_ as _s}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as fs}from"./ExportOutlined-CYgoHkM0.js";var ms={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M820 436h-40c-4.4 0-8 3.6-8 8v40c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-40c0-4.4-3.6-8-8-8zm32-104H732V120c0-4.4-3.6-8-8-8H300c-4.4 0-8 3.6-8 8v212H172c-44.2 0-80 35.8-80 80v328c0 17.7 14.3 32 32 32h168v132c0 4.4 3.6 8 8 8h424c4.4 0 8-3.6 8-8V772h168c17.7 0 32-14.3 32-32V412c0-44.2-35.8-80-80-80zM360 180h304v152H360V180zm304 664H360V568h304v276zm200-140H732V500H292v204H160V412c0-6.6 5.4-12 12-12h680c6.6 0 12 5.4 12 12v292z"}}]},name:"printer",theme:"outlined"};function A(c){for(var r=1;r<arguments.length;r++){var d=arguments[r]!=null?Object(arguments[r]):{},p=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(p=p.concat(Object.getOwnPropertySymbols(d).filter(function(_){return Object.getOwnPropertyDescriptor(d,_).enumerable}))),p.forEach(function(_){vs(c,_,d[_])})}return c}function vs(c,r,d){return r in c?Object.defineProperty(c,r,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[r]=d,c}var x=function(r,d){var p=A({},r,d.attrs);return a(E,A({},p,{icon:ms}),null)};x.displayName="PrinterOutlined";x.inheritAttrs=!1;var bs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"};function H(c){for(var r=1;r<arguments.length;r++){var d=arguments[r]!=null?Object(arguments[r]):{},p=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(p=p.concat(Object.getOwnPropertySymbols(d).filter(function(_){return Object.getOwnPropertyDescriptor(d,_).enumerable}))),p.forEach(function(_){gs(c,_,d[_])})}return c}function gs(c,r,d){return r in c?Object.defineProperty(c,r,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[r]=d,c}var z=function(r,d){var p=H({},r,d.attrs);return a(E,H({},p,{icon:bs}),null)};z.displayName="SyncOutlined";z.inheritAttrs=!1;const ys={class:"process-disposal-view-container"},hs={class:"toolbar"},Os={class:"content-container"},Ms={class:"info-item"},Ds={class:"value"},ws={class:"info-item"},Ps={class:"value"},Cs={class:"info-item"},ks={class:"value"},Ts={class:"info-item"},xs={class:"info-item"},zs={class:"value"},Ss={class:"info-item"},js={class:"value"},Ns={class:"info-item"},Vs={class:"value"},As={class:"info-item"},Hs={class:"value"},Es={class:"info-item"},Ls={class:"value"},Bs={class:"info-item"},Rs={class:"value"},Ys={class:"info-item"},$s={class:"value"},Qs={class:"info-item"},Us={class:"value"},qs={class:"info-item"},Is={class:"value"},Fs={class:"info-item"},Gs={class:"info-item"},Ws={class:"info-item"},Js={class:"value"},Ks={class:"info-item"},Xs={class:"value"},Zs={class:"info-item"},st={class:"value"},tt={class:"info-item"},et={class:"value"},at={class:"info-item"},nt={class:"value"},ot={class:"info-item"},lt={class:"value"},it={class:"info-item"},rt={class:"value"},dt={class:"info-item"},ct={class:"value"},ut={class:"info-item"},pt={class:"value"},_t={class:"info-item"},ft={class:"value"},mt={class:"info-item"},vt={class:"value"},bt={class:"info-item"},gt={class:"value"},yt={class:"info-item"},ht={class:"value"},Ot={class:"info-item"},Mt={class:"value"},Dt={class:"info-item"},wt={class:"value"},Pt={class:"timeline-content"},Ct={class:"timeline-title"},kt={class:"timeline-desc"},Tt={class:"timeline-time"},xt={class:"timeline-user"},zt={class:"info-item"},St={class:"value"},jt={class:"info-item"},Nt={class:"value"},Vt={class:"info-item"},At={class:"value"},Ht={__name:"ProcessDisposalView",setup(c){const r=ps(),d=ds(),p=C("personnel"),_=C(!1),n=ts({id:"",disposalNo:"",workOrder:"",discoveryDate:null,productionLine:"",process:"",shift:"",productCode:"",productName:"",defectQuantity:null,defectDescription:"",causeAnalysis:"",disposalMethod:"",urgencyLevel:"",disposalMeasures:"",disposalResult:"",disposalPerson:"",disposalDate:null,discoverer:"",processor:"",processingDate:null,reviewer:"",responsibleDept:"",responsiblePerson:"",contactPhone:"",status:"",createTime:null,updateTime:null,auditTime:null,auditOpinion:"",correctiveAction:"",remark:""}),S=C([]),L=()=>{r.push("/production-quality/exception-handling/process-disposal")},B=()=>{r.push(`/production-quality/exception-handling/process-disposal/edit/${n.id}`)},R=()=>{window.print(),T.success("打印功能已启动")},Y=()=>{T.info("导出功能开发中...")},$=i=>({pending:"待处理",processing:"处理中",completed:"已完成",closed:"已关闭"})[i]||i,Q=i=>({pending:"orange",processing:"blue",completed:"green",closed:"default"})[i]||"default",U=i=>({rework:"返工",repair:"返修",scrap:"报废",concession:"让步接收",return:"退回供应商"})[i]||i,q=i=>({rework:"blue",repair:"orange",scrap:"red",concession:"green",return:"purple"})[i]||"default",I=i=>({low:"低",medium:"中",high:"高",urgent:"紧急"})[i]||i,F=i=>({low:"green",medium:"blue",high:"orange",urgent:"red"})[i]||"default",G=i=>({created:V,processing:z,completed:us,rejected:cs})[i]||V,W=i=>({created:"gray",processing:"blue",completed:"green",rejected:"red"})[i]||"gray",D=i=>i?N(i).format("YYYY-MM-DD HH:mm"):"",g=i=>i?N(i).format("YYYY-MM-DD HH:mm:ss"):"",J=async()=>{const i=d.params.id;try{await new Promise(t=>setTimeout(t,500)),Object.assign(n,{id:i,disposalNo:"PROC202401001",workOrder:"WO202401001",discoveryDate:"2024-01-15 09:30:00",productionLine:"生产线A",process:"焊接工序",shift:"白班",productCode:"P001",productName:"传动轴组件",defectQuantity:5,defectDescription:"焊接出现气孔缺陷，主要分布在焊缝区域，影响产品质量",causeAnalysis:"焊接参数设置不当，电流过大导致焊缝气孔增多",disposalMethod:"rework",urgencyLevel:"high",disposalMeasures:"重新调整焊接参数，对不合格品进行返工处理",disposalResult:"已完成返工，质量检验合格",disposalPerson:"李四",disposalDate:"2024-01-15 16:30:00",discoverer:"张三",processor:"李四",processingDate:"2024-01-15 16:30:00",reviewer:"王五",responsibleDept:"生产部",responsiblePerson:"张三",contactPhone:"13800138000",status:"completed",createTime:"2024-01-15 09:30:00",updateTime:"2024-01-15 16:30:00",auditTime:"2024-01-15 17:00:00",auditOpinion:"返工处理符合要求，同意关闭",correctiveAction:"设备维护计划已制定，操作员培训已安排",remark:"需要加强过程质量控制"}),_.value=n.status==="completed",S.value=[{title:"创建处置单",description:"发现焊接气孔缺陷，创建过程不合格品处置单",time:"2024-01-15 09:30:00",user:"张三",status:"created"},{title:"开始处理",description:"开始对不合格品进行返工处理",time:"2024-01-15 14:00:00",user:"李四",status:"processing"},{title:"处理完成",description:"返工处理完成，质量检验合格",time:"2024-01-15 16:30:00",user:"李四",status:"completed"},{title:"审核通过",description:"审核通过，处置单关闭",time:"2024-01-15 17:00:00",user:"王五",status:"completed"}]}catch{T.error("获取详情失败")}};return es(()=>{J()}),(i,t)=>{const h=m("a-button"),l=m("a-col"),w=m("a-tag"),u=m("a-row"),b=m("a-card"),O=m("a-tab-pane"),P=m("a-divider"),K=m("a-timeline-item"),X=m("a-timeline"),Z=m("a-tabs");return y(),j("div",ys,[s("div",hs,[a(h,{onClick:L},{icon:e(()=>[a(M(ns))]),default:e(()=>[t[1]||(t[1]=f(" 返回 ",-1))]),_:1}),_.value?as("",!0):(y(),k(h,{key:0,type:"primary",onClick:B},{icon:e(()=>[a(M(os))]),default:e(()=>[t[2]||(t[2]=f(" 编辑 ",-1))]),_:1})),a(h,{onClick:R},{icon:e(()=>[a(M(x))]),default:e(()=>[t[3]||(t[3]=f(" 打印 ",-1))]),_:1}),a(h,{onClick:Y},{icon:e(()=>[a(M(fs))]),default:e(()=>[t[4]||(t[4]=f(" 导出 ",-1))]),_:1})]),s("div",Os,[a(b,{title:"基本信息",size:"small",class:"info-card"},{default:e(()=>[a(u,{gutter:16},{default:e(()=>[a(l,{span:6},{default:e(()=>[s("div",Ms,[t[5]||(t[5]=s("span",{class:"label"},"处置单号：",-1)),s("span",Ds,o(n.disposalNo),1)])]),_:1}),a(l,{span:6},{default:e(()=>[s("div",ws,[t[6]||(t[6]=s("span",{class:"label"},"生产工单：",-1)),s("span",Ps,o(n.workOrder),1)])]),_:1}),a(l,{span:6},{default:e(()=>[s("div",Cs,[t[7]||(t[7]=s("span",{class:"label"},"发现日期：",-1)),s("span",ks,o(g(n.discoveryDate)),1)])]),_:1}),a(l,{span:6},{default:e(()=>[s("div",Ts,[t[8]||(t[8]=s("span",{class:"label"},"状态：",-1)),a(w,{color:Q(n.status)},{default:e(()=>[f(o($(n.status)),1)]),_:1},8,["color"])])]),_:1})]),_:1}),a(u,{gutter:16},{default:e(()=>[a(l,{span:6},{default:e(()=>[s("div",xs,[t[9]||(t[9]=s("span",{class:"label"},"生产线：",-1)),s("span",zs,o(n.productionLine),1)])]),_:1}),a(l,{span:6},{default:e(()=>[s("div",Ss,[t[10]||(t[10]=s("span",{class:"label"},"工序：",-1)),s("span",js,o(n.process),1)])]),_:1}),a(l,{span:6},{default:e(()=>[s("div",Ns,[t[11]||(t[11]=s("span",{class:"label"},"班次：",-1)),s("span",Vs,o(n.shift==="day"?"白班":"夜班"),1)])]),_:1}),a(l,{span:6},{default:e(()=>[s("div",As,[t[12]||(t[12]=s("span",{class:"label"},"发现人：",-1)),s("span",Hs,o(n.discoverer),1)])]),_:1})]),_:1})]),_:1}),a(b,{title:"不合格情况描述",size:"small",class:"info-card"},{default:e(()=>[a(u,{gutter:16},{default:e(()=>[a(l,{span:8},{default:e(()=>[s("div",Es,[t[13]||(t[13]=s("span",{class:"label"},"产品编码：",-1)),s("span",Ls,o(n.productCode),1)])]),_:1}),a(l,{span:8},{default:e(()=>[s("div",Bs,[t[14]||(t[14]=s("span",{class:"label"},"产品名称：",-1)),s("span",Rs,o(n.productName),1)])]),_:1}),a(l,{span:8},{default:e(()=>[s("div",Ys,[t[15]||(t[15]=s("span",{class:"label"},"不合格数量：",-1)),s("span",$s,o(n.defectQuantity)+" 件",1)])]),_:1})]),_:1}),a(u,{gutter:16},{default:e(()=>[a(l,{span:24},{default:e(()=>[s("div",Qs,[t[16]||(t[16]=s("span",{class:"label"},"不合格描述：",-1)),s("span",Us,o(n.defectDescription),1)])]),_:1})]),_:1}),a(u,{gutter:16},{default:e(()=>[a(l,{span:24},{default:e(()=>[s("div",qs,[t[17]||(t[17]=s("span",{class:"label"},"原因分析：",-1)),s("span",Is,o(n.causeAnalysis),1)])]),_:1})]),_:1})]),_:1}),a(b,{title:"处置方式",size:"small",class:"info-card"},{default:e(()=>[a(u,{gutter:16},{default:e(()=>[a(l,{span:8},{default:e(()=>[s("div",Fs,[t[18]||(t[18]=s("span",{class:"label"},"处置方式：",-1)),a(w,{color:q(n.disposalMethod)},{default:e(()=>[f(o(U(n.disposalMethod)),1)]),_:1},8,["color"])])]),_:1}),a(l,{span:8},{default:e(()=>[s("div",Gs,[t[19]||(t[19]=s("span",{class:"label"},"紧急程度：",-1)),a(w,{color:F(n.urgencyLevel)},{default:e(()=>[f(o(I(n.urgencyLevel)),1)]),_:1},8,["color"])])]),_:1}),a(l,{span:8},{default:e(()=>[s("div",Ws,[t[20]||(t[20]=s("span",{class:"label"},"处置人：",-1)),s("span",Js,o(n.processor||"未指定"),1)])]),_:1})]),_:1}),a(u,{gutter:16},{default:e(()=>[a(l,{span:24},{default:e(()=>[s("div",Ks,[t[21]||(t[21]=s("span",{class:"label"},"处置措施：",-1)),s("span",Xs,o(n.disposalMeasures),1)])]),_:1})]),_:1}),a(u,{gutter:16},{default:e(()=>[a(l,{span:24},{default:e(()=>[s("div",Zs,[t[22]||(t[22]=s("span",{class:"label"},"处置结果：",-1)),s("span",st,o(n.disposalResult||"暂无"),1)])]),_:1})]),_:1})]),_:1}),a(Z,{activeKey:p.value,"onUpdate:activeKey":t[0]||(t[0]=v=>p.value=v),class:"info-tabs"},{default:e(()=>[a(O,{key:"personnel",tab:"人员信息"},{default:e(()=>[a(b,{size:"small",class:"tab-card"},{default:e(()=>[a(u,{gutter:16},{default:e(()=>[a(l,{span:6},{default:e(()=>[s("div",tt,[t[23]||(t[23]=s("span",{class:"label"},"发现人：",-1)),s("span",et,o(n.discoverer),1)])]),_:1}),a(l,{span:6},{default:e(()=>[s("div",at,[t[24]||(t[24]=s("span",{class:"label"},"发现时间：",-1)),s("span",nt,o(g(n.discoveryDate)),1)])]),_:1}),a(l,{span:6},{default:e(()=>[s("div",ot,[t[25]||(t[25]=s("span",{class:"label"},"处理人：",-1)),s("span",lt,o(n.processor||"未指定"),1)])]),_:1}),a(l,{span:6},{default:e(()=>[s("div",it,[t[26]||(t[26]=s("span",{class:"label"},"处理时间：",-1)),s("span",rt,o(D(n.processingDate)),1)])]),_:1})]),_:1}),a(u,{gutter:16},{default:e(()=>[a(l,{span:6},{default:e(()=>[s("div",dt,[t[27]||(t[27]=s("span",{class:"label"},"责任部门：",-1)),s("span",ct,o(n.responsibleDept),1)])]),_:1}),a(l,{span:6},{default:e(()=>[s("div",ut,[t[28]||(t[28]=s("span",{class:"label"},"责任人：",-1)),s("span",pt,o(n.responsiblePerson),1)])]),_:1}),a(l,{span:6},{default:e(()=>[s("div",_t,[t[29]||(t[29]=s("span",{class:"label"},"联系电话：",-1)),s("span",ft,o(n.contactPhone),1)])]),_:1})]),_:1})]),_:1})]),_:1}),a(O,{key:"process",tab:"流程管理"},{default:e(()=>[a(b,{size:"small",class:"tab-card"},{default:e(()=>[a(u,{gutter:16},{default:e(()=>[a(l,{span:8},{default:e(()=>[s("div",mt,[t[30]||(t[30]=s("span",{class:"label"},"审核人：",-1)),s("span",vt,o(n.reviewer||"未指定"),1)])]),_:1}),a(l,{span:8},{default:e(()=>[s("div",bt,[t[31]||(t[31]=s("span",{class:"label"},"审核时间：",-1)),s("span",gt,o(D(n.auditTime)),1)])]),_:1}),a(l,{span:8},{default:e(()=>[s("div",yt,[t[32]||(t[32]=s("span",{class:"label"},"处置日期：",-1)),s("span",ht,o(D(n.disposalDate)),1)])]),_:1})]),_:1}),a(P,null,{default:e(()=>[...t[33]||(t[33]=[f("审核意见",-1)])]),_:1}),a(u,{gutter:16},{default:e(()=>[a(l,{span:24},{default:e(()=>[s("div",Ot,[t[34]||(t[34]=s("span",{class:"label"},"审核意见：",-1)),s("span",Mt,o(n.auditOpinion||"暂无审核意见"),1)])]),_:1})]),_:1}),a(P,null,{default:e(()=>[...t[35]||(t[35]=[f("纠正措施",-1)])]),_:1}),a(u,{gutter:16},{default:e(()=>[a(l,{span:24},{default:e(()=>[s("div",Dt,[t[36]||(t[36]=s("span",{class:"label"},"纠正措施：",-1)),s("span",wt,o(n.correctiveAction||"暂无纠正措施"),1)])]),_:1})]),_:1})]),_:1})]),_:1}),a(O,{key:"timeline",tab:"流程记录"},{default:e(()=>[a(b,{size:"small",class:"tab-card"},{default:e(()=>[a(X,null,{default:e(()=>[(y(!0),j(ls,null,is(S.value,(v,ss)=>(y(),k(K,{key:ss,color:W(v.status)},{dot:e(()=>[(y(),k(rs(G(v.status))))]),default:e(()=>[s("div",Pt,[s("div",Ct,o(v.title),1),s("div",kt,o(v.description),1),s("div",Tt,o(g(v.time)),1),s("div",xt,"操作人："+o(v.user),1)])]),_:2},1032,["color"]))),128))]),_:1})]),_:1})]),_:1}),a(O,{key:"remark",tab:"备注信息"},{default:e(()=>[a(b,{size:"small",class:"tab-card"},{default:e(()=>[a(u,{gutter:16},{default:e(()=>[a(l,{span:24},{default:e(()=>[s("div",zt,[t[37]||(t[37]=s("span",{class:"label"},"备注：",-1)),s("span",St,o(n.remark||"暂无备注"),1)])]),_:1})]),_:1}),a(P,null,{default:e(()=>[...t[38]||(t[38]=[f("时间记录",-1)])]),_:1}),a(u,{gutter:16},{default:e(()=>[a(l,{span:8},{default:e(()=>[s("div",jt,[t[39]||(t[39]=s("span",{class:"label"},"创建时间：",-1)),s("span",Nt,o(g(n.createTime)),1)])]),_:1}),a(l,{span:8},{default:e(()=>[s("div",Vt,[t[40]||(t[40]=s("span",{class:"label"},"更新时间：",-1)),s("span",At,o(g(n.updateTime)),1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["activeKey"])])])}}},Rt=_s(Ht,[["__scopeId","data-v-b3242e83"]]);export{Rt as default};
