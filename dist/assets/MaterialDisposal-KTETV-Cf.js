import{a as O,r as y,k as Ue,m as he,c as ee,o as N,e as B,x as e,q as a,h as u,y as w,P as Ye,s as d,G as Se,H as Ie,I as Qe,R as Re,p as P,f as z,t as T,F as He,E,u as Ae,C as c,J as Oe,M as Be}from"./index-CAjnGs0g.js";import{_ as ze}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as Te}from"./ExportOutlined-CYgoHkM0.js";const Ee={class:"material-disposal-container"},$e={class:"toolbar"},Ve={class:"table-container"},Fe={class:"main-info-section"},Ge={__name:"MaterialDisposal",setup(Ke){const k=Ae(),p=O({disposalNo:"",supplierName:"",materialName:"",status:""}),g=y([]),I=y(!1),v=y([]),te=y([]),_=O({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:r=>`共 ${r} 条数据`}),$=Ue(()=>{let r=g.value;return p.disposalNo&&(r=r.filter(t=>t.disposalNo.includes(p.disposalNo))),p.supplierName&&(r=r.filter(t=>t.supplierName.includes(p.supplierName))),p.materialName&&(r=r.filter(t=>t.materialName.includes(p.materialName))),p.status&&(r=r.filter(t=>t.status===p.status)),r}),ae={selectedRowKeys:v,onChange:(r,t)=>{v.value=r,t.value=t},getCheckboxProps:r=>({disabled:!1,name:r.name})},le=[{title:"单据编号",dataIndex:"disposalNo",key:"disposalNo",width:150,customRender:({text:r,record:t})=>Oe("a",{onClick:()=>L(t)},r)},{title:"发现日期",dataIndex:"discoveryDate",key:"discoveryDate",width:140},{title:"供应商名称",dataIndex:"supplierName",key:"supplierName",width:120},{title:"物料名称",dataIndex:"materialName",key:"materialName",width:120},{title:"物料型号",dataIndex:"materialModel",key:"materialModel",width:100},{title:"缺陷类别",dataIndex:"defectCategory",key:"defectCategory",width:80},{title:"涉及数量",dataIndex:"defectQuantity",key:"defectQuantity",width:80},{title:"处置方式",dataIndex:"disposalMethod",key:"disposalMethod",width:120},{title:"处置状态",dataIndex:"status",key:"status",width:100},{title:"操作",key:"action",width:180,fixed:"right"}],U=y(!1),V=y(!1),Q=y(),l=O({id:null,disposalNo:"",discoveryDate:null,discoveryDepartment:"",otherDepartment:"",discoverer:"",materialName:"",materialModel:"",batchNo:"",purchaseOrderNo:"",supplierName:"",supplierCode:"",contactPerson:"",contactPhone:"",defectPhenomenon:"",defectCategory:"",defectQuantity:null,totalQuantity:null,isolationArea:"",isolationMark:"",isolationPerson:"",iqcInspectionNo:"",supplierCertificateNo:"",otherCertificates:"",reviewDepartments:[],reviewDate:null,disposalMethod:"",discountPercentage:null,rectificationDeadline:null,requiredDocuments:[],executionDepartment:"",executor:"",executionDate:null,executionResult:"",verificationDepartment:"",verifier:"",verificationConclusion:"",fillerSignature:"",departmentHeadSignature:"",qualityDepartmentReview:"",approverSignature:"",remark:"",status:"pending"}),F=y("product"),ne=y([{id:1,name:"供应商A"},{id:2,name:"供应商B"},{id:3,name:"供应商C"}]),re={discoveryDate:[{required:!0,message:"请选择发现日期",trigger:"change"}],discoveryDepartment:[{required:!0,message:"请选择发现部门",trigger:"change"}],discoverer:[{required:!0,message:"请输入发现人员姓名",trigger:"blur"}],otherDepartment:[{required:!1,message:"请填写其他部门名称",trigger:"blur"}],materialName:[{required:!0,message:"请输入物料名称",trigger:"blur"}],materialModel:[{required:!0,message:"请输入物料型号",trigger:"blur"}],batchNo:[{required:!0,message:"请输入物料批号",trigger:"blur"}],purchaseOrderNo:[{required:!0,message:"请输入采购订单号",trigger:"blur"}],supplierName:[{required:!0,message:"请选择供应商名称",trigger:"change"}],supplierCode:[{required:!0,message:"请输入供应商代码",trigger:"blur"}],contactPerson:[{required:!0,message:"请输入联系人",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],defectPhenomenon:[{required:!0,message:"请描述缺陷现象",trigger:"blur"}],defectCategory:[{required:!0,message:"请选择缺陷类别",trigger:"change"}],defectQuantity:[{required:!0,message:"请输入涉及数量",trigger:"blur"}],totalQuantity:[{required:!0,message:"请输入总到货数量",trigger:"blur"}],isolationArea:[{required:!0,message:"请输入隔离区域",trigger:"blur"}],isolationMark:[{required:!0,message:"请选择隔离标识",trigger:"change"}],isolationPerson:[{required:!0,message:"请输入隔离人",trigger:"blur"}],iqcInspectionNo:[{required:!0,message:"请输入IQC检验单号",trigger:"blur"}],reviewDepartments:[{required:!0,message:"请选择评审部门",trigger:"change"}],reviewDate:[{required:!0,message:"请选择评审日期",trigger:"change"}],disposalMethod:[{required:!0,message:"请选择处置方式",trigger:"change"}],discountPercentage:[{required:!1,message:"请输入降价比例",trigger:"blur"}],rectificationDeadline:[{required:!0,message:"请选择整改期限",trigger:"change"}],requiredDocuments:[{required:!0,message:"请选择需提交文件",trigger:"change"}],executionDepartment:[{required:!1,message:"请输入执行部门",trigger:"blur"}],executor:[{required:!1,message:"请输入执行人",trigger:"blur"}],executionDate:[{required:!1,message:"请选择执行完成日期",trigger:"change"}],executionResult:[{required:!1,message:"请输入执行结果",trigger:"blur"}],verificationDepartment:[{required:!1,message:"请选择验证部门",trigger:"change"}],verifier:[{required:!1,message:"请输入验证人",trigger:"blur"}],verificationConclusion:[{required:!1,message:"请选择验证结论",trigger:"change"}],fillerSignature:[{required:!1,message:"请输入填写人签字",trigger:"blur"}],departmentHeadSignature:[{required:!1,message:"请输入部门主管签字",trigger:"blur"}],qualityDepartmentReview:[{required:!1,message:"请输入品质部审核",trigger:"blur"}],approverSignature:[{required:!1,message:"请输入审批人签字",trigger:"blur"}]},G=[{id:1,disposalNo:"LHBHG20240115001",discoveryDate:"2024-01-15 09:30",discoveryDepartment:"品质部（IQC）",discoverer:"张三",materialName:"电子元件A",materialModel:"EC-A001",batchNo:"BATCH001",purchaseOrderNo:"PO20240110001",supplierName:"供应商A",supplierCode:"SUP001",contactPerson:"李经理",contactPhone:"13800138001",defectPhenomenon:"尺寸超差，超出公差范围0.2mm",defectCategory:"A类",defectQuantity:50,totalQuantity:1e3,isolationArea:"不合格品区A-01",isolationMark:"黄色标牌",isolationPerson:"王五",iqcInspectionNo:"IQC20240115001",supplierCertificateNo:"CERT001",otherCertificates:"",reviewDepartments:["品质部","采购部"],reviewDate:"2024-01-15",disposalMethod:"return",discountPercentage:null,rectificationDeadline:"2024-01-25",requiredDocuments:["8D报告","整改计划表"],executionDepartment:"采购部",executor:"赵六",executionDate:"2024-01-16",executionResult:"已退货给供应商，要求重新提供合格产品",verificationDepartment:"品质部（SQE）",verifier:"孙七",verificationConclusion:"合格",fillerSignature:"张三",departmentHeadSignature:"周主管",qualityDepartmentReview:"李审核",approverSignature:"王审批",remark:"已通知供应商加强质量控制",status:"completed"},{id:2,disposalNo:"LHBHG20240116001",discoveryDate:"2024-01-16 14:20",discoveryDepartment:"品质部（IQC）",discoverer:"钱八",materialName:"机械零件B",materialModel:"MP-B002",batchNo:"BATCH002",purchaseOrderNo:"PO20240112002",supplierName:"供应商B",supplierCode:"SUP002",contactPerson:"陈经理",contactPhone:"13900139002",defectPhenomenon:"表面有划痕，影响外观质量",defectCategory:"B类",defectQuantity:30,totalQuantity:500,isolationArea:"不合格品区A-02",isolationMark:"黄色盛具",isolationPerson:"吴九",iqcInspectionNo:"IQC20240116001",supplierCertificateNo:"CERT002",otherCertificates:"",reviewDepartments:["品质部","制造技术部"],reviewDate:"2024-01-16",disposalMethod:"concession_discount",discountPercentage:5,rectificationDeadline:"2024-01-26",requiredDocuments:["整改计划表"],executionDepartment:"制造技术部",executor:"郑十",executionDate:"2024-01-17",executionResult:"已让步接收，降价5%",verificationDepartment:"IQC",verifier:"冯十一",verificationConclusion:"合格",fillerSignature:"钱八",departmentHeadSignature:"沈主管",qualityDepartmentReview:"韩审核",approverSignature:"杨审批",remark:"供应商承诺改进包装方式",status:"completed"},{id:3,disposalNo:"LHBHG20240117001",discoveryDate:"2024-01-17 11:45",discoveryDepartment:"其他",otherDepartment:"生产部",discoverer:"朱十二",materialName:"原材料C",materialModel:"RM-C003",batchNo:"BATCH003",purchaseOrderNo:"PO20240113003",supplierName:"供应商C",supplierCode:"SUP003",contactPerson:"秦经理",contactPhone:"13700137003",defectPhenomenon:"颜色偏差，与标准色板不符",defectCategory:"C类",defectQuantity:20,totalQuantity:200,isolationArea:"不合格品区A-03",isolationMark:"黄色标牌",isolationPerson:"尤十三",iqcInspectionNo:"IQC20240117001",supplierCertificateNo:"CERT003",otherCertificates:"",reviewDepartments:["品质部","采购部","研发技术部"],reviewDate:"2024-01-17",disposalMethod:"sorting",discountPercentage:null,rectificationDeadline:"2024-01-27",requiredDocuments:["8D报告","复检报告"],executionDepartment:"生产部",executor:"",executionDate:null,executionResult:"",verificationDepartment:"",verifier:"",verificationConclusion:"",fillerSignature:"朱十二",departmentHeadSignature:"",qualityDepartmentReview:"",approverSignature:"",remark:"等待分选处理",status:"pending"}],oe=r=>({pending:"orange",processing:"blue",completed:"green",closed:"gray"})[r]||"default",ie=r=>({pending:"待处理",processing:"处理中",completed:"已完成",closed:"已关闭"})[r]||r,ue=r=>({return:"red",concession:"orange",concession_discount:"gold",sorting:"blue"})[r]||"default",se=r=>({return:"退货（退回供应商返工/分选）",concession:"让步接收（不降价）",concession_discount:"让步接收（降价）",sorting:"挑选使用（我司分选）"})[r]||r,de=r=>r?E(r).format("YYYY-MM-DD"):"",h=()=>{I.value=!0,setTimeout(()=>{g.value=[...G],_.total=G.length,I.value=!1},500)},K=()=>{_.current=1,h()},pe=()=>{p.disposalNo="",p.supplierName="",p.materialName="",p.status="",K()},me=r=>{_.current=r.current,_.pageSize=r.pageSize,h()},fe=()=>{k.push("/production-quality/exception-handling/material-disposal/create")},ve=()=>{if(v.value.length===0){c.warning("请选择要编辑的记录");return}if(v.value.length>1){c.warning("只能选择一条记录进行编辑");return}const r=v.value[0];k.push(`/production-quality/exception-handling/material-disposal/edit?id=${r}`)},ce=()=>{if(v.value.length===0){c.warning("请选择要查看的记录");return}if(v.value.length>1){c.warning("只能选择一条记录进行查看");return}const r=v.value[0];k.push({path:"/production-quality/exception-handling/material-disposal/view",query:{id:r}})},ge=()=>{if(v.value.length===0){c.warning("请选择要删除的记录");return}const r=v.value.length;Be.confirm({title:"确认删除",content:`确定要删除选中的 ${r} 条记录吗？删除后不可恢复！`,okText:"确定",cancelText:"取消",okType:"danger",onOk(){v.value.forEach(t=>{const f=g.value.findIndex(s=>s.id===t);f>-1&&g.value.splice(f,1)}),_.total-=r,v.value=[],te.value=[],c.success(`成功删除 ${r} 条记录`)},onCancel(){c.info("已取消删除")}})},De=r=>{Ce(r)},be=()=>{c.info("导出功能开发中...")},ye=()=>{h()},_e=r=>{k.push(`/production-quality/exception-handling/material-disposal/edit?id=${r.id}`)},L=r=>{k.push({path:"/production-quality/exception-handling/material-disposal/view",query:{id:r.id}})},Ce=r=>{const t=g.value.findIndex(f=>f.id===r);t>-1&&(g.value.splice(t,1),_.total--,c.success("删除成功"))},xe=async()=>{try{if(await Q.value.validate(),V.value){const r=g.value.findIndex(t=>t.id===l.id);r>-1&&(g.value[r]={...l,discoveryDate:l.discoveryDate?l.discoveryDate.format("YYYY-MM-DD HH:mm"):null,reviewDate:l.reviewDate?l.reviewDate.format("YYYY-MM-DD"):null,rectificationDeadline:l.rectificationDeadline?l.rectificationDeadline.format("YYYY-MM-DD"):null,executionDate:l.executionDate?l.executionDate.format("YYYY-MM-DD"):null}),c.success("更新成功")}else{const r=Math.max(...g.value.map(s=>s.id))+1,t=`LHBHG${E().format("YYYYMMDD")}${String(r).padStart(3,"0")}`,f={...l,id:r,disposalNo:t,discoveryDate:l.discoveryDate?l.discoveryDate.format("YYYY-MM-DD HH:mm"):E().format("YYYY-MM-DD HH:mm"),reviewDate:l.reviewDate?l.reviewDate.format("YYYY-MM-DD"):null,rectificationDeadline:l.rectificationDeadline?l.rectificationDeadline.format("YYYY-MM-DD"):null,executionDate:l.executionDate?l.executionDate.format("YYYY-MM-DD"):null,status:"pending"};g.value.unshift(f),_.total++,c.success("创建成功")}U.value=!1,j()}catch(r){console.error("表单验证失败:",r)}},Ne=()=>{U.value=!1,j()},j=()=>{var r;Object.assign(l,{id:null,disposalNo:"",discoveryDate:null,discoveryDepartment:"品质部（IQC）",otherDepartment:"",discoverer:"",materialName:"",materialModel:"",batchNo:"",purchaseOrderNo:"",supplierName:"",supplierCode:"",contactPerson:"",contactPhone:"",defectPhenomenon:"",defectCategory:"",defectQuantity:null,totalQuantity:null,isolationArea:"",isolationMark:"黄色标牌",isolationPerson:"",iqcInspectionNo:"",supplierCertificateNo:"",otherCertificates:"",reviewDepartments:[],reviewDate:null,disposalMethod:"return",discountPercentage:null,rectificationDeadline:null,requiredDocuments:[],executionDepartment:"",executor:"",executionDate:null,executionResult:"",verificationDepartment:"",verifier:"",verificationConclusion:"",fillerSignature:"",departmentHeadSignature:"",qualityDepartmentReview:"",approverSignature:"",remark:"",status:"pending"}),(r=Q.value)==null||r.resetFields()};return he(()=>{h()}),(r,t)=>{const f=d("a-button"),s=d("a-input"),o=d("a-form-item"),Y=d("a-select"),J=d("a-form"),D=d("a-card"),W=d("a-tag"),we=d("a-popconfirm"),ke=d("a-space"),qe=d("a-table"),i=d("a-col"),S=d("a-date-picker"),m=d("a-row"),R=d("a-textarea"),b=d("a-radio"),H=d("a-radio-group"),A=d("a-input-number"),q=d("a-tab-pane"),M=d("a-divider"),x=d("a-checkbox"),X=d("a-checkbox-group"),Me=d("a-tabs"),Pe=d("a-modal");return N(),ee("div",Ee,[B("div",$e,[e(f,{type:"primary",onClick:fe},{icon:a(()=>[e(w(Ye))]),default:a(()=>[t[47]||(t[47]=u(" 新增 ",-1))]),_:1}),e(f,{onClick:ve,disabled:v.value.length!==1},{icon:a(()=>[e(w(Se))]),default:a(()=>[t[48]||(t[48]=u(" 编辑 ",-1))]),_:1},8,["disabled"]),e(f,{onClick:ce,disabled:v.value.length!==1},{icon:a(()=>[e(w(Ie))]),default:a(()=>[t[49]||(t[49]=u(" 查看 ",-1))]),_:1},8,["disabled"]),e(f,{onClick:ge,disabled:v.value.length===0,danger:""},{icon:a(()=>[e(w(Qe))]),default:a(()=>[t[50]||(t[50]=u(" 删除 ",-1))]),_:1},8,["disabled"]),e(f,{onClick:be},{icon:a(()=>[e(w(Te))]),default:a(()=>[t[51]||(t[51]=u(" 导出 ",-1))]),_:1}),e(f,{onClick:ye},{icon:a(()=>[e(w(Re))]),default:a(()=>[t[52]||(t[52]=u(" 刷新 ",-1))]),_:1})]),e(D,{title:"搜索条件",size:"small",class:"search-card"},{default:a(()=>[e(J,{layout:"inline",model:p},{default:a(()=>[e(o,{label:"单据编号"},{default:a(()=>[e(s,{value:p.disposalNo,"onUpdate:value":t[0]||(t[0]=n=>p.disposalNo=n),placeholder:"请输入单据编号"},null,8,["value"])]),_:1}),e(o,{label:"供应商名称"},{default:a(()=>[e(s,{value:p.supplierName,"onUpdate:value":t[1]||(t[1]=n=>p.supplierName=n),placeholder:"请输入供应商名称"},null,8,["value"])]),_:1}),e(o,{label:"物料名称"},{default:a(()=>[e(s,{value:p.materialName,"onUpdate:value":t[2]||(t[2]=n=>p.materialName=n),placeholder:"请输入物料名称"},null,8,["value"])]),_:1}),e(o,{label:"处置状态"},{default:a(()=>[e(Y,{value:p.status,"onUpdate:value":t[3]||(t[3]=n=>p.status=n),placeholder:"请选择处置状态",style:{width:"120px"},options:[{value:"pending",label:"待处理"},{value:"processing",label:"处理中"},{value:"completed",label:"已完成"},{value:"closed",label:"已关闭"}]},null,8,["value"])]),_:1}),e(o,null,{default:a(()=>[e(f,{type:"primary",onClick:K},{default:a(()=>[...t[53]||(t[53]=[u("查询",-1)])]),_:1}),e(f,{style:{"margin-left":"8px"},onClick:pe},{default:a(()=>[...t[54]||(t[54]=[u("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),B("div",Ve,[e(qe,{columns:le,"data-source":$.value,loading:I.value,pagination:{..._,total:$.value.length,pageSize:20},scroll:{x:1200,y:"calc(100vh - 220px)"},"row-selection":ae,"row-key":"id",size:"small",onChange:me,class:"compact-table"},{bodyCell:a(({column:n,record:C})=>[n.key==="disposalMethod"?(N(),P(W,{key:0,color:ue(C.disposalMethod),class:"method-tag"},{default:a(()=>[u(T(se(C.disposalMethod)),1)]),_:2},1032,["color"])):n.key==="status"?(N(),P(W,{key:1,color:oe(C.status),class:"status-tag"},{default:a(()=>[u(T(ie(C.status)),1)]),_:2},1032,["color"])):n.key==="discoveryDate"?(N(),ee(He,{key:2},[u(T(de(C.discoveryDate)),1)],64)):n.key==="action"?(N(),P(ke,{key:3},{default:a(()=>[e(f,{type:"link",size:"small",onClick:Z=>L(C)},{default:a(()=>[...t[55]||(t[55]=[u("查看",-1)])]),_:1},8,["onClick"]),e(f,{type:"link",size:"small",onClick:Z=>_e(C)},{default:a(()=>[...t[56]||(t[56]=[u("编辑",-1)])]),_:1},8,["onClick"]),e(we,{title:"确定要删除这条记录吗？",onConfirm:Z=>De(C.id),"ok-text":"确定","cancel-text":"取消"},{default:a(()=>[e(f,{type:"link",size:"small",danger:""},{default:a(()=>[...t[57]||(t[57]=[u("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:2},1024)):z("",!0)]),_:1},8,["data-source","loading","pagination"])]),e(Pe,{visible:U.value,"onUpdate:visible":t[46]||(t[46]=n=>U.value=n),title:V.value?"编辑处置单":"新建处置单",width:"1400px",onOk:xe,onCancel:Ne},{default:a(()=>[e(J,{ref_key:"formRef",ref:Q,model:l,rules:re,layout:"vertical"},{default:a(()=>[B("div",Fe,[e(D,{title:"基本信息",size:"small",class:"form-card"},{default:a(()=>[e(m,{gutter:16},{default:a(()=>[e(i,{span:6},{default:a(()=>[e(o,{label:"单据编号",name:"disposalNo"},{default:a(()=>[e(s,{value:l.disposalNo,"onUpdate:value":t[4]||(t[4]=n=>l.disposalNo=n),disabled:"",placeholder:"系统自动生成"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:6},{default:a(()=>[e(o,{label:"发现日期",name:"discoveryDate"},{default:a(()=>[e(S,{value:l.discoveryDate,"onUpdate:value":t[5]||(t[5]=n=>l.discoveryDate=n),"show-time":"",format:"YYYY-MM-DD HH:mm",style:{width:"100%"},placeholder:"请选择发现日期时间"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:6},{default:a(()=>[e(o,{label:"发现部门",name:"discoveryDepartment"},{default:a(()=>[e(Y,{value:l.discoveryDepartment,"onUpdate:value":t[6]||(t[6]=n=>l.discoveryDepartment=n),placeholder:"请选择发现部门",options:[{value:"品质部（IQC）",label:"品质部（IQC）"},{value:"其他",label:"其他"}]},null,8,["value"])]),_:1})]),_:1}),e(i,{span:6},{default:a(()=>[e(o,{label:"发现人员",name:"discoverer"},{default:a(()=>[e(s,{value:l.discoverer,"onUpdate:value":t[7]||(t[7]=n=>l.discoverer=n),placeholder:"填写实际发现人姓名"},null,8,["value"])]),_:1})]),_:1})]),_:1}),l.discoveryDepartment==="其他"?(N(),P(m,{key:0,gutter:16},{default:a(()=>[e(i,{span:6},{default:a(()=>[e(o,{label:"其他部门",name:"otherDepartment"},{default:a(()=>[e(s,{value:l.otherDepartment,"onUpdate:value":t[8]||(t[8]=n=>l.otherDepartment=n),placeholder:"请填写其他部门名称"},null,8,["value"])]),_:1})]),_:1})]),_:1})):z("",!0)]),_:1}),e(D,{title:"不合格情况描述",size:"small",class:"form-card"},{default:a(()=>[e(m,{gutter:16},{default:a(()=>[e(i,{span:16},{default:a(()=>[e(o,{label:"缺陷现象",name:"defectPhenomenon"},{default:a(()=>[e(R,{value:l.defectPhenomenon,"onUpdate:value":t[9]||(t[9]=n=>l.defectPhenomenon=n),rows:3,placeholder:"详细描述缺陷（如尺寸超差、材质不符）"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:8},{default:a(()=>[e(m,{gutter:8},{default:a(()=>[e(i,{span:24},{default:a(()=>[e(o,{label:"缺陷类别",name:"defectCategory"},{default:a(()=>[e(H,{value:l.defectCategory,"onUpdate:value":t[10]||(t[10]=n=>l.defectCategory=n)},{default:a(()=>[e(b,{value:"A类"},{default:a(()=>[...t[58]||(t[58]=[u("A类",-1)])]),_:1}),e(b,{value:"B类"},{default:a(()=>[...t[59]||(t[59]=[u("B类",-1)])]),_:1}),e(b,{value:"C类"},{default:a(()=>[...t[60]||(t[60]=[u("C类",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:a(()=>[e(o,{label:"涉及数量",name:"defectQuantity"},{default:a(()=>[e(A,{value:l.defectQuantity,"onUpdate:value":t[11]||(t[11]=n=>l.defectQuantity=n),placeholder:"涉及不合格数量",style:{width:"100%"},"addon-after":"件"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:a(()=>[e(o,{label:"总到货数量",name:"totalQuantity"},{default:a(()=>[e(A,{value:l.totalQuantity,"onUpdate:value":t[12]||(t[12]=n=>l.totalQuantity=n),placeholder:"总到货数量",style:{width:"100%"},"addon-after":"件"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(D,{title:"处置方式",size:"small",class:"form-card"},{default:a(()=>[e(m,{gutter:16},{default:a(()=>[e(i,{span:24},{default:a(()=>[e(o,{label:"处置方式（单选）",name:"disposalMethod"},{default:a(()=>[e(H,{value:l.disposalMethod,"onUpdate:value":t[13]||(t[13]=n=>l.disposalMethod=n)},{default:a(()=>[e(b,{value:"return"},{default:a(()=>[...t[61]||(t[61]=[u("退货（退回供应商返工/分选）",-1)])]),_:1}),e(b,{value:"concession"},{default:a(()=>[...t[62]||(t[62]=[u("让步接收（不降价）",-1)])]),_:1}),e(b,{value:"concession_discount"},{default:a(()=>[...t[63]||(t[63]=[u("让步接收（降价____%）",-1)])]),_:1}),e(b,{value:"sorting"},{default:a(()=>[...t[64]||(t[64]=[u("挑选使用（我司分选）",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),l.disposalMethod==="concession_discount"?(N(),P(m,{key:0,gutter:16},{default:a(()=>[e(i,{span:6},{default:a(()=>[e(o,{label:"降价比例",name:"discountPercentage"},{default:a(()=>[e(A,{value:l.discountPercentage,"onUpdate:value":t[14]||(t[14]=n=>l.discountPercentage=n),placeholder:"请输入降价比例",style:{width:"100%"},"addon-after":"%",min:1,max:100},null,8,["value"])]),_:1})]),_:1})]),_:1})):z("",!0)]),_:1})]),e(Me,{activeKey:F.value,"onUpdate:activeKey":t[45]||(t[45]=n=>F.value=n),class:"form-tabs"},{default:a(()=>[e(q,{key:"product",tab:"产品信息"},{default:a(()=>[e(D,{size:"small",class:"tab-card"},{default:a(()=>[e(m,{gutter:16},{default:a(()=>[e(i,{span:8},{default:a(()=>[e(o,{label:"物料名称",name:"materialName"},{default:a(()=>[e(s,{value:l.materialName,"onUpdate:value":t[15]||(t[15]=n=>l.materialName=n),placeholder:"与供应商送货单一致"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:8},{default:a(()=>[e(o,{label:"物料型号",name:"materialModel"},{default:a(()=>[e(s,{value:l.materialModel,"onUpdate:value":t[16]||(t[16]=n=>l.materialModel=n),placeholder:"与供应商送货单一致"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:8},{default:a(()=>[e(o,{label:"物料批号",name:"batchNo"},{default:a(()=>[e(s,{value:l.batchNo,"onUpdate:value":t[17]||(t[17]=n=>l.batchNo=n),placeholder:"与供应商送货单一致"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(m,{gutter:16},{default:a(()=>[e(i,{span:8},{default:a(()=>[e(o,{label:"采购订单号",name:"purchaseOrderNo"},{default:a(()=>[e(s,{value:l.purchaseOrderNo,"onUpdate:value":t[18]||(t[18]=n=>l.purchaseOrderNo=n),placeholder:"与供应商送货单一致"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(q,{key:"supplier",tab:"供应商信息"},{default:a(()=>[e(D,{size:"small",class:"tab-card"},{default:a(()=>[e(m,{gutter:16},{default:a(()=>[e(i,{span:8},{default:a(()=>[e(o,{label:"供应商名称",name:"supplierName"},{default:a(()=>[e(Y,{value:l.supplierName,"onUpdate:value":t[19]||(t[19]=n=>l.supplierName=n),placeholder:"请选择供应商","show-search":"",options:ne.value.map(n=>({value:n.name,label:n.name}))},null,8,["value","options"])]),_:1})]),_:1}),e(i,{span:8},{default:a(()=>[e(o,{label:"供应商代码",name:"supplierCode"},{default:a(()=>[e(s,{value:l.supplierCode,"onUpdate:value":t[20]||(t[20]=n=>l.supplierCode=n),placeholder:"需准确填写"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:8},{default:a(()=>[e(o,{label:"联系人",name:"contactPerson"},{default:a(()=>[e(s,{value:l.contactPerson,"onUpdate:value":t[21]||(t[21]=n=>l.contactPerson=n),placeholder:"供应商联系人"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(m,{gutter:16},{default:a(()=>[e(i,{span:8},{default:a(()=>[e(o,{label:"联系电话",name:"contactPhone"},{default:a(()=>[e(s,{value:l.contactPhone,"onUpdate:value":t[22]||(t[22]=n=>l.contactPhone=n),placeholder:"供应商联系电话"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(M,null,{default:a(()=>[...t[65]||(t[65]=[u("供应商整改要求",-1)])]),_:1}),e(m,{gutter:16},{default:a(()=>[e(i,{span:8},{default:a(()=>[e(o,{label:"整改期限",name:"rectificationDeadline"},{default:a(()=>[e(S,{value:l.rectificationDeadline,"onUpdate:value":t[23]||(t[23]=n=>l.rectificationDeadline=n),style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),e(i,{span:16},{default:a(()=>[e(o,{label:"需提交文件",name:"requiredDocuments"},{default:a(()=>[e(X,{value:l.requiredDocuments,"onUpdate:value":t[24]||(t[24]=n=>l.requiredDocuments=n)},{default:a(()=>[e(x,{value:"8D报告"},{default:a(()=>[...t[66]||(t[66]=[u("8D报告",-1)])]),_:1}),e(x,{value:"整改计划表"},{default:a(()=>[...t[67]||(t[67]=[u("整改计划表",-1)])]),_:1}),e(x,{value:"复检报告"},{default:a(()=>[...t[68]||(t[68]=[u("复检报告",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(q,{key:"process",tab:"流程管理"},{default:a(()=>[e(D,{size:"small",class:"tab-card"},{default:a(()=>[e(m,{gutter:16},{default:a(()=>[e(i,{span:8},{default:a(()=>[e(o,{label:"隔离区域",name:"isolationArea"},{default:a(()=>[e(s,{value:l.isolationArea,"onUpdate:value":t[25]||(t[25]=n=>l.isolationArea=n),placeholder:"需明确隔离位置"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:8},{default:a(()=>[e(o,{label:"隔离标识",name:"isolationMark"},{default:a(()=>[e(H,{value:l.isolationMark,"onUpdate:value":t[26]||(t[26]=n=>l.isolationMark=n)},{default:a(()=>[e(b,{value:"黄色标牌"},{default:a(()=>[...t[69]||(t[69]=[u("黄色标牌",-1)])]),_:1}),e(b,{value:"黄色盛具"},{default:a(()=>[...t[70]||(t[70]=[u("黄色盛具",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(i,{span:8},{default:a(()=>[e(o,{label:"隔离人",name:"isolationPerson"},{default:a(()=>[e(s,{value:l.isolationPerson,"onUpdate:value":t[27]||(t[27]=n=>l.isolationPerson=n),placeholder:"隔离负责人"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(M,null,{default:a(()=>[...t[71]||(t[71]=[u("关联凭证编号",-1)])]),_:1}),e(m,{gutter:16},{default:a(()=>[e(i,{span:8},{default:a(()=>[e(o,{label:"IQC检验单号",name:"iqcInspectionNo"},{default:a(()=>[e(s,{value:l.iqcInspectionNo,"onUpdate:value":t[28]||(t[28]=n=>l.iqcInspectionNo=n),placeholder:"请输入IQC检验单号"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:8},{default:a(()=>[e(o,{label:"供应商合格证明编号",name:"supplierCertificateNo"},{default:a(()=>[e(s,{value:l.supplierCertificateNo,"onUpdate:value":t[29]||(t[29]=n=>l.supplierCertificateNo=n),placeholder:"请输入合格证明编号"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:8},{default:a(()=>[e(o,{label:"其他凭证",name:"otherCertificates"},{default:a(()=>[e(s,{value:l.otherCertificates,"onUpdate:value":t[30]||(t[30]=n=>l.otherCertificates=n),placeholder:"其他相关凭证"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(M,null,{default:a(()=>[...t[72]||(t[72]=[u("评审意见",-1)])]),_:1}),e(m,{gutter:16},{default:a(()=>[e(i,{span:16},{default:a(()=>[e(o,{label:"评审部门",name:"reviewDepartments"},{default:a(()=>[e(X,{value:l.reviewDepartments,"onUpdate:value":t[31]||(t[31]=n=>l.reviewDepartments=n)},{default:a(()=>[e(x,{value:"品质部"},{default:a(()=>[...t[73]||(t[73]=[u("品质部",-1)])]),_:1}),e(x,{value:"采购部"},{default:a(()=>[...t[74]||(t[74]=[u("采购部",-1)])]),_:1}),e(x,{value:"研发技术部"},{default:a(()=>[...t[75]||(t[75]=[u("研发技术部",-1)])]),_:1}),e(x,{value:"制造技术部"},{default:a(()=>[...t[76]||(t[76]=[u("制造技术部",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(i,{span:8},{default:a(()=>[e(o,{label:"评审日期",name:"reviewDate"},{default:a(()=>[e(S,{value:l.reviewDate,"onUpdate:value":t[32]||(t[32]=n=>l.reviewDate=n),style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(q,{key:"execution",tab:"执行跟踪"},{default:a(()=>[e(D,{size:"small",class:"tab-card"},{default:a(()=>[e(m,{gutter:16},{default:a(()=>[e(i,{span:8},{default:a(()=>[e(o,{label:"执行部门",name:"executionDepartment"},{default:a(()=>[e(s,{value:l.executionDepartment,"onUpdate:value":t[33]||(t[33]=n=>l.executionDepartment=n),placeholder:"请输入执行部门"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:8},{default:a(()=>[e(o,{label:"执行人",name:"executor"},{default:a(()=>[e(s,{value:l.executor,"onUpdate:value":t[34]||(t[34]=n=>l.executor=n),placeholder:"请输入执行人"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:8},{default:a(()=>[e(o,{label:"执行完成日期",name:"executionDate"},{default:a(()=>[e(S,{value:l.executionDate,"onUpdate:value":t[35]||(t[35]=n=>l.executionDate=n),style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(m,{gutter:16},{default:a(()=>[e(i,{span:24},{default:a(()=>[e(o,{label:"执行结果",name:"executionResult"},{default:a(()=>[e(R,{value:l.executionResult,"onUpdate:value":t[36]||(t[36]=n=>l.executionResult=n),rows:2,placeholder:"请输入执行结果"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(M,null,{default:a(()=>[...t[77]||(t[77]=[u("验证结果",-1)])]),_:1}),e(m,{gutter:16},{default:a(()=>[e(i,{span:8},{default:a(()=>[e(o,{label:"验证部门",name:"verificationDepartment"},{default:a(()=>[e(s,{value:l.verificationDepartment,"onUpdate:value":t[37]||(t[37]=n=>l.verificationDepartment=n),placeholder:"请选择验证部门"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:8},{default:a(()=>[e(o,{label:"验证人",name:"verifier"},{default:a(()=>[e(s,{value:l.verifier,"onUpdate:value":t[38]||(t[38]=n=>l.verifier=n),placeholder:"请输入验证人"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:8},{default:a(()=>[e(o,{label:"验证结论",name:"verificationConclusion"},{default:a(()=>[e(Y,{value:l.verificationConclusion,"onUpdate:value":t[39]||(t[39]=n=>l.verificationConclusion=n),placeholder:"请选择验证结论",options:[{value:"合格",label:"合格"},{value:"不合格",label:"不合格"},{value:"待验证",label:"待验证"}]},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(q,{key:"approval",tab:"审批信息"},{default:a(()=>[e(D,{size:"small",class:"tab-card"},{default:a(()=>[e(m,{gutter:16},{default:a(()=>[e(i,{span:6},{default:a(()=>[e(o,{label:"填写人签字",name:"fillerSignature"},{default:a(()=>[e(s,{value:l.fillerSignature,"onUpdate:value":t[40]||(t[40]=n=>l.fillerSignature=n),placeholder:"请输入填写人签字"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:6},{default:a(()=>[e(o,{label:"部门主管签字",name:"departmentHeadSignature"},{default:a(()=>[e(s,{value:l.departmentHeadSignature,"onUpdate:value":t[41]||(t[41]=n=>l.departmentHeadSignature=n),placeholder:"请输入部门主管签字"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:6},{default:a(()=>[e(o,{label:"品质部审核",name:"qualityDepartmentReview"},{default:a(()=>[e(s,{value:l.qualityDepartmentReview,"onUpdate:value":t[42]||(t[42]=n=>l.qualityDepartmentReview=n),placeholder:"请输入品质部审核"},null,8,["value"])]),_:1})]),_:1}),e(i,{span:6},{default:a(()=>[e(o,{label:"审批人签字",name:"approverSignature"},{default:a(()=>[e(s,{value:l.approverSignature,"onUpdate:value":t[43]||(t[43]=n=>l.approverSignature=n),placeholder:"请输入审批人签字"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(M,null,{default:a(()=>[...t[78]||(t[78]=[u("备注",-1)])]),_:1}),e(m,{gutter:16},{default:a(()=>[e(i,{span:24},{default:a(()=>[e(o,{label:"备注",name:"remark"},{default:a(()=>[e(R,{value:l.remark,"onUpdate:value":t[44]||(t[44]=n=>l.remark=n),rows:3,placeholder:"请输入备注信息"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["activeKey"])]),_:1},8,["model"])]),_:1},8,["visible","title"])])}}},We=ze(Ge,[["__scopeId","data-v-f43a3333"]]);export{We as default};
