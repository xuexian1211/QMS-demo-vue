import{x as t,N as q,d as _e,r as _,a as ge,k as A,m as ke,c as R,e as M,q as a,s as f,o as g,h as v,y as Q,P as Oe,S as Ce,f as O,p as N,B as Ne,t as j,C as z,L as we}from"./index-Ozo2vowX.js";import{S as xe}from"./SettingOutlined-DrmyR7sS.js";import{U as Te}from"./UserOutlined-DLVCfB02.js";import{_ as Ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";var Se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"};function G(s){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?Object(arguments[l]):{},d=Object.keys(u);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(u).filter(function(p){return Object.getOwnPropertyDescriptor(u,p).enumerable}))),d.forEach(function(p){Pe(s,p,u[p])})}return s}function Pe(s,l,u){return l in s?Object.defineProperty(s,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):s[l]=u,s}var B=function(l,u){var d=G({},l,u.attrs);return t(q,G({},d,{icon:Se}),null)};B.displayName="BarChartOutlined";B.inheritAttrs=!1;var Ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"};function J(s){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?Object(arguments[l]):{},d=Object.keys(u);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(u).filter(function(p){return Object.getOwnPropertyDescriptor(u,p).enumerable}))),d.forEach(function(p){Ve(s,p,u[p])})}return s}function Ve(s,l,u){return l in s?Object.defineProperty(s,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):s[l]=u,s}var $=function(l,u){var d=J({},l,u.attrs);return t(q,J({},d,{icon:Ue}),null)};$.displayName="HomeOutlined";$.inheritAttrs=!1;var Fe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64L128 192v384c0 212.1 171.9 384 384 384s384-171.9 384-384V192L512 64zm312 512c0 172.3-139.7 312-312 312S200 748.3 200 576V246l312-110 312 110v330z"}},{tag:"path",attrs:{d:"M378.4 475.1a35.91 35.91 0 00-50.9 0 35.91 35.91 0 000 50.9l129.4 129.4 2.1 2.1a33.98 33.98 0 0048.1 0L730.6 434a33.98 33.98 0 000-48.1l-2.8-2.8a33.98 33.98 0 00-48.1 0L483 579.7 378.4 475.1z"}}]},name:"safety",theme:"outlined"};function W(s){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?Object(arguments[l]):{},d=Object.keys(u);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(u).filter(function(p){return Object.getOwnPropertyDescriptor(u,p).enumerable}))),d.forEach(function(p){Me(s,p,u[p])})}return s}function Me(s,l,u){return l in s?Object.defineProperty(s,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):s[l]=u,s}var H=function(l,u){var d=W({},l,u.attrs);return t(q,W({},d,{icon:Fe}),null)};H.displayName="SafetyOutlined";H.inheritAttrs=!1;const je={class:"menu-management"},ze={class:"page-header"},qe={class:"search-section"},Be={key:0},$e=_e({__name:"Menu",setup(s){const l=_(""),u=_(),d=_(),p=_(!1),k=_(!1),w=_("新增菜单"),I=_(),X=[{title:"菜单名称",dataIndex:"menuName",key:"menuName",width:200},{title:"菜单类型",dataIndex:"menuType",key:"menuType",width:100},{title:"权限标识",dataIndex:"permission",key:"permission",width:150},{title:"路由地址",dataIndex:"path",key:"path",width:200},{title:"组件路径",dataIndex:"component",key:"component",width:200},{title:"排序",dataIndex:"orderNum",key:"orderNum",width:80},{title:"显示",dataIndex:"visible",key:"visible",width:80},{title:"状态",dataIndex:"status",key:"status",width:80},{title:"操作",key:"action",width:200,fixed:"right"}],r=ge({parentId:null,menuType:"menu",menuName:"",permission:"",path:"",component:"",orderNum:0,icon:"",isFrame:!1,isCache:!0,visible:!0,status:"active",remark:""}),Y={menuName:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],menuType:[{required:!0,message:"请选择菜单类型",trigger:"change"}],orderNum:[{required:!0,message:"请输入显示排序",trigger:"blur"}]},S=_([{id:1,parentId:null,menuName:"首页",menuType:"menu",permission:"dashboard:view",path:"/dashboard",component:"@/views/Dashboard.vue",orderNum:1,icon:"HomeOutlined",isFrame:!1,isCache:!0,visible:!0,status:"active",remark:"系统首页",children:[]},{id:2,parentId:null,menuName:"质量管理",menuType:"directory",permission:"",path:"/quality",component:"",orderNum:2,icon:"FileTextOutlined",isFrame:!1,isCache:!0,visible:!0,status:"active",remark:"质量管理模块",children:[{id:21,parentId:2,menuName:"来料检验",menuType:"menu",permission:"quality:iqc:view",path:"/quality/iqc",component:"@/views/quality/IQC.vue",orderNum:1,icon:"",isFrame:!1,isCache:!0,visible:!0,status:"active",remark:"来料检验管理",children:[]},{id:22,parentId:2,menuName:"新增检验单",menuType:"button",permission:"quality:iqc:add",path:"",component:"",orderNum:2,icon:"",isFrame:!1,isCache:!0,visible:!1,status:"active",remark:"新增检验单按钮",children:[]}]},{id:3,parentId:null,menuName:"系统管理",menuType:"directory",permission:"",path:"/system",component:"",orderNum:3,icon:"SettingOutlined",isFrame:!1,isCache:!0,visible:!0,status:"active",remark:"系统管理模块",children:[{id:31,parentId:3,menuName:"系统公告",menuType:"menu",permission:"system:announcement:view",path:"/system/announcement",component:"@/views/system/Announcement.vue",orderNum:1,icon:"",isFrame:!1,isCache:!0,visible:!0,status:"active",remark:"系统公告管理",children:[]}]}]),Z=A(()=>D(S.value,null)),K=A(()=>E(S.value,null)),D=(i,e)=>{const c=[];return i.forEach(m=>{if(m.parentId===e){const o=D(i,m.id);o.length>0&&(m.children=o),c.push(m)}}),c},E=(i,e)=>{const c=[];return i.forEach(m=>{if(m.parentId===e){const o={id:m.id,menuName:m.menuName,value:m.id},b=E(i,m.id);b.length>0&&(o.children=b),c.push(o)}}),c},P=()=>{T()},ee=()=>{l.value="",u.value=void 0,d.value=void 0,P()},te=()=>{w.value="新增菜单",U(),k.value=!0},ae=i=>{w.value="新增子菜单",U(),r.parentId=i.id,k.value=!0},ne=i=>{w.value="编辑菜单",Object.assign(r,i),k.value=!0},le=i=>{const e=(c,m)=>{for(let o=0;o<c.length;o++){if(c[o].id===m)return c.splice(o,1),!0;if(c[o].children&&e(c[o].children,m))return!0}return!1};e(S.value,i)&&(z.success("删除成功"),T())},ue=i=>{i.status=i.status==="active"?"inactive":"active",z.success(`菜单已${i.status==="active"?"启用":"禁用"}`)},re=async()=>{try{await I.value.validate(),z.success(w.value==="新增菜单"?"创建成功":"更新成功"),k.value=!1,T()}catch(i){console.error("表单验证失败:",i)}},oe=()=>{k.value=!1,U()},U=()=>{var i;Object.assign(r,{parentId:null,menuType:"menu",menuName:"",permission:"",path:"",component:"",orderNum:0,icon:"",isFrame:!1,isCache:!0,visible:!0,status:"active",remark:""}),(i=I.value)==null||i.resetFields()},T=()=>{p.value=!0,setTimeout(()=>{p.value=!1},500)},ie=i=>({HomeOutlined:$,UserOutlined:Te,SettingOutlined:xe,FileTextOutlined:we,BarChartOutlined:B,SafetyOutlined:H})[i]||null,se=i=>({directory:"blue",menu:"green",button:"orange"})[i]||"default",de=i=>({directory:"目录",menu:"菜单",button:"按钮"})[i]||i;return ke(()=>{T()}),(i,e)=>{const c=f("a-button"),m=f("a-input"),o=f("a-col"),b=f("a-select-option"),V=f("a-select"),C=f("a-row"),L=f("a-tag"),x=f("a-switch"),me=f("a-popconfirm"),pe=f("a-space"),ce=f("a-table"),fe=f("a-tree-select"),h=f("a-form-item"),ve=f("a-input-number"),he=f("a-textarea"),ye=f("a-form"),be=f("a-modal");return g(),R("div",je,[M("div",ze,[e[18]||(e[18]=M("h2",null,"菜单管理",-1)),t(c,{type:"primary",onClick:te},{icon:a(()=>[t(Q(Oe))]),default:a(()=>[e[17]||(e[17]=v(" 新增菜单 ",-1))]),_:1})]),M("div",qe,[t(C,{gutter:16},{default:a(()=>[t(o,{span:6},{default:a(()=>[t(m,{value:l.value,"onUpdate:value":e[0]||(e[0]=n=>l.value=n),placeholder:"搜索菜单名称",onPressEnter:P},{prefix:a(()=>[t(Q(Ce))]),_:1},8,["value"])]),_:1}),t(o,{span:4},{default:a(()=>[t(V,{value:u.value,"onUpdate:value":e[1]||(e[1]=n=>u.value=n),placeholder:"菜单类型",allowClear:""},{default:a(()=>[t(b,{value:"menu"},{default:a(()=>[...e[19]||(e[19]=[v("菜单",-1)])]),_:1}),t(b,{value:"button"},{default:a(()=>[...e[20]||(e[20]=[v("按钮",-1)])]),_:1}),t(b,{value:"directory"},{default:a(()=>[...e[21]||(e[21]=[v("目录",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(o,{span:4},{default:a(()=>[t(V,{value:d.value,"onUpdate:value":e[2]||(e[2]=n=>d.value=n),placeholder:"状态",allowClear:""},{default:a(()=>[t(b,{value:"active"},{default:a(()=>[...e[22]||(e[22]=[v("启用",-1)])]),_:1}),t(b,{value:"inactive"},{default:a(()=>[...e[23]||(e[23]=[v("禁用",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(o,{span:4},{default:a(()=>[t(c,{type:"primary",onClick:P},{default:a(()=>[...e[24]||(e[24]=[v("查询",-1)])]),_:1}),t(c,{style:{"margin-left":"8px"},onClick:ee},{default:a(()=>[...e[25]||(e[25]=[v("重置",-1)])]),_:1})]),_:1})]),_:1})]),t(ce,{columns:X,"data-source":Z.value,pagination:!1,loading:p.value,"row-key":"id","default-expand-all":!0},{bodyCell:a(({column:n,record:y})=>[n.key==="menuName"?(g(),R("span",Be,[y.icon?(g(),N(Ne(ie(y.icon)),{key:0,style:{"margin-right":"8px"}})):O("",!0),v(" "+j(y.menuName),1)])):O("",!0),n.key==="menuType"?(g(),N(L,{key:1,color:se(y.menuType)},{default:a(()=>[v(j(de(y.menuType)),1)]),_:2},1032,["color"])):O("",!0),n.key==="visible"?(g(),N(L,{key:2,color:y.visible?"green":"red"},{default:a(()=>[v(j(y.visible?"显示":"隐藏"),1)]),_:2},1032,["color"])):O("",!0),n.key==="status"?(g(),N(x,{key:3,checked:y.status==="active",onChange:F=>ue(y)},null,8,["checked","onChange"])):O("",!0),n.key==="action"?(g(),N(pe,{key:4},{default:a(()=>[t(c,{type:"link",size:"small",onClick:F=>ae(y)},{default:a(()=>[...e[26]||(e[26]=[v("新增子菜单",-1)])]),_:1},8,["onClick"]),t(c,{type:"link",size:"small",onClick:F=>ne(y)},{default:a(()=>[...e[27]||(e[27]=[v("编辑",-1)])]),_:1},8,["onClick"]),t(me,{title:"确定要删除这个菜单吗？",onConfirm:F=>le(y.id)},{default:a(()=>[t(c,{type:"link",size:"small",danger:""},{default:a(()=>[...e[28]||(e[28]=[v("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:2},1024)):O("",!0)]),_:1},8,["data-source","loading"]),t(be,{open:k.value,"onUpdate:open":e[16]||(e[16]=n=>k.value=n),title:w.value,width:"800px",onOk:re,onCancel:oe},{default:a(()=>[t(ye,{ref_key:"formRef",ref:I,model:r,rules:Y,layout:"vertical"},{default:a(()=>[t(C,{gutter:16},{default:a(()=>[t(o,{span:12},{default:a(()=>[t(h,{label:"上级菜单",name:"parentId"},{default:a(()=>[t(fe,{value:r.parentId,"onUpdate:value":e[3]||(e[3]=n=>r.parentId=n),"tree-data":K.value,placeholder:"请选择上级菜单","allow-clear":"","field-names":{children:"children",label:"menuName",value:"id"}},null,8,["value","tree-data"])]),_:1})]),_:1}),t(o,{span:12},{default:a(()=>[t(h,{label:"菜单类型",name:"menuType"},{default:a(()=>[t(V,{value:r.menuType,"onUpdate:value":e[4]||(e[4]=n=>r.menuType=n),placeholder:"请选择菜单类型"},{default:a(()=>[t(b,{value:"directory"},{default:a(()=>[...e[29]||(e[29]=[v("目录",-1)])]),_:1}),t(b,{value:"menu"},{default:a(()=>[...e[30]||(e[30]=[v("菜单",-1)])]),_:1}),t(b,{value:"button"},{default:a(()=>[...e[31]||(e[31]=[v("按钮",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t(C,{gutter:16},{default:a(()=>[t(o,{span:12},{default:a(()=>[t(h,{label:"菜单名称",name:"menuName"},{default:a(()=>[t(m,{value:r.menuName,"onUpdate:value":e[5]||(e[5]=n=>r.menuName=n),placeholder:"请输入菜单名称"},null,8,["value"])]),_:1})]),_:1}),t(o,{span:12},{default:a(()=>[t(h,{label:"权限标识",name:"permission"},{default:a(()=>[t(m,{value:r.permission,"onUpdate:value":e[6]||(e[6]=n=>r.permission=n),placeholder:"请输入权限标识"},null,8,["value"])]),_:1})]),_:1})]),_:1}),r.menuType!=="button"?(g(),N(C,{key:0,gutter:16},{default:a(()=>[t(o,{span:12},{default:a(()=>[t(h,{label:"路由地址",name:"path"},{default:a(()=>[t(m,{value:r.path,"onUpdate:value":e[7]||(e[7]=n=>r.path=n),placeholder:"请输入路由地址"},null,8,["value"])]),_:1})]),_:1}),t(o,{span:12},{default:a(()=>[t(h,{label:"组件路径",name:"component"},{default:a(()=>[t(m,{value:r.component,"onUpdate:value":e[8]||(e[8]=n=>r.component=n),placeholder:"请输入组件路径"},null,8,["value"])]),_:1})]),_:1})]),_:1})):O("",!0),t(C,{gutter:16},{default:a(()=>[t(o,{span:8},{default:a(()=>[t(h,{label:"显示排序",name:"orderNum"},{default:a(()=>[t(ve,{value:r.orderNum,"onUpdate:value":e[9]||(e[9]=n=>r.orderNum=n),min:0,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(o,{span:8},{default:a(()=>[t(h,{label:"菜单图标",name:"icon"},{default:a(()=>[t(m,{value:r.icon,"onUpdate:value":e[10]||(e[10]=n=>r.icon=n),placeholder:"请输入图标名称"},null,8,["value"])]),_:1})]),_:1}),t(o,{span:8},{default:a(()=>[t(h,{label:"是否外链",name:"isFrame"},{default:a(()=>[t(x,{checked:r.isFrame,"onUpdate:checked":e[11]||(e[11]=n=>r.isFrame=n)},null,8,["checked"])]),_:1})]),_:1})]),_:1}),t(C,{gutter:16},{default:a(()=>[t(o,{span:8},{default:a(()=>[t(h,{label:"是否缓存",name:"isCache"},{default:a(()=>[t(x,{checked:r.isCache,"onUpdate:checked":e[12]||(e[12]=n=>r.isCache=n)},null,8,["checked"])]),_:1})]),_:1}),t(o,{span:8},{default:a(()=>[t(h,{label:"是否显示",name:"visible"},{default:a(()=>[t(x,{checked:r.visible,"onUpdate:checked":e[13]||(e[13]=n=>r.visible=n)},null,8,["checked"])]),_:1})]),_:1}),t(o,{span:8},{default:a(()=>[t(h,{label:"状态",name:"status"},{default:a(()=>[t(x,{checked:r.status==="active",onChange:e[14]||(e[14]=n=>r.status=n?"active":"inactive")},null,8,["checked"])]),_:1})]),_:1})]),_:1}),t(h,{label:"备注",name:"remark"},{default:a(()=>[t(he,{value:r.remark,"onUpdate:value":e[15]||(e[15]=n=>r.remark=n),rows:3,placeholder:"请输入备注信息"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])])}}}),Ae=Ie($e,[["__scopeId","data-v-fbe0a0aa"]]);export{Ae as default};
