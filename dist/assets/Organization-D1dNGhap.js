import{d as le,r as m,k as ne,a as D,c as O,e as r,x as t,s as d,q as a,f as C,t as K,o as _,h as s,y as S,P as oe,Y as se,Z as ue,p as U,F as de}from"./index-D0CfuKge.js";import{_ as re}from"./_plugin-vue_export-helper-DlAUqK2U.js";const pe={class:"organization-management"},ie={class:"layout-header"},ve={class:"header-left"},me={class:"header-right"},ce={class:"layout-content"},ye={class:"tree-panel"},fe={class:"panel-header"},_e={class:"table-panel"},ke={class:"panel-header"},ge={key:0,class:"selected-info"},xe=le({__name:"Organization",setup(Te){const c=m(""),k=m(""),T=m(!1),E=m(null),h=m([]),w=m(["1"]),y=m(null),M=m([]),N=[{title:"单位名称",dataIndex:"name",key:"name"},{title:"单位编码",dataIndex:"code",key:"code"},{title:"单位类型",dataIndex:"type",key:"type"},{title:"上级单位",dataIndex:"parent",key:"parent"},{title:"负责人",dataIndex:"manager",key:"manager"},{title:"联系电话",dataIndex:"phone",key:"phone"},{title:"状态",dataIndex:"status",key:"status"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"操作",key:"action"}],Q=m([{key:"1",name:"总公司",code:"HQ",type:"company",status:"active",children:[{key:"2",name:"质量部",code:"QUALITY",type:"department",status:"active",children:[{key:"5",name:"质量管理组",code:"QUALITY_TEAM",type:"team",status:"active"}]},{key:"3",name:"技术部",code:"TECH",type:"department",status:"active",children:[{key:"6",name:"研发组",code:"DEV_TEAM",type:"team",status:"active"}]},{key:"4",name:"市场部",code:"MARKET",type:"department",status:"inactive",children:[]}]}]),R=m([{key:"1",name:"总公司",code:"HQ",type:"company",parent:"无",manager:"张总",phone:"021-12345678",status:"active",createTime:"2023-01-01"},{key:"2",name:"质量部",code:"QUALITY",type:"department",parent:"总公司",manager:"王经理",phone:"021-12345679",status:"active",createTime:"2023-01-02"},{key:"3",name:"技术部",code:"TECH",type:"department",parent:"总公司",manager:"李经理",phone:"021-12345680",status:"active",createTime:"2023-01-03"},{key:"4",name:"市场部",code:"MARKET",type:"department",parent:"总公司",manager:"赵经理",phone:"021-12345681",status:"inactive",createTime:"2023-01-04"},{key:"5",name:"质量管理组",code:"QUALITY_TEAM",type:"team",parent:"质量部",manager:"孙主管",phone:"021-12345682",status:"active",createTime:"2023-01-05"},{key:"6",name:"研发组",code:"DEV_TEAM",type:"team",parent:"技术部",manager:"周主管",phone:"021-12345683",status:"active",createTime:"2023-01-06"}]),V=ne(()=>y.value?R.value.filter(n=>{const e=!c.value||n.name.includes(c.value)||n.code.includes(c.value),p=!k.value||n.type===k.value,u=n.key===y.value.key||n.parent===y.value.name||y.value.children&&y.value.children.some(g=>g.name===n.name);return e&&p&&u}):R.value.filter(n=>{const e=!c.value||n.name.includes(c.value)||n.code.includes(c.value),p=!k.value||n.type===k.value;return e&&p})),Y=D({current:1,pageSize:10,total:2,showSizeChanger:!0,showQuickJumper:!0,showTotal:n=>`共 ${n} 条记录`}),o=D({name:"",code:"",type:"",parent:"",manager:"",phone:"",status:"active",sortOrder:0,address:"",description:""}),$=()=>{console.log("搜索:",c.value)},B=(n,e)=>{n.length>0?y.value=e.node:y.value=null},H=()=>{const n=e=>{let p=[];return e.forEach(u=>{p.push(u.key),u.children&&u.children.length>0&&(p=p.concat(n(u.children)))}),p};w.value=n(Q.value)},L=()=>{w.value=[]},q=n=>{M.value=n},F=n=>{E.value=n,Object.assign(o,n),T.value=!0},j=n=>{n.status=n.status==="active"?"inactive":"active"},P=n=>{console.log("删除记录:",n)},J=()=>{console.log("保存:",o),T.value=!1,E.value=null,Object.assign(o,{name:"",code:"",type:"",parent:"",manager:"",phone:"",status:"active",sortOrder:0,address:"",description:""})};return(n,e)=>{const p=d("a-input-search"),u=d("a-select-option"),g=d("a-select"),x=d("a-button"),z=d("a-tag"),Z=d("a-badge"),G=d("a-tree"),W=d("a-table"),b=d("a-input"),i=d("a-form-item"),f=d("a-col"),A=d("a-row"),X=d("a-input-number"),ee=d("a-textarea"),te=d("a-form"),ae=d("a-modal");return _(),O("div",pe,[r("div",ie,[r("div",ve,[t(p,{value:c.value,"onUpdate:value":e[0]||(e[0]=l=>c.value=l),placeholder:"搜索单位名称、编码",style:{width:"300px","margin-right":"16px"},onSearch:$},null,8,["value"]),t(g,{value:k.value,"onUpdate:value":e[1]||(e[1]=l=>k.value=l),placeholder:"单位类型",style:{width:"120px"}},{default:a(()=>[t(u,{value:""},{default:a(()=>[...e[16]||(e[16]=[s("全部",-1)])]),_:1}),t(u,{value:"company"},{default:a(()=>[...e[17]||(e[17]=[s("公司",-1)])]),_:1}),t(u,{value:"department"},{default:a(()=>[...e[18]||(e[18]=[s("部门",-1)])]),_:1}),t(u,{value:"team"},{default:a(()=>[...e[19]||(e[19]=[s("小组",-1)])]),_:1})]),_:1},8,["value"])]),r("div",me,[t(x,{type:"primary",onClick:e[2]||(e[2]=l=>T.value=!0)},{default:a(()=>[t(S(oe)),e[20]||(e[20]=s(" 新增单位 ",-1))]),_:1})])]),r("div",ce,[r("div",ye,[r("div",fe,[e[21]||(e[21]=r("span",null,"组织架构",-1)),t(x,{type:"text",size:"small",onClick:H},{icon:a(()=>[t(S(se))]),_:1}),t(x,{type:"text",size:"small",onClick:L},{icon:a(()=>[t(S(ue))]),_:1})]),t(G,{selectedKeys:h.value,"onUpdate:selectedKeys":e[3]||(e[3]=l=>h.value=l),expandedKeys:w.value,"onUpdate:expandedKeys":e[4]||(e[4]=l=>w.value=l),"tree-data":Q.value,"field-names":{title:"name",key:"key",children:"children"},onSelect:B},{title:a(({name:l,type:v,status:I})=>[r("span",null,[v==="company"?(_(),U(z,{key:0,color:"blue",size:"small"},{default:a(()=>[...e[22]||(e[22]=[s("公司",-1)])]),_:1})):v==="department"?(_(),U(z,{key:1,color:"green",size:"small"},{default:a(()=>[...e[23]||(e[23]=[s("部门",-1)])]),_:1})):v==="team"?(_(),U(z,{key:2,color:"orange",size:"small"},{default:a(()=>[...e[24]||(e[24]=[s("小组",-1)])]),_:1})):C("",!0),s(" "+K(l)+" ",1),I==="inactive"?(_(),U(Z,{key:3,status:"error"})):C("",!0)])]),_:1},8,["selectedKeys","expandedKeys","tree-data"])]),r("div",_e,[r("div",ke,[e[25]||(e[25]=r("span",null,"单位详情",-1)),y.value?(_(),O("span",ge," 当前选中: "+K(y.value.name),1)):C("",!0)]),t(W,{columns:N,"data-source":V.value,pagination:Y,"row-selection":{selectedRowKeys:M.value,onChange:q}},{bodyCell:a(({column:l,record:v})=>[l.key==="status"?(_(),U(z,{key:0,color:v.status==="active"?"green":"red"},{default:a(()=>[s(K(v.status==="active"?"启用":"禁用"),1)]),_:2},1032,["color"])):C("",!0),l.key==="action"?(_(),O(de,{key:1},[t(x,{type:"link",size:"small",onClick:I=>F(v)},{default:a(()=>[...e[26]||(e[26]=[s("编辑",-1)])]),_:1},8,["onClick"]),t(x,{type:"link",size:"small",onClick:I=>j(v)},{default:a(()=>[s(K(v.status==="active"?"禁用":"启用"),1)]),_:2},1032,["onClick"]),t(x,{type:"link",size:"small",danger:"",onClick:I=>P(v)},{default:a(()=>[...e[27]||(e[27]=[s("删除",-1)])]),_:1},8,["onClick"])],64)):C("",!0)]),_:1},8,["data-source","pagination","row-selection"])])]),t(ae,{open:T.value,"onUpdate:open":e[15]||(e[15]=l=>T.value=l),title:E.value?"编辑单位":"新增单位",width:"700px",onOk:J},{default:a(()=>[t(te,{model:o,layout:"vertical"},{default:a(()=>[t(A,{gutter:16},{default:a(()=>[t(f,{span:12},{default:a(()=>[t(i,{label:"单位名称",required:""},{default:a(()=>[t(b,{value:o.name,"onUpdate:value":e[5]||(e[5]=l=>o.name=l),placeholder:"输入单位名称"},null,8,["value"])]),_:1})]),_:1}),t(f,{span:12},{default:a(()=>[t(i,{label:"单位编码",required:""},{default:a(()=>[t(b,{value:o.code,"onUpdate:value":e[6]||(e[6]=l=>o.code=l),placeholder:"输入单位编码"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(A,{gutter:16},{default:a(()=>[t(f,{span:12},{default:a(()=>[t(i,{label:"单位类型"},{default:a(()=>[t(g,{value:o.type,"onUpdate:value":e[7]||(e[7]=l=>o.type=l),placeholder:"选择单位类型"},{default:a(()=>[t(u,{value:"company"},{default:a(()=>[...e[28]||(e[28]=[s("公司",-1)])]),_:1}),t(u,{value:"department"},{default:a(()=>[...e[29]||(e[29]=[s("部门",-1)])]),_:1}),t(u,{value:"team"},{default:a(()=>[...e[30]||(e[30]=[s("小组",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),t(f,{span:12},{default:a(()=>[t(i,{label:"上级单位"},{default:a(()=>[t(g,{value:o.parent,"onUpdate:value":e[8]||(e[8]=l=>o.parent=l),placeholder:"选择上级单位"},{default:a(()=>[t(u,{value:""},{default:a(()=>[...e[31]||(e[31]=[s("无",-1)])]),_:1}),t(u,{value:"1"},{default:a(()=>[...e[32]||(e[32]=[s("总公司",-1)])]),_:1}),t(u,{value:"2"},{default:a(()=>[...e[33]||(e[33]=[s("质量部",-1)])]),_:1}),t(u,{value:"3"},{default:a(()=>[...e[34]||(e[34]=[s("技术部",-1)])]),_:1}),t(u,{value:"4"},{default:a(()=>[...e[35]||(e[35]=[s("市场部",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t(A,{gutter:16},{default:a(()=>[t(f,{span:12},{default:a(()=>[t(i,{label:"负责人"},{default:a(()=>[t(b,{value:o.manager,"onUpdate:value":e[9]||(e[9]=l=>o.manager=l),placeholder:"输入负责人姓名"},null,8,["value"])]),_:1})]),_:1}),t(f,{span:12},{default:a(()=>[t(i,{label:"联系电话"},{default:a(()=>[t(b,{value:o.phone,"onUpdate:value":e[10]||(e[10]=l=>o.phone=l),placeholder:"输入联系电话"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(A,{gutter:16},{default:a(()=>[t(f,{span:12},{default:a(()=>[t(i,{label:"状态"},{default:a(()=>[t(g,{value:o.status,"onUpdate:value":e[11]||(e[11]=l=>o.status=l),placeholder:"选择状态"},{default:a(()=>[t(u,{value:"active"},{default:a(()=>[...e[36]||(e[36]=[s("启用",-1)])]),_:1}),t(u,{value:"inactive"},{default:a(()=>[...e[37]||(e[37]=[s("禁用",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),t(f,{span:12},{default:a(()=>[t(i,{label:"排序号"},{default:a(()=>[t(X,{value:o.sortOrder,"onUpdate:value":e[12]||(e[12]=l=>o.sortOrder=l),placeholder:"输入排序号",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(i,{label:"地址"},{default:a(()=>[t(b,{value:o.address,"onUpdate:value":e[13]||(e[13]=l=>o.address=l),placeholder:"输入详细地址"},null,8,["value"])]),_:1}),t(i,{label:"描述"},{default:a(()=>[t(ee,{value:o.description,"onUpdate:value":e[14]||(e[14]=l=>o.description=l),placeholder:"输入单位描述",rows:3},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])])}}}),Ue=re(xe,[["__scopeId","data-v-421ed832"]]);export{Ue as default};
