import{_ as me}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as g,a as O,k as pe,m as fe,c as ve,o as h,e as U,x as t,q as a,h as o,y as c,P as be,s as i,S as _e,p as q,f as z,t as p,G as ke,H as we,I as ge,C as A}from"./index-D0CfuKge.js";const Ce={class:"production-team"},ye={class:"page-header"},Ie={class:"search-form"},xe={class:"table-container"},ce={__name:"ProductionTeam",setup(Ne){const L=g(!1),C=g(!1),M=g(!1),N=g(!1),D=g(),u=O({teamCode:"",teamName:"",departmentId:void 0,leaderName:"",status:void 0}),d=O({id:"",teamCode:"",teamName:"",departmentId:void 0,leaderId:void 0,workShift:"day",memberCount:1,phone:"",workLocation:"",responsibilities:"",remark:"",status:"1"}),Q=[{title:"班组编码",dataIndex:"teamCode",key:"teamCode",width:120,fixed:"left"},{title:"班组名称",dataIndex:"teamName",key:"teamName",width:150,fixed:"left"},{title:"所属部门",dataIndex:"departmentName",key:"departmentName",width:120,customRender:({record:l})=>V(l.departmentId)},{title:"班组长",dataIndex:"leaderName",key:"leaderName",width:100,customRender:({record:l})=>E(l.leaderId)},{title:"工作班次",dataIndex:"workShift",key:"workShift",width:100},{title:"班组人数",dataIndex:"memberCount",key:"memberCount",width:100,sorter:!0},{title:"联系电话",dataIndex:"phone",key:"phone",width:120},{title:"工作地点",dataIndex:"workLocation",key:"workLocation",width:150},{title:"状态",dataIndex:"status",key:"status",width:80},{title:"创建时间",dataIndex:"createTime",key:"createTime",width:150},{title:"操作",key:"action",width:200,fixed:"right"}],_=g([{id:"1",teamCode:"TEAM001",teamName:"装配一组",departmentId:"1",leaderId:"1",workShift:"day",memberCount:8,phone:"13800138001",workLocation:"生产车间A区",responsibilities:"负责电子产品的装配工作，包括PCB焊接、组件装配等",remark:"技术骨干班组",status:"1",createTime:"2024-01-15 10:30:00",updateTime:"2024-01-15 10:30:00"},{id:"2",teamCode:"TEAM002",teamName:"装配二组",departmentId:"1",leaderId:"2",workShift:"night",memberCount:6,phone:"13800138002",workLocation:"生产车间A区",responsibilities:"负责夜间装配工作，确保生产连续性",remark:"夜班班组",status:"1",createTime:"2024-01-15 10:35:00",updateTime:"2024-01-15 10:35:00"},{id:"3",teamCode:"TEAM003",teamName:"测试班组",departmentId:"4",leaderId:"3",workShift:"day",memberCount:5,phone:"13800138003",workLocation:"测试车间B区",responsibilities:"负责产品质量测试，包括功能测试、性能测试等",remark:"质量控制关键班组",status:"1",createTime:"2024-01-15 10:40:00",updateTime:"2024-01-15 10:40:00"},{id:"4",teamCode:"TEAM004",teamName:"包装班组",departmentId:"2",leaderId:"4",workShift:"afternoon",memberCount:7,phone:"13800138004",workLocation:"包装车间C区",responsibilities:"负责产品包装、标识和入库工作",remark:"包装效率优秀班组",status:"1",createTime:"2024-01-15 10:45:00",updateTime:"2024-01-15 10:45:00"}]),y=O({current:1,pageSize:10,total:4,showSizeChanger:!0,showQuickJumper:!0,showTotal:(l,e)=>`第 ${e[0]}-${e[1]} 条，共 ${l} 条`}),m=g({}),K={teamCode:[{required:!0,message:"请输入班组编码",trigger:"blur"}],teamName:[{required:!0,message:"请输入班组名称",trigger:"blur"}],departmentId:[{required:!0,message:"请选择所属部门",trigger:"change"}],leaderId:[{required:!0,message:"请选择班组长",trigger:"change"}],workShift:[{required:!0,message:"请选择工作班次",trigger:"change"}],memberCount:[{required:!0,message:"请输入班组人数",trigger:"blur"}]},V=l=>({1:"生产一部",2:"生产二部",3:"生产三部",4:"质量部"})[l]||"未知",E=l=>({1:"张三",2:"李四",3:"王五",4:"赵六"})[l]||"未指定",B=l=>({day:"白班",night:"夜班",morning:"早班",afternoon:"中班",mixed:"混合班"})[l]||"未知",$=l=>({day:"blue",night:"purple",morning:"green",afternoon:"orange",mixed:"cyan"})[l]||"default",W=pe(()=>N.value?"编辑生产班组":"新增生产班组"),P=()=>{y.current=1,I()},X=()=>{Object.assign(u,{teamCode:"",teamName:"",departmentId:void 0,leaderName:"",status:void 0}),P()},Y=(l,e,v)=>{y.current=l.current,y.pageSize=l.pageSize,I()},Z=()=>{N.value=!1,C.value=!0,F()},ee=l=>{N.value=!0,C.value=!0,Object.assign(d,l)},te=l=>{m.value=l,M.value=!0},ae=l=>{const e=_.value.findIndex(v=>v.id===l);e>-1&&(_.value.splice(e,1),A.success("删除成功"),I())},le=async()=>{try{if(await D.value.validate(),N.value){const l=_.value.findIndex(e=>e.id===d.id);l>-1&&(_.value[l]={...d,updateTime:new Date().toLocaleString()},A.success("更新成功"))}else{const l=(Math.max(..._.value.map(v=>parseInt(v.id)))+1).toString(),e={...d,id:l,createTime:new Date().toLocaleString(),updateTime:new Date().toLocaleString()};_.value.push(e),A.success("新增成功")}C.value=!1,I()}catch(l){console.error("表单验证失败:",l)}},oe=()=>{C.value=!1,F()},F=()=>{var l;Object.assign(d,{id:"",teamCode:"",teamName:"",departmentId:void 0,leaderId:void 0,workShift:"day",memberCount:1,phone:"",workLocation:"",responsibilities:"",remark:"",status:"1"}),(l=D.value)==null||l.resetFields()},I=()=>{L.value=!0,setTimeout(()=>{let l=[..._.value];u.teamCode&&(l=l.filter(e=>e.teamCode.includes(u.teamCode))),u.teamName&&(l=l.filter(e=>e.teamName.includes(u.teamName))),u.departmentId&&(l=l.filter(e=>e.departmentId===u.departmentId)),u.leaderName&&(l=l.filter(e=>E(e.leaderId).includes(u.leaderName))),u.status!==void 0&&(l=l.filter(e=>e.status===u.status)),y.total=l.length,L.value=!1},500)};return fe(()=>{I()}),(l,e)=>{const v=i("a-button"),k=i("a-input"),s=i("a-form-item"),r=i("a-select-option"),x=i("a-select"),R=i("a-form"),S=i("a-tag"),ne=i("a-popconfirm"),de=i("a-space"),ue=i("a-table"),b=i("a-col"),T=i("a-row"),re=i("a-input-number"),j=i("a-radio"),ie=i("a-radio-group"),G=i("a-textarea"),H=i("a-modal"),f=i("a-descriptions-item"),se=i("a-descriptions");return h(),ve("div",Ce,[U("div",ye,[e[19]||(e[19]=U("h2",null,"生产班组管理",-1)),t(v,{type:"primary",onClick:Z},{icon:a(()=>[t(c(be))]),default:a(()=>[e[18]||(e[18]=o(" 新增班组 ",-1))]),_:1})]),U("div",Ie,[t(R,{layout:"inline",model:u,onFinish:P},{default:a(()=>[t(s,{label:"班组编码"},{default:a(()=>[t(k,{value:u.teamCode,"onUpdate:value":e[0]||(e[0]=n=>u.teamCode=n),placeholder:"请输入班组编码","allow-clear":"",style:{width:"200px"}},null,8,["value"])]),_:1}),t(s,{label:"班组名称"},{default:a(()=>[t(k,{value:u.teamName,"onUpdate:value":e[1]||(e[1]=n=>u.teamName=n),placeholder:"请输入班组名称","allow-clear":"",style:{width:"200px"}},null,8,["value"])]),_:1}),t(s,{label:"所属部门"},{default:a(()=>[t(x,{value:u.departmentId,"onUpdate:value":e[2]||(e[2]=n=>u.departmentId=n),placeholder:"请选择所属部门","allow-clear":"",style:{width:"200px"}},{default:a(()=>[t(r,{value:"1"},{default:a(()=>[...e[20]||(e[20]=[o("生产一部",-1)])]),_:1}),t(r,{value:"2"},{default:a(()=>[...e[21]||(e[21]=[o("生产二部",-1)])]),_:1}),t(r,{value:"3"},{default:a(()=>[...e[22]||(e[22]=[o("生产三部",-1)])]),_:1}),t(r,{value:"4"},{default:a(()=>[...e[23]||(e[23]=[o("质量部",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(s,{label:"班组长"},{default:a(()=>[t(k,{value:u.leaderName,"onUpdate:value":e[3]||(e[3]=n=>u.leaderName=n),placeholder:"请输入班组长姓名","allow-clear":"",style:{width:"200px"}},null,8,["value"])]),_:1}),t(s,{label:"状态"},{default:a(()=>[t(x,{value:u.status,"onUpdate:value":e[4]||(e[4]=n=>u.status=n),placeholder:"请选择状态","allow-clear":"",style:{width:"120px"}},{default:a(()=>[t(r,{value:"1"},{default:a(()=>[...e[24]||(e[24]=[o("启用",-1)])]),_:1}),t(r,{value:"0"},{default:a(()=>[...e[25]||(e[25]=[o("禁用",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(s,null,{default:a(()=>[t(v,{type:"primary","html-type":"submit"},{icon:a(()=>[t(c(_e))]),default:a(()=>[e[26]||(e[26]=o(" 搜索 ",-1))]),_:1}),t(v,{style:{"margin-left":"8px"},onClick:X},{default:a(()=>[...e[27]||(e[27]=[o("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),U("div",xe,[t(ue,{columns:Q,"data-source":_.value,loading:L.value,pagination:y,"row-key":"id",onChange:Y},{bodyCell:a(({column:n,record:w})=>[n.key==="status"?(h(),q(S,{key:0,color:w.status==="1"?"green":"red"},{default:a(()=>[o(p(w.status==="1"?"启用":"禁用"),1)]),_:2},1032,["color"])):z("",!0),n.key==="workShift"?(h(),q(S,{key:1,color:$(w.workShift)},{default:a(()=>[o(p(B(w.workShift)),1)]),_:2},1032,["color"])):z("",!0),n.key==="action"?(h(),q(de,{key:2},{default:a(()=>[t(v,{type:"link",size:"small",onClick:J=>ee(w)},{icon:a(()=>[t(c(ke))]),default:a(()=>[e[28]||(e[28]=o(" 编辑 ",-1))]),_:1},8,["onClick"]),t(v,{type:"link",size:"small",onClick:J=>te(w)},{icon:a(()=>[t(c(we))]),default:a(()=>[e[29]||(e[29]=o(" 查看 ",-1))]),_:1},8,["onClick"]),t(ne,{title:"确定要删除这个班组吗？",onConfirm:J=>ae(w.id),"ok-text":"确定","cancel-text":"取消"},{default:a(()=>[t(v,{type:"link",size:"small",danger:""},{icon:a(()=>[t(c(ge))]),default:a(()=>[e[30]||(e[30]=o(" 删除 ",-1))]),_:1})]),_:1},8,["onConfirm"])]),_:2},1024)):z("",!0)]),_:1},8,["data-source","loading","pagination"])]),t(H,{visible:C.value,"onUpdate:visible":e[16]||(e[16]=n=>C.value=n),title:W.value,width:"900px",onOk:le,onCancel:oe},{default:a(()=>[t(R,{ref_key:"formRef",ref:D,model:d,rules:K,layout:"vertical"},{default:a(()=>[t(T,{gutter:16},{default:a(()=>[t(b,{span:12},{default:a(()=>[t(s,{label:"班组编码",name:"teamCode"},{default:a(()=>[t(k,{value:d.teamCode,"onUpdate:value":e[5]||(e[5]=n=>d.teamCode=n),placeholder:"请输入班组编码"},null,8,["value"])]),_:1})]),_:1}),t(b,{span:12},{default:a(()=>[t(s,{label:"班组名称",name:"teamName"},{default:a(()=>[t(k,{value:d.teamName,"onUpdate:value":e[6]||(e[6]=n=>d.teamName=n),placeholder:"请输入班组名称"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(T,{gutter:16},{default:a(()=>[t(b,{span:12},{default:a(()=>[t(s,{label:"所属部门",name:"departmentId"},{default:a(()=>[t(x,{value:d.departmentId,"onUpdate:value":e[7]||(e[7]=n=>d.departmentId=n),placeholder:"请选择所属部门"},{default:a(()=>[t(r,{value:"1"},{default:a(()=>[...e[31]||(e[31]=[o("生产一部",-1)])]),_:1}),t(r,{value:"2"},{default:a(()=>[...e[32]||(e[32]=[o("生产二部",-1)])]),_:1}),t(r,{value:"3"},{default:a(()=>[...e[33]||(e[33]=[o("生产三部",-1)])]),_:1}),t(r,{value:"4"},{default:a(()=>[...e[34]||(e[34]=[o("质量部",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),t(b,{span:12},{default:a(()=>[t(s,{label:"班组长",name:"leaderId"},{default:a(()=>[t(x,{value:d.leaderId,"onUpdate:value":e[8]||(e[8]=n=>d.leaderId=n),placeholder:"请选择班组长"},{default:a(()=>[t(r,{value:"1"},{default:a(()=>[...e[35]||(e[35]=[o("张三",-1)])]),_:1}),t(r,{value:"2"},{default:a(()=>[...e[36]||(e[36]=[o("李四",-1)])]),_:1}),t(r,{value:"3"},{default:a(()=>[...e[37]||(e[37]=[o("王五",-1)])]),_:1}),t(r,{value:"4"},{default:a(()=>[...e[38]||(e[38]=[o("赵六",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t(T,{gutter:16},{default:a(()=>[t(b,{span:8},{default:a(()=>[t(s,{label:"工作班次",name:"workShift"},{default:a(()=>[t(x,{value:d.workShift,"onUpdate:value":e[9]||(e[9]=n=>d.workShift=n),placeholder:"请选择工作班次"},{default:a(()=>[t(r,{value:"day"},{default:a(()=>[...e[39]||(e[39]=[o("白班",-1)])]),_:1}),t(r,{value:"night"},{default:a(()=>[...e[40]||(e[40]=[o("夜班",-1)])]),_:1}),t(r,{value:"morning"},{default:a(()=>[...e[41]||(e[41]=[o("早班",-1)])]),_:1}),t(r,{value:"afternoon"},{default:a(()=>[...e[42]||(e[42]=[o("中班",-1)])]),_:1}),t(r,{value:"mixed"},{default:a(()=>[...e[43]||(e[43]=[o("混合班",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),t(b,{span:8},{default:a(()=>[t(s,{label:"班组人数",name:"memberCount"},{default:a(()=>[t(re,{value:d.memberCount,"onUpdate:value":e[10]||(e[10]=n=>d.memberCount=n),placeholder:"请输入班组人数",min:1,max:50,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(b,{span:8},{default:a(()=>[t(s,{label:"状态",name:"status"},{default:a(()=>[t(ie,{value:d.status,"onUpdate:value":e[11]||(e[11]=n=>d.status=n)},{default:a(()=>[t(j,{value:"1"},{default:a(()=>[...e[44]||(e[44]=[o("启用",-1)])]),_:1}),t(j,{value:"0"},{default:a(()=>[...e[45]||(e[45]=[o("禁用",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t(T,{gutter:16},{default:a(()=>[t(b,{span:12},{default:a(()=>[t(s,{label:"联系电话",name:"phone"},{default:a(()=>[t(k,{value:d.phone,"onUpdate:value":e[12]||(e[12]=n=>d.phone=n),placeholder:"请输入联系电话"},null,8,["value"])]),_:1})]),_:1}),t(b,{span:12},{default:a(()=>[t(s,{label:"工作地点",name:"workLocation"},{default:a(()=>[t(k,{value:d.workLocation,"onUpdate:value":e[13]||(e[13]=n=>d.workLocation=n),placeholder:"请输入工作地点"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(s,{label:"主要职责",name:"responsibilities"},{default:a(()=>[t(G,{value:d.responsibilities,"onUpdate:value":e[14]||(e[14]=n=>d.responsibilities=n),placeholder:"请输入班组主要职责",rows:3},null,8,["value"])]),_:1}),t(s,{label:"备注",name:"remark"},{default:a(()=>[t(G,{value:d.remark,"onUpdate:value":e[15]||(e[15]=n=>d.remark=n),placeholder:"请输入备注信息",rows:2},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"]),t(H,{visible:M.value,"onUpdate:visible":e[17]||(e[17]=n=>M.value=n),title:"班组详情",width:"800px",footer:null},{default:a(()=>[t(se,{column:3,bordered:""},{default:a(()=>[t(f,{label:"班组编码"},{default:a(()=>[o(p(m.value.teamCode),1)]),_:1}),t(f,{label:"班组名称"},{default:a(()=>[o(p(m.value.teamName),1)]),_:1}),t(f,{label:"所属部门"},{default:a(()=>[o(p(V(m.value.departmentId)),1)]),_:1}),t(f,{label:"班组长"},{default:a(()=>[o(p(E(m.value.leaderId)),1)]),_:1}),t(f,{label:"工作班次"},{default:a(()=>[t(S,{color:$(m.value.workShift)},{default:a(()=>[o(p(B(m.value.workShift)),1)]),_:1},8,["color"])]),_:1}),t(f,{label:"班组人数"},{default:a(()=>[o(p(m.value.memberCount)+"人",1)]),_:1}),t(f,{label:"联系电话"},{default:a(()=>[o(p(m.value.phone),1)]),_:1}),t(f,{label:"工作地点"},{default:a(()=>[o(p(m.value.workLocation),1)]),_:1}),t(f,{label:"状态"},{default:a(()=>[t(S,{color:m.value.status==="1"?"green":"red"},{default:a(()=>[o(p(m.value.status==="1"?"启用":"禁用"),1)]),_:1},8,["color"])]),_:1}),t(f,{label:"创建时间"},{default:a(()=>[o(p(m.value.createTime),1)]),_:1}),t(f,{label:"更新时间"},{default:a(()=>[o(p(m.value.updateTime),1)]),_:1}),t(f,{label:"主要职责",span:3},{default:a(()=>[o(p(m.value.responsibilities||"无"),1)]),_:1}),t(f,{label:"备注",span:3},{default:a(()=>[o(p(m.value.remark||"无"),1)]),_:1})]),_:1})]),_:1},8,["visible"])])}}},he=me(ce,[["__scopeId","data-v-a3d63ba2"]]);export{he as default};
