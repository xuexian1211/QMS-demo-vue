import{d as re,r as v,a as R,m as pe,c as fe,e as N,x as t,q as a,s,o as T,h as l,y as F,P as ve,S as ce,p as $,f as D,t as r,C as j}from"./index-Ozo2vowX.js";import{_ as me}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ye={class:"system-config"},ge={class:"page-header"},_e={class:"search-section"},be=re({__name:"Config",setup(ke){const E=v(""),q=v(),U=v(),S=v(!1),g=v(!1),K=v(!1),k=v("新增配置"),A=v(),_=R({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:o=>`共 ${o} 条记录`}),Q=[{title:"配置名称",dataIndex:"name",key:"name",width:200},{title:"配置键名",dataIndex:"configKey",key:"configKey",width:200},{title:"配置分类",dataIndex:"category",key:"category",width:100},{title:"数据类型",dataIndex:"dataType",key:"dataType",width:100},{title:"是否加密",dataIndex:"isEncrypted",key:"isEncrypted",width:100},{title:"状态",dataIndex:"status",key:"status",width:80},{title:"更新时间",dataIndex:"updatedAt",key:"updatedAt",width:150},{title:"操作",key:"action",width:150,fixed:"right"}],u=R({name:"",configKey:"",category:"",configValue:"",dataType:"string",defaultValue:"",description:"",required:!1,isEncrypted:!1,status:"active"}),h={name:[{required:!0,message:"请输入配置名称",trigger:"blur"}],configKey:[{required:!0,message:"请输入配置键名",trigger:"blur"}],category:[{required:!0,message:"请选择配置分类",trigger:"change"}],configValue:[{required:!0,message:"请输入配置值",trigger:"blur"}],dataType:[{required:!0,message:"请选择数据类型",trigger:"change"}]},C=v([{id:1,name:"系统标题",configKey:"system.title",category:"system",configValue:"质量管理系统",dataType:"string",defaultValue:"QMS",description:"系统页面标题显示",required:!0,isEncrypted:!1,status:"active",createdAt:"2024-01-01 10:00:00",updatedAt:"2024-01-15 14:30:00"},{id:2,name:"数据库连接池大小",configKey:"database.pool.size",category:"system",configValue:"20",dataType:"number",defaultValue:"10",description:"数据库连接池最大连接数",required:!1,isEncrypted:!1,status:"active",createdAt:"2024-01-01 10:00:00",updatedAt:"2024-01-10 09:15:00"},{id:3,name:"邮件服务器密码",configKey:"email.server.password",category:"notification",configValue:"******",dataType:"string",defaultValue:"",description:"邮件服务器认证密码",required:!0,isEncrypted:!0,status:"active",createdAt:"2024-01-05 16:20:00",updatedAt:"2024-01-05 16:20:00"}]),d=v({}),I=()=>{_.current=1,b()},G=()=>{E.value="",q.value=void 0,U.value=void 0,I()},H=o=>{_.current=o.current,_.pageSize=o.pageSize,b()},L=()=>{k.value="新增配置",B(),g.value=!0},W=o=>{k.value="编辑配置",Object.assign(u,o),g.value=!0},X=o=>{d.value=o,K.value=!0},Y=o=>{const e=C.value.findIndex(c=>c.id===o);e>-1&&(C.value.splice(e,1),j.success("删除成功"),b())},Z=o=>{o.status=o.status==="active"?"inactive":"active",j.success(`配置已${o.status==="active"?"启用":"禁用"}`)},ee=async()=>{try{await A.value.validate(),j.success(k.value==="新增配置"?"创建成功":"更新成功"),g.value=!1,b()}catch(o){console.error("表单验证失败:",o)}},te=()=>{g.value=!1,B()},B=()=>{var o;Object.assign(u,{name:"",configKey:"",category:"",configValue:"",dataType:"string",defaultValue:"",description:"",required:!1,isEncrypted:!1,status:"active"}),(o=A.value)==null||o.resetFields()},b=()=>{S.value=!0,setTimeout(()=>{_.total=C.value.length,S.value=!1},500)},ae=o=>({system:"系统配置",business:"业务配置",security:"安全配置",notification:"通知配置"})[o]||o,le=o=>({string:"字符串",number:"数字",boolean:"布尔值",json:"JSON对象",array:"数组"})[o]||o;return pe(()=>{b()}),(o,e)=>{const c=s("a-button"),w=s("a-input"),m=s("a-col"),i=s("a-select-option"),x=s("a-select"),M=s("a-row"),V=s("a-switch"),z=s("a-tag"),ne=s("a-popconfirm"),oe=s("a-space"),ue=s("a-table"),f=s("a-form-item"),J=s("a-textarea"),se=s("a-form"),P=s("a-modal"),p=s("a-descriptions-item"),de=s("a-typography-paragraph"),ie=s("a-descriptions");return T(),fe("div",ye,[N("div",ge,[e[16]||(e[16]=N("h2",null,"系统配置管理",-1)),t(c,{type:"primary",onClick:L},{icon:a(()=>[t(F(ve))]),default:a(()=>[e[15]||(e[15]=l(" 新增配置 ",-1))]),_:1})]),N("div",_e,[t(M,{gutter:16},{default:a(()=>[t(m,{span:6},{default:a(()=>[t(w,{value:E.value,"onUpdate:value":e[0]||(e[0]=n=>E.value=n),placeholder:"搜索配置名称或键名",onPressEnter:I},{prefix:a(()=>[t(F(ce))]),_:1},8,["value"])]),_:1}),t(m,{span:4},{default:a(()=>[t(x,{value:q.value,"onUpdate:value":e[1]||(e[1]=n=>q.value=n),placeholder:"配置分类",allowClear:""},{default:a(()=>[t(i,{value:"system"},{default:a(()=>[...e[17]||(e[17]=[l("系统配置",-1)])]),_:1}),t(i,{value:"business"},{default:a(()=>[...e[18]||(e[18]=[l("业务配置",-1)])]),_:1}),t(i,{value:"security"},{default:a(()=>[...e[19]||(e[19]=[l("安全配置",-1)])]),_:1}),t(i,{value:"notification"},{default:a(()=>[...e[20]||(e[20]=[l("通知配置",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(m,{span:4},{default:a(()=>[t(x,{value:U.value,"onUpdate:value":e[2]||(e[2]=n=>U.value=n),placeholder:"状态",allowClear:""},{default:a(()=>[t(i,{value:"active"},{default:a(()=>[...e[21]||(e[21]=[l("启用",-1)])]),_:1}),t(i,{value:"inactive"},{default:a(()=>[...e[22]||(e[22]=[l("禁用",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(m,{span:4},{default:a(()=>[t(c,{type:"primary",onClick:I},{default:a(()=>[...e[23]||(e[23]=[l("查询",-1)])]),_:1}),t(c,{style:{"margin-left":"8px"},onClick:G},{default:a(()=>[...e[24]||(e[24]=[l("重置",-1)])]),_:1})]),_:1})]),_:1})]),t(ue,{columns:Q,"data-source":C.value,pagination:_,loading:S.value,onChange:H,"row-key":"id"},{bodyCell:a(({column:n,record:y})=>[n.key==="status"?(T(),$(V,{key:0,checked:y.status==="active",onChange:O=>Z(y)},null,8,["checked","onChange"])):D("",!0),n.key==="isEncrypted"?(T(),$(z,{key:1,color:y.isEncrypted?"orange":"blue"},{default:a(()=>[l(r(y.isEncrypted?"加密":"明文"),1)]),_:2},1032,["color"])):D("",!0),n.key==="action"?(T(),$(oe,{key:2},{default:a(()=>[t(c,{type:"link",size:"small",onClick:O=>X(y)},{default:a(()=>[...e[25]||(e[25]=[l("查看",-1)])]),_:1},8,["onClick"]),t(c,{type:"link",size:"small",onClick:O=>W(y)},{default:a(()=>[...e[26]||(e[26]=[l("编辑",-1)])]),_:1},8,["onClick"]),t(ne,{title:"确定要删除这个配置吗？",onConfirm:O=>Y(y.id)},{default:a(()=>[t(c,{type:"link",size:"small",danger:""},{default:a(()=>[...e[27]||(e[27]=[l("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:2},1024)):D("",!0)]),_:1},8,["data-source","pagination","loading"]),t(P,{open:g.value,"onUpdate:open":e[13]||(e[13]=n=>g.value=n),title:k.value,width:"800px",onOk:ee,onCancel:te},{default:a(()=>[t(se,{ref_key:"formRef",ref:A,model:u,rules:h,layout:"vertical"},{default:a(()=>[t(f,{label:"配置名称",name:"name"},{default:a(()=>[t(w,{value:u.name,"onUpdate:value":e[3]||(e[3]=n=>u.name=n),placeholder:"请输入配置名称"},null,8,["value"])]),_:1}),t(f,{label:"配置键名",name:"configKey"},{default:a(()=>[t(w,{value:u.configKey,"onUpdate:value":e[4]||(e[4]=n=>u.configKey=n),placeholder:"请输入配置键名"},null,8,["value"])]),_:1}),t(f,{label:"配置分类",name:"category"},{default:a(()=>[t(x,{value:u.category,"onUpdate:value":e[5]||(e[5]=n=>u.category=n),placeholder:"请选择配置分类"},{default:a(()=>[t(i,{value:"system"},{default:a(()=>[...e[28]||(e[28]=[l("系统配置",-1)])]),_:1}),t(i,{value:"business"},{default:a(()=>[...e[29]||(e[29]=[l("业务配置",-1)])]),_:1}),t(i,{value:"security"},{default:a(()=>[...e[30]||(e[30]=[l("安全配置",-1)])]),_:1}),t(i,{value:"notification"},{default:a(()=>[...e[31]||(e[31]=[l("通知配置",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(f,{label:"配置值",name:"configValue"},{default:a(()=>[t(J,{value:u.configValue,"onUpdate:value":e[6]||(e[6]=n=>u.configValue=n),rows:4,placeholder:"请输入配置值"},null,8,["value"])]),_:1}),t(f,{label:"数据类型",name:"dataType"},{default:a(()=>[t(x,{value:u.dataType,"onUpdate:value":e[7]||(e[7]=n=>u.dataType=n),placeholder:"请选择数据类型"},{default:a(()=>[t(i,{value:"string"},{default:a(()=>[...e[32]||(e[32]=[l("字符串",-1)])]),_:1}),t(i,{value:"number"},{default:a(()=>[...e[33]||(e[33]=[l("数字",-1)])]),_:1}),t(i,{value:"boolean"},{default:a(()=>[...e[34]||(e[34]=[l("布尔值",-1)])]),_:1}),t(i,{value:"json"},{default:a(()=>[...e[35]||(e[35]=[l("JSON对象",-1)])]),_:1}),t(i,{value:"array"},{default:a(()=>[...e[36]||(e[36]=[l("数组",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(f,{label:"默认值",name:"defaultValue"},{default:a(()=>[t(w,{value:u.defaultValue,"onUpdate:value":e[8]||(e[8]=n=>u.defaultValue=n),placeholder:"请输入默认值"},null,8,["value"])]),_:1}),t(f,{label:"描述",name:"description"},{default:a(()=>[t(J,{value:u.description,"onUpdate:value":e[9]||(e[9]=n=>u.description=n),rows:3,placeholder:"请输入配置描述"},null,8,["value"])]),_:1}),t(M,{gutter:16},{default:a(()=>[t(m,{span:8},{default:a(()=>[t(f,{label:"是否必填",name:"required"},{default:a(()=>[t(V,{checked:u.required,"onUpdate:checked":e[10]||(e[10]=n=>u.required=n)},null,8,["checked"])]),_:1})]),_:1}),t(m,{span:8},{default:a(()=>[t(f,{label:"是否加密",name:"isEncrypted"},{default:a(()=>[t(V,{checked:u.isEncrypted,"onUpdate:checked":e[11]||(e[11]=n=>u.isEncrypted=n)},null,8,["checked"])]),_:1})]),_:1}),t(m,{span:8},{default:a(()=>[t(f,{label:"状态",name:"status"},{default:a(()=>[t(V,{checked:u.status==="active",onChange:e[12]||(e[12]=n=>u.status=n?"active":"inactive")},null,8,["checked"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"]),t(P,{open:K.value,"onUpdate:open":e[14]||(e[14]=n=>K.value=n),title:"配置详情",width:"700px",footer:null},{default:a(()=>[t(ie,{column:1,bordered:""},{default:a(()=>[t(p,{label:"配置名称"},{default:a(()=>[l(r(d.value.name),1)]),_:1}),t(p,{label:"配置键名"},{default:a(()=>[l(r(d.value.configKey),1)]),_:1}),t(p,{label:"配置分类"},{default:a(()=>[l(r(ae(d.value.category)),1)]),_:1}),t(p,{label:"配置值"},{default:a(()=>[t(de,{copyable:""},{default:a(()=>[l(r(d.value.configValue),1)]),_:1})]),_:1}),t(p,{label:"数据类型"},{default:a(()=>[l(r(le(d.value.dataType)),1)]),_:1}),t(p,{label:"默认值"},{default:a(()=>[l(r(d.value.defaultValue),1)]),_:1}),t(p,{label:"是否必填"},{default:a(()=>[l(r(d.value.required?"是":"否"),1)]),_:1}),t(p,{label:"是否加密"},{default:a(()=>[t(z,{color:d.value.isEncrypted?"orange":"blue"},{default:a(()=>[l(r(d.value.isEncrypted?"加密":"明文"),1)]),_:1},8,["color"])]),_:1}),t(p,{label:"状态"},{default:a(()=>[t(z,{color:d.value.status==="active"?"green":"red"},{default:a(()=>[l(r(d.value.status==="active"?"启用":"禁用"),1)]),_:1},8,["color"])]),_:1}),t(p,{label:"描述"},{default:a(()=>[l(r(d.value.description),1)]),_:1}),t(p,{label:"创建时间"},{default:a(()=>[l(r(d.value.createdAt),1)]),_:1}),t(p,{label:"更新时间"},{default:a(()=>[l(r(d.value.updatedAt),1)]),_:1})]),_:1})]),_:1},8,["open"])])}}}),xe=me(be,[["__scopeId","data-v-b6274981"]]);export{xe as default};
