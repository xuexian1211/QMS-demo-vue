import{d as Y,r as c,a as B,E as N,m as I,c as A,e as d,x as e,q as a,s,o as h,h as C,p as O,f as H,u as V,C as K}from"./index-BhbkSrG8.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"material-disposal-create"},T={class:"page-header"},E={class:"header-content"},F={class:"header-actions"},$={class:"form-container"},j={class:"main-info-section"},G={class:"form-tabs"},L={class:"tab-content"},z={class:"tab-content"},J={class:"tab-content"},W=Y({__name:"MaterialDisposalCreate",setup(X){const g=V(),_=c(),m=c(!1),b=c("supplier"),l=B({disposalNo:"",discoveryDate:N(),discoveryDepartment:"品质部（IQC）",otherDepartment:"",discoverer:"",materialName:"",materialModel:"",batchNo:"",purchaseOrderNo:"",supplierName:"",supplierCode:"",contactPerson:"",contactPhone:"",defectPhenomenon:"",defectCategory:"",defectQuantity:null,totalQuantity:null,isolationArea:"",isolationMark:"黄色标牌",isolationPerson:""}),D={discoveryDate:[{required:!0,message:"请选择发现时间",trigger:"change"}],discoveryDepartment:[{required:!0,message:"请选择发现部门",trigger:"change"}],otherDepartment:[{required:!0,message:"请输入其他部门",trigger:"blur"}],discoverer:[{required:!0,message:"请输入发现人",trigger:"blur"}],materialName:[{required:!0,message:"请输入物料名称",trigger:"blur"}],materialModel:[{required:!0,message:"请输入物料型号",trigger:"blur"}],batchNo:[{required:!0,message:"请输入批次号",trigger:"blur"}],purchaseOrderNo:[{required:!0,message:"请输入采购订单号",trigger:"blur"}],supplierName:[{required:!0,message:"请输入供应商名称",trigger:"blur"}],supplierCode:[{required:!0,message:"请输入供应商编码",trigger:"blur"}],contactPerson:[{required:!0,message:"请输入联系人",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],defectPhenomenon:[{required:!0,message:"请输入不合格现象",trigger:"blur"}],defectCategory:[{required:!0,message:"请选择不合格类别",trigger:"change"}],defectQuantity:[{required:!0,message:"请输入不合格数量",trigger:"blur"}],totalQuantity:[{required:!0,message:"请输入总数量",trigger:"blur"}],isolationArea:[{required:!0,message:"请输入隔离区域",trigger:"blur"}],isolationMark:[{required:!0,message:"请选择隔离标识",trigger:"change"}],isolationPerson:[{required:!0,message:"请输入隔离人",trigger:"blur"}]},P=()=>{const p=N().format("YYYYMMDD"),t=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`LHBHG${p}${t}`},U=()=>{g.push("/production-quality/exception-handling/material-disposal")},M=async()=>{try{await _.value.validate(),m.value=!0,setTimeout(()=>{K.success("保存成功"),g.push("/production-quality/exception-handling/material-disposal")},1e3)}catch(p){console.error("表单验证失败:",p)}finally{m.value=!1}};return I(()=>{l.disposalNo=P()}),(p,t)=>{const y=s("a-button"),n=s("a-input"),o=s("a-form-item"),u=s("a-col"),k=s("a-date-picker"),v=s("a-select"),i=s("a-row"),f=s("a-tab-pane"),Q=s("a-textarea"),q=s("a-input-number"),x=s("a-tabs"),w=s("a-form");return h(),A("div",S,[d("div",T,[d("div",E,[t[23]||(t[23]=d("h2",{class:"page-title"},"来料不合格处置单-新增",-1)),d("div",F,[e(y,{onClick:U},{default:a(()=>[...t[21]||(t[21]=[C("返回",-1)])]),_:1}),e(y,{type:"primary",onClick:M,loading:m.value},{default:a(()=>[...t[22]||(t[22]=[C("保存",-1)])]),_:1},8,["loading"])])])]),d("div",$,[e(w,{ref_key:"formRef",ref:_,model:l,rules:D,layout:"vertical",class:"disposal-form"},{default:a(()=>[d("div",j,[t[24]||(t[24]=d("h3",{class:"section-title"},"基本信息",-1)),e(i,{gutter:16},{default:a(()=>[e(u,{span:6},{default:a(()=>[e(o,{label:"处置单号",name:"disposalNo"},{default:a(()=>[e(n,{value:l.disposalNo,"onUpdate:value":t[0]||(t[0]=r=>l.disposalNo=r),disabled:""},null,8,["value"])]),_:1})]),_:1}),e(u,{span:6},{default:a(()=>[e(o,{label:"发现时间",name:"discoveryDate",required:""},{default:a(()=>[e(k,{value:l.discoveryDate,"onUpdate:value":t[1]||(t[1]=r=>l.discoveryDate=r),"show-time":"",format:"YYYY-MM-DD HH:mm",placeholder:"请选择发现时间",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),e(u,{span:6},{default:a(()=>[e(o,{label:"发现部门",name:"discoveryDepartment",required:""},{default:a(()=>[e(v,{value:l.discoveryDepartment,"onUpdate:value":t[2]||(t[2]=r=>l.discoveryDepartment=r),placeholder:"请选择发现部门",options:[{value:"品质部（IQC）",label:"品质部（IQC）"},{value:"品质部（IPQC）",label:"品质部（IPQC）"},{value:"品质部（FQC）",label:"品质部（FQC）"},{value:"生产部",label:"生产部"},{value:"其他",label:"其他"}]},null,8,["value"])]),_:1})]),_:1}),e(u,{span:6},{default:a(()=>[e(o,{label:"发现人",name:"discoverer",required:""},{default:a(()=>[e(n,{value:l.discoverer,"onUpdate:value":t[3]||(t[3]=r=>l.discoverer=r),placeholder:"请输入发现人"},null,8,["value"])]),_:1})]),_:1})]),_:1}),l.discoveryDepartment==="其他"?(h(),O(i,{key:0,gutter:16},{default:a(()=>[e(u,{span:6},{default:a(()=>[e(o,{label:"其他部门",name:"otherDepartment",required:""},{default:a(()=>[e(n,{value:l.otherDepartment,"onUpdate:value":t[4]||(t[4]=r=>l.otherDepartment=r),placeholder:"请输入其他部门"},null,8,["value"])]),_:1})]),_:1})]),_:1})):H("",!0),e(i,{gutter:16},{default:a(()=>[e(u,{span:6},{default:a(()=>[e(o,{label:"物料名称",name:"materialName",required:""},{default:a(()=>[e(n,{value:l.materialName,"onUpdate:value":t[5]||(t[5]=r=>l.materialName=r),placeholder:"请输入物料名称"},null,8,["value"])]),_:1})]),_:1}),e(u,{span:6},{default:a(()=>[e(o,{label:"物料型号",name:"materialModel",required:""},{default:a(()=>[e(n,{value:l.materialModel,"onUpdate:value":t[6]||(t[6]=r=>l.materialModel=r),placeholder:"请输入物料型号"},null,8,["value"])]),_:1})]),_:1}),e(u,{span:6},{default:a(()=>[e(o,{label:"批次号",name:"batchNo",required:""},{default:a(()=>[e(n,{value:l.batchNo,"onUpdate:value":t[7]||(t[7]=r=>l.batchNo=r),placeholder:"请输入批次号"},null,8,["value"])]),_:1})]),_:1}),e(u,{span:6},{default:a(()=>[e(o,{label:"采购订单号",name:"purchaseOrderNo",required:""},{default:a(()=>[e(n,{value:l.purchaseOrderNo,"onUpdate:value":t[8]||(t[8]=r=>l.purchaseOrderNo=r),placeholder:"请输入采购订单号"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),d("div",G,[e(x,{activeKey:b.value,"onUpdate:activeKey":t[20]||(t[20]=r=>b.value=r),type:"card"},{default:a(()=>[e(f,{key:"supplier",tab:"供应商信息"},{default:a(()=>[d("div",L,[e(i,{gutter:16},{default:a(()=>[e(u,{span:8},{default:a(()=>[e(o,{label:"供应商名称",name:"supplierName",required:""},{default:a(()=>[e(n,{value:l.supplierName,"onUpdate:value":t[9]||(t[9]=r=>l.supplierName=r),placeholder:"请输入供应商名称"},null,8,["value"])]),_:1})]),_:1}),e(u,{span:8},{default:a(()=>[e(o,{label:"供应商编码",name:"supplierCode",required:""},{default:a(()=>[e(n,{value:l.supplierCode,"onUpdate:value":t[10]||(t[10]=r=>l.supplierCode=r),placeholder:"请输入供应商编码"},null,8,["value"])]),_:1})]),_:1}),e(u,{span:8},{default:a(()=>[e(o,{label:"联系人",name:"contactPerson",required:""},{default:a(()=>[e(n,{value:l.contactPerson,"onUpdate:value":t[11]||(t[11]=r=>l.contactPerson=r),placeholder:"请输入联系人"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(i,{gutter:16},{default:a(()=>[e(u,{span:8},{default:a(()=>[e(o,{label:"联系电话",name:"contactPhone",required:""},{default:a(()=>[e(n,{value:l.contactPhone,"onUpdate:value":t[12]||(t[12]=r=>l.contactPhone=r),placeholder:"请输入联系电话"},null,8,["value"])]),_:1})]),_:1})]),_:1})])]),_:1}),e(f,{key:"defect",tab:"不合格详情"},{default:a(()=>[d("div",z,[e(i,{gutter:16},{default:a(()=>[e(u,{span:12},{default:a(()=>[e(o,{label:"不合格现象",name:"defectPhenomenon",required:""},{default:a(()=>[e(Q,{value:l.defectPhenomenon,"onUpdate:value":t[13]||(t[13]=r=>l.defectPhenomenon=r),rows:4,placeholder:"请详细描述不合格现象"},null,8,["value"])]),_:1})]),_:1}),e(u,{span:12},{default:a(()=>[e(o,{label:"不合格类别",name:"defectCategory",required:""},{default:a(()=>[e(v,{value:l.defectCategory,"onUpdate:value":t[14]||(t[14]=r=>l.defectCategory=r),placeholder:"请选择不合格类别",options:[{value:"尺寸超差",label:"尺寸超差"},{value:"外观缺陷",label:"外观缺陷"},{value:"性能不符",label:"性能不符"},{value:"材质问题",label:"材质问题"},{value:"包装问题",label:"包装问题"},{value:"其他",label:"其他"}]},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(i,{gutter:16},{default:a(()=>[e(u,{span:12},{default:a(()=>[e(o,{label:"不合格数量",name:"defectQuantity",required:""},{default:a(()=>[e(q,{value:l.defectQuantity,"onUpdate:value":t[15]||(t[15]=r=>l.defectQuantity=r),min:1,placeholder:"请输入不合格数量",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),e(u,{span:12},{default:a(()=>[e(o,{label:"总数量",name:"totalQuantity",required:""},{default:a(()=>[e(q,{value:l.totalQuantity,"onUpdate:value":t[16]||(t[16]=r=>l.totalQuantity=r),min:1,placeholder:"请输入总数量",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1})])]),_:1}),e(f,{key:"isolation",tab:"隔离措施"},{default:a(()=>[d("div",J,[e(i,{gutter:16},{default:a(()=>[e(u,{span:8},{default:a(()=>[e(o,{label:"隔离区域",name:"isolationArea",required:""},{default:a(()=>[e(n,{value:l.isolationArea,"onUpdate:value":t[17]||(t[17]=r=>l.isolationArea=r),placeholder:"请输入隔离区域"},null,8,["value"])]),_:1})]),_:1}),e(u,{span:8},{default:a(()=>[e(o,{label:"隔离标识",name:"isolationMark",required:""},{default:a(()=>[e(v,{value:l.isolationMark,"onUpdate:value":t[18]||(t[18]=r=>l.isolationMark=r),placeholder:"请选择隔离标识",options:[{value:"红色标牌",label:"红色标牌"},{value:"黄色标牌",label:"黄色标牌"},{value:"蓝色标牌",label:"蓝色标牌"}]},null,8,["value"])]),_:1})]),_:1}),e(u,{span:8},{default:a(()=>[e(o,{label:"隔离人",name:"isolationPerson",required:""},{default:a(()=>[e(n,{value:l.isolationPerson,"onUpdate:value":t[19]||(t[19]=r=>l.isolationPerson=r),placeholder:"请输入隔离人"},null,8,["value"])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1},8,["activeKey"])])]),_:1},8,["model"])])])}}}),ae=R(W,[["__scopeId","data-v-0461532b"]]);export{ae as default};
