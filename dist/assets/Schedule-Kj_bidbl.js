import{d as Ne,r as f,a as Z,m as he,c as U,e as w,x as t,q as a,s as i,o as x,h as o,y as ee,P as Re,S as Ue,p as _,f as g,t as r,F as Ee,n as Se,C as q}from"./index-C4MSyl8P.js";import{_ as Me}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ie={class:"system-schedule"},Ve={class:"page-header"},qe={class:"search-section"},Pe={key:0},De={key:1,style:{color:"#999"}},Oe={class:"cron-help"},ze={key:0,class:"cron-preview"},Ge=Ne({__name:"Schedule",setup($e){const P=f(""),D=f(),O=f();f(""),f("");const z=f(!1),C=f(!1),G=f(!1),E=f(!1),S=f(""),M=f(!1),$=f(),p=f({}),N=Z({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:s=>`共 ${s} 条记录`}),te=[{title:"表达式",dataIndex:"expression",key:"expression",width:150},{title:"说明",dataIndex:"description",key:"description"},{title:"执行时间",dataIndex:"example",key:"example"}],ae=[{expression:"0 0 12 * * ?",description:"每天中午12点执行",example:"12:00:00"},{expression:"0 15 10 ? * *",description:"每天上午10:15执行",example:"10:15:00"},{expression:"0 15 10 * * ?",description:"每天上午10:15执行",example:"10:15:00"},{expression:"0 15 10 * * ? *",description:"每天上午10:15执行",example:"10:15:00"},{expression:"0 15 10 * * ? 2005",description:"2005年每天上午10:15执行",example:"10:15:00"},{expression:"0 * 14 * * ?",description:"每天下午2点到2:59期间的每1分钟执行",example:"14:00:00-14:59:00"},{expression:"0 0/5 14 * * ?",description:"每天下午2点到2:55期间的每5分钟执行",example:"14:00,14:05..."},{expression:"0 0/5 14,18 * * ?",description:"每天下午2点到2:55期间和下午6点到6:55期间的每5分钟执行",example:"14:00,14:05..."},{expression:"0 0-5 14 * * ?",description:"每天下午2点到下午2:05期间的每1分钟执行",example:"14:00-14:05"},{expression:"0 10,44 14 ? 3 WED",description:"三月的星期三的下午2:10和2:44执行",example:"周三 14:10,14:44"},{expression:"0 15 10 ? * MON-FRI",description:"周一至周五的上午10:15执行",example:"工作日 10:15"},{expression:"0 15 10 15 * ?",description:"每月15日上午10:15执行",example:"每月15日 10:15"},{expression:"0 15 10 L * ?",description:"每月最后一日的上午10:15执行",example:"月末 10:15"},{expression:"0 15 10 ? * 6L",description:"每月的最后一个星期五上午10:15执行",example:"最后一个周五 10:15"},{expression:"0 15 10 ? * 6L 2002-2005",description:"2002年至2005年的每月的最后一个星期五上午10:15执行",example:"最后一个周五 10:15"},{expression:"0 15 10 ? * 6#3",description:"每月的第三个星期五上午10:15执行",example:"第三个周五 10:15"},{expression:"0 0 2 1 * ?",description:"每月1号凌晨2点执行",example:"每月1日 02:00"},{expression:"0 0 2 * * MON",description:"每周一凌晨2点执行",example:"周一 02:00"},{expression:"0 0 2 * * 1",description:"每周一凌晨2点执行（等同于MON）",example:"周一 02:00"},{expression:"0 0,30 14-16 ? * 1",description:"每周一下午2点、2:30、3点、3:30、4点、4:30执行",example:"周一 14:00,14:30..."},{expression:"0 0/30 * * * ?",description:"每30分钟执行一次",example:"每30分钟"},{expression:"0 0 */2 * * ?",description:"每2小时执行一次",example:"每2小时"},{expression:"0 0 8-18 * * ?",description:"每天上午8点到下午6点每小时执行",example:"08:00-18:00"}],le=[{title:"任务ID",dataIndex:"id",key:"id",width:80,fixed:"left"},{title:"任务名称",dataIndex:"taskName",key:"taskName",width:180,ellipsis:!0},{title:"任务类型",dataIndex:"taskType",key:"taskType",width:120},{title:"调度配置",key:"schedule",width:200,customRender:({record:s})=>{const e=s.scheduleType||"cron";return e==="cron"?s.cronExpression:e==="interval"?`每${s.intervalValue||""}${s.intervalUnit||""}`:e==="once"?s.executeTime||"单次执行":"手动触发"}},{title:"优先级",dataIndex:"priority",key:"priority",width:80,align:"center"},{title:"状态",dataIndex:"status",key:"status",width:100,align:"center"},{title:"执行信息",key:"execution",width:150,customRender:({record:s})=>`${s.executionCount||0}次执行`},{title:"最近执行",dataIndex:"lastRunTime",key:"lastRunTime",width:150,customRender:({text:s})=>s||"从未执行"},{title:"下次执行",dataIndex:"nextRunTime",key:"nextRunTime",width:150,customRender:({text:s})=>s||"-"},{title:"创建时间",dataIndex:"createTime",key:"createTime",width:150},{title:"操作",key:"action",width:240,fixed:"right"}],l=Z({taskName:"",taskGroup:"",taskType:"",description:"",scheduleType:"cron",cronExpression:"",intervalValue:5,intervalUnit:"minutes",executeTime:null,status:"stopped",executeClass:"",executeMethod:"",parameters:"",timeout:0,retryCount:3,priority:5,concurrent:!1,successNotification:"none",failureNotification:"email",notificationRecipients:[]}),ne={taskName:[{required:!0,message:"请输入任务名称",trigger:"blur"}],taskGroup:[{required:!0,message:"请选择任务分组",trigger:"change"}],taskType:[{required:!0,message:"请选择任务类型",trigger:"change"}],scheduleType:[{required:!0,message:"请选择调度类型",trigger:"change"}],cronExpression:[{validator:(s,e)=>l.scheduleType==="cron"&&!e?Promise.reject("请输入Cron表达式"):Promise.resolve(),trigger:"blur"}],interval:[{validator:(s,e)=>l.scheduleType==="interval"&&(!l.intervalValue||!l.intervalUnit)?Promise.reject("请设置执行间隔"):Promise.resolve(),trigger:"change"}],executeTime:[{validator:(s,e)=>l.scheduleType==="once"&&!e?Promise.reject("请选择执行时间"):Promise.resolve(),trigger:"change"}],status:[{required:!0,message:"请选择任务状态",trigger:"change"}],executeClass:[{required:!0,message:"请输入执行类",trigger:"blur"}],executeMethod:[{required:!0,message:"请输入执行方法",trigger:"blur"}],parameters:[{validator:(s,e)=>{if(e)try{return JSON.parse(e),Promise.resolve()}catch{return Promise.reject("任务参数必须是有效的JSON格式")}return Promise.resolve()},trigger:"blur"}],timeout:[{type:"number",min:0,message:"超时时间必须大于等于0",trigger:"blur"}],retryCount:[{type:"number",min:0,message:"重试次数必须大于等于0",trigger:"blur"}],priority:[{required:!0,message:"请选择优先级",trigger:"change"}],notificationRecipients:[{validator:(s,e)=>(l.successNotification!=="none"||l.failureNotification!=="none")&&(!e||e.length===0)?Promise.reject("请选择通知接收人"):Promise.resolve(),trigger:"change"}]},b=f([{id:1001,taskName:"每日数据同步",taskGroup:"data",taskType:"data_sync",status:"running",scheduleType:"cron",cronExpression:"0 0 2 * * ?",intervalValue:null,intervalUnit:null,executeTime:null,nextRunTime:"2024-01-16 02:00:00",lastRunTime:"2024-01-15 02:00:00",executeClass:"com.qms.task.DataSyncTask",executeMethod:"execute",parameters:'{"syncType":"full","targetDb":"mysql"}',timeout:3600,retryCount:3,priority:8,concurrent:!1,successNotification:"email",failureNotification:"email",notificationRecipients:["admin@company.com","dev@company.com"],description:"每天凌晨2点执行全量数据同步",createTime:"2024-01-10 10:00:00",updateTime:"2024-01-15 02:00:00"},{id:1002,taskName:"周报表生成",taskGroup:"report",taskType:"report_generate",status:"running",scheduleType:"cron",cronExpression:"0 0 8 ? * MON",intervalValue:null,intervalUnit:null,executeTime:null,nextRunTime:"2024-01-22 08:00:00",lastRunTime:"2024-01-15 08:00:00",executeClass:"com.qms.task.ReportGenerateTask",executeMethod:"generateWeeklyReport",parameters:'{"reportType":"weekly","email":"admin@company.com"}',timeout:1800,retryCount:2,priority:6,concurrent:!1,successNotification:"email",failureNotification:"webhook",notificationRecipients:["admin@company.com"],description:"每周一早上8点生成周报表并发送邮件",createTime:"2024-01-08 14:30:00",updateTime:"2024-01-15 08:00:00"},{id:1003,taskName:"日志清理任务",taskGroup:"maintenance",taskType:"cleanup",status:"stopped",scheduleType:"cron",cronExpression:"0 0 3 1 * ?",intervalValue:null,intervalUnit:null,executeTime:null,nextRunTime:null,lastRunTime:"2024-01-01 03:00:00",executeClass:"com.qms.task.LogCleanupTask",executeMethod:"cleanup",parameters:'{"retentionDays":30,"logTypes":["app","api","system"]}',timeout:1200,retryCount:1,priority:4,concurrent:!1,successNotification:"none",failureNotification:"email",notificationRecipients:["ops@company.com"],description:"每月1号凌晨3点清理30天前的日志文件",createTime:"2024-01-01 10:00:00",updateTime:"2024-01-01 10:00:00"},{id:1004,taskName:"实时监控检查",taskGroup:"monitor",taskType:"monitor",status:"running",scheduleType:"interval",cronExpression:null,intervalValue:5,intervalUnit:"minutes",executeTime:null,nextRunTime:"2024-01-15 14:30:00",lastRunTime:"2024-01-15 14:25:00",executeClass:"com.qms.task.HealthCheckTask",executeMethod:"check",parameters:'{"checks":["cpu","memory","disk","network"]}',timeout:300,retryCount:0,priority:9,concurrent:!1,successNotification:"none",failureNotification:"sms",notificationRecipients:["ops@company.com"],description:"每5分钟检查系统健康状态",createTime:"2024-01-01 09:15:00",updateTime:"2024-01-15 14:25:00"},{id:1005,taskName:"数据备份任务",taskGroup:"system",taskType:"backup",status:"paused",scheduleType:"cron",cronExpression:"0 30 4 * * ?",intervalValue:null,intervalUnit:null,executeTime:null,nextRunTime:null,lastRunTime:"2024-01-14 04:30:00",executeClass:"com.qms.task.DataBackupTask",executeMethod:"backup",parameters:'{"backupType":"full","compress":true,"encrypt":true}',timeout:7200,retryCount:2,priority:9,concurrent:!1,successNotification:"email",failureNotification:"email",notificationRecipients:["admin@company.com","backup@company.com"],description:"每天凌晨4:30执行数据备份",createTime:"2024-01-05 16:20:00",updateTime:"2024-01-14 04:30:00"},{id:1006,taskName:"月度统计报告",taskGroup:"report",taskType:"import_export",status:"running",scheduleType:"cron",cronExpression:"0 0 6 5 * ?",intervalValue:null,intervalUnit:null,executeTime:null,nextRunTime:"2024-02-05 06:00:00",lastRunTime:"2024-01-05 06:00:00",executeClass:"com.qms.task.MonthlyExportTask",executeMethod:"exportStatistics",parameters:'{"format":"excel","includeCharts":true}',timeout:3600,retryCount:3,priority:5,concurrent:!1,successNotification:"email",failureNotification:"webhook",notificationRecipients:["admin@company.com"],description:"每月5号导出上月统计数据",createTime:"2024-01-01 13:00:00",updateTime:"2024-01-05 06:00:00"}]),j=()=>{N.current=1,h()},se=()=>{P.value="",D.value=void 0,O.value=void 0,j()},oe=s=>{N.current=s.current,N.pageSize=s.pageSize,h()},ie=()=>{M.value=!1,F(),C.value=!0},ue=s=>{M.value=!0,Object.assign(l,s),C.value=!0},re=s=>{p.value=s,G.value=!0},pe=s=>{const e=b.value.findIndex(c=>c.id===s);e>-1&&(b.value.splice(e,1),q.success("删除成功"),h())},de=s=>{const e=b.value.findIndex(c=>c.id===s.id);if(e>-1){const c=s.status==="running"?"stopped":"running";b.value[e].status=c,b.value[e].nextRunTime=c==="running"?"2024-01-16 02:00:00":null,q.success(`${c==="running"?"启动":"停止"}成功`)}},ce=async()=>{try{if(await $.value.validate(),M.value){const s=b.value.findIndex(e=>e.id===l.id);s>-1&&(b.value[s]={...l},q.success("更新成功"))}else{const s={...l,id:Date.now(),nextRunTime:l.status==="running"?"2024-01-16 02:00:00":null,lastRunTime:null,createTime:new Date().toLocaleString(),updateTime:new Date().toLocaleString()};b.value.unshift(s),q.success("创建成功")}C.value=!1,h()}catch(s){console.error("表单验证失败:",s)}},me=()=>{C.value=!1,F()},h=()=>{z.value=!0,setTimeout(()=>{N.total=b.value.length,z.value=!1},500)},F=()=>{var s;Object.assign(l,{taskName:"",taskType:"",description:"",cronExpression:"",status:"stopped",executeClass:"",executeMethod:"",parameters:"",timeout:0,retryCount:3,priority:5}),(s=$.value)==null||s.resetFields()},J=s=>({running:"processing",stopped:"default",paused:"warning",error:"error"})[s]||"default",W=s=>({running:"运行中",stopped:"已停止",paused:"已暂停",error:"异常"})[s]||s,ve=s=>({data_sync:"数据同步",report_generate:"报表生成",cleanup:"数据清理",backup:"数据备份",notification:"消息通知"})[s]||s,Q=s=>({"0 0 2 * * ?":"每天凌晨2点执行","0 0 8 ? * MON":"每周一早上8点执行","0 0 3 1 * ?":"每月1号凌晨3点执行","0 30 4 * * ?":"每天凌晨4:30执行"})[s]||"自定义执行时间",fe=s=>{l.cronExpression=s,E.value=!1,xe()},xe=()=>{l.cronExpression?S.value=Q(l.cronExpression):S.value=""};return he(()=>{h()}),(s,e)=>{const c=i("a-button"),H=i("a-space"),R=i("a-input"),u=i("a-col"),y=i("a-select"),T=i("a-row"),A=i("a-badge"),K=i("a-tag"),ye=i("a-tooltip"),ke=i("a-popconfirm"),X=i("a-table"),I=i("a-divider"),d=i("a-form-item"),Y=i("a-textarea"),ge=i("QuestionCircleOutlined"),B=i("a-input-number"),be=i("a-input-group"),_e=i("a-date-picker"),Te=i("a-switch"),k=i("a-select-option"),Ce=i("a-form"),L=i("a-modal"),m=i("a-descriptions-item"),we=i("a-descriptions");return x(),U("div",Ie,[w("div",Ve,[e[28]||(e[28]=w("h2",null,"系统调度",-1)),t(H,null,{default:a(()=>[t(c,{type:"primary",onClick:ie},{icon:a(()=>[t(ee(Re))]),default:a(()=>[e[27]||(e[27]=o(" 新建调度任务 ",-1))]),_:1})]),_:1})]),w("div",qe,[t(T,{gutter:16},{default:a(()=>[t(u,{span:5},{default:a(()=>[t(R,{value:P.value,"onUpdate:value":e[0]||(e[0]=n=>P.value=n),placeholder:"搜索任务名称/描述",onPressEnter:j},{prefix:a(()=>[t(ee(Ue))]),_:1},8,["value"])]),_:1}),t(u,{span:4},{default:a(()=>[t(y,{value:D.value,"onUpdate:value":e[1]||(e[1]=n=>D.value=n),placeholder:"任务状态",allowClear:"",options:[{value:"running",label:"运行中"},{value:"stopped",label:"已停止"},{value:"paused",label:"已暂停"},{value:"error",label:"异常"}]},null,8,["value"])]),_:1}),t(u,{span:4},{default:a(()=>[t(y,{value:O.value,"onUpdate:value":e[2]||(e[2]=n=>O.value=n),placeholder:"任务类型",allowClear:"",options:[{value:"data_sync",label:"数据同步"},{value:"report_generate",label:"报表生成"},{value:"cleanup",label:"数据清理"},{value:"backup",label:"数据备份"},{value:"notification",label:"消息通知"}]},null,8,["value"])]),_:1}),t(u,{span:5},{default:a(()=>[t(c,{type:"primary",onClick:j},{default:a(()=>[...e[29]||(e[29]=[o("查询",-1)])]),_:1}),t(c,{style:{"margin-left":"8px"},onClick:se},{default:a(()=>[...e[30]||(e[30]=[o("重置",-1)])]),_:1})]),_:1})]),_:1})]),t(X,{columns:le,"data-source":b.value,pagination:N,loading:z.value,onChange:oe,"row-key":"id"},{bodyCell:a(({column:n,record:v})=>[n.key==="status"?(x(),_(A,{key:0,status:J(v.status),text:W(v.status)},null,8,["status","text"])):g("",!0),n.key==="cronExpression"?(x(),_(ye,{key:1,title:Q(v.cronExpression)},{default:a(()=>[t(K,{color:"blue"},{default:a(()=>[o(r(v.cronExpression),1)]),_:2},1024)]),_:2},1032,["title"])):g("",!0),n.key==="nextRunTime"?(x(),U(Ee,{key:2},[v.status==="running"?(x(),U("span",Pe,r(v.nextRunTime),1)):(x(),U("span",De,"-"))],64)):g("",!0),n.key==="action"?(x(),_(H,{key:3},{default:a(()=>[t(c,{type:"link",size:"small",onClick:V=>re(v)},{default:a(()=>[...e[31]||(e[31]=[o("查看",-1)])]),_:1},8,["onClick"]),t(c,{type:"link",size:"small",onClick:V=>ue(v)},{default:a(()=>[...e[32]||(e[32]=[o("编辑",-1)])]),_:1},8,["onClick"]),t(c,{type:"link",size:"small",onClick:V=>de(v),class:Se(v.status==="running"?"danger-link":"")},{default:a(()=>[o(r(v.status==="running"?"停止":"启动"),1)]),_:2},1032,["onClick","class"]),t(ke,{title:"确定要删除这个调度任务吗？",onConfirm:V=>pe(v.id)},{default:a(()=>[t(c,{type:"link",size:"small",danger:""},{default:a(()=>[...e[33]||(e[33]=[o("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:2},1024)):g("",!0)]),_:1},8,["data-source","pagination","loading"]),t(L,{open:C.value,"onUpdate:open":e[24]||(e[24]=n=>C.value=n),title:M.value?"编辑调度任务":"新建调度任务",width:"900px",onOk:ce,onCancel:me},{default:a(()=>[t(Ce,{ref_key:"formRef",ref:$,model:l,rules:ne,layout:"vertical"},{default:a(()=>[t(I,{orientation:"left"},{default:a(()=>[...e[34]||(e[34]=[o("基本信息",-1)])]),_:1}),t(T,{gutter:16},{default:a(()=>[t(u,{span:12},{default:a(()=>[t(d,{label:"任务名称",name:"taskName"},{default:a(()=>[t(R,{value:l.taskName,"onUpdate:value":e[3]||(e[3]=n=>l.taskName=n),placeholder:"请输入任务名称"},null,8,["value"])]),_:1})]),_:1}),t(u,{span:12},{default:a(()=>[t(d,{label:"任务分组",name:"taskGroup"},{default:a(()=>[t(y,{value:l.taskGroup,"onUpdate:value":e[4]||(e[4]=n=>l.taskGroup=n),placeholder:"请选择任务分组",options:[{value:"system",label:"系统任务"},{value:"business",label:"业务任务"},{value:"data",label:"数据处理"},{value:"report",label:"报表任务"},{value:"maintenance",label:"维护任务"}]},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(T,{gutter:16},{default:a(()=>[t(u,{span:12},{default:a(()=>[t(d,{label:"任务类型",name:"taskType"},{default:a(()=>[t(y,{value:l.taskType,"onUpdate:value":e[5]||(e[5]=n=>l.taskType=n),placeholder:"请选择任务类型",options:[{value:"data_sync",label:"数据同步"},{value:"report_generate",label:"报表生成"},{value:"cleanup",label:"数据清理"},{value:"backup",label:"数据备份"},{value:"notification",label:"消息通知"},{value:"monitor",label:"监控检查"},{value:"import_export",label:"数据导入导出"}]},null,8,["value"])]),_:1})]),_:1}),t(u,{span:12},{default:a(()=>[t(d,{label:"任务优先级",name:"priority"},{default:a(()=>[t(y,{value:l.priority,"onUpdate:value":e[6]||(e[6]=n=>l.priority=n),placeholder:"请选择优先级",options:[{value:1,label:"最低 (1)"},{value:3,label:"较低 (3)"},{value:5,label:"普通 (5)"},{value:7,label:"较高 (7)"},{value:9,label:"最高 (9)"}]},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(d,{label:"任务描述",name:"description"},{default:a(()=>[t(Y,{value:l.description,"onUpdate:value":e[7]||(e[7]=n=>l.description=n),rows:2,placeholder:"请输入任务描述"},null,8,["value"])]),_:1}),t(I,{orientation:"left"},{default:a(()=>[...e[35]||(e[35]=[o("调度配置",-1)])]),_:1}),t(T,{gutter:16},{default:a(()=>[t(u,{span:8},{default:a(()=>[t(d,{label:"调度类型",name:"scheduleType"},{default:a(()=>[t(y,{value:l.scheduleType,"onUpdate:value":e[8]||(e[8]=n=>l.scheduleType=n),placeholder:"请选择调度类型",options:[{value:"cron",label:"Cron表达式"},{value:"interval",label:"固定间隔"},{value:"once",label:"单次执行"},{value:"manual",label:"手动触发"}]},null,8,["value"])]),_:1})]),_:1}),l.scheduleType==="cron"?(x(),_(u,{key:0,span:8},{default:a(()=>[t(d,{label:"Cron表达式",name:"cronExpression"},{default:a(()=>[t(R,{value:l.cronExpression,"onUpdate:value":e[9]||(e[9]=n=>l.cronExpression=n),placeholder:"如: 0 0 12 * * ?"},null,8,["value"]),w("div",Oe,[t(c,{type:"link",size:"small",onClick:e[10]||(e[10]=n=>E.value=!0)},{icon:a(()=>[t(ge)]),default:a(()=>[e[36]||(e[36]=o(" Cron帮助 ",-1))]),_:1}),S.value?(x(),U("span",ze,r(S.value),1)):g("",!0)])]),_:1})]),_:1})):g("",!0),l.scheduleType==="interval"?(x(),_(u,{key:1,span:8},{default:a(()=>[t(d,{label:"执行间隔",name:"interval"},{default:a(()=>[t(be,{compact:""},{default:a(()=>[t(B,{value:l.intervalValue,"onUpdate:value":e[11]||(e[11]=n=>l.intervalValue=n),min:1,style:{width:"60%"},placeholder:"间隔数值"},null,8,["value"]),t(y,{value:l.intervalUnit,"onUpdate:value":e[12]||(e[12]=n=>l.intervalUnit=n),style:{width:"40%"},options:[{value:"seconds",label:"秒"},{value:"minutes",label:"分钟"},{value:"hours",label:"小时"},{value:"days",label:"天"}]},null,8,["value"])]),_:1})]),_:1})]),_:1})):g("",!0),l.scheduleType==="once"?(x(),_(u,{key:2,span:8},{default:a(()=>[t(d,{label:"执行时间",name:"executeTime"},{default:a(()=>[t(_e,{value:l.executeTime,"onUpdate:value":e[13]||(e[13]=n=>l.executeTime=n),"show-time":"",style:{width:"100%"},placeholder:"选择执行时间"},null,8,["value"])]),_:1})]),_:1})):g("",!0),t(u,{span:8},{default:a(()=>[t(d,{label:"任务状态",name:"status"},{default:a(()=>[t(y,{value:l.status,"onUpdate:value":e[14]||(e[14]=n=>l.status=n),placeholder:"请选择任务状态",options:[{value:"running",label:"运行中"},{value:"stopped",label:"已停止"},{value:"paused",label:"已暂停"}]},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(I,{orientation:"left"},{default:a(()=>[...e[37]||(e[37]=[o("执行配置",-1)])]),_:1}),t(T,{gutter:16},{default:a(()=>[t(u,{span:12},{default:a(()=>[t(d,{label:"执行类",name:"executeClass"},{default:a(()=>[t(R,{value:l.executeClass,"onUpdate:value":e[15]||(e[15]=n=>l.executeClass=n),placeholder:"请输入执行类全路径"},null,8,["value"])]),_:1})]),_:1}),t(u,{span:12},{default:a(()=>[t(d,{label:"执行方法",name:"executeMethod"},{default:a(()=>[t(R,{value:l.executeMethod,"onUpdate:value":e[16]||(e[16]=n=>l.executeMethod=n),placeholder:"请输入执行方法名"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(d,{label:"任务参数",name:"parameters"},{default:a(()=>[t(Y,{value:l.parameters,"onUpdate:value":e[17]||(e[17]=n=>l.parameters=n),rows:3,placeholder:'JSON格式的任务参数，如: {"param1":"value1"}'},null,8,["value"])]),_:1}),t(T,{gutter:16},{default:a(()=>[t(u,{span:8},{default:a(()=>[t(d,{label:"超时时间(秒)",name:"timeout"},{default:a(()=>[t(B,{value:l.timeout,"onUpdate:value":e[18]||(e[18]=n=>l.timeout=n),min:0,style:{width:"100%"},placeholder:"0表示无限制"},null,8,["value"])]),_:1})]),_:1}),t(u,{span:8},{default:a(()=>[t(d,{label:"重试次数",name:"retryCount"},{default:a(()=>[t(B,{value:l.retryCount,"onUpdate:value":e[19]||(e[19]=n=>l.retryCount=n),min:0,style:{width:"100%"},placeholder:"失败重试次数"},null,8,["value"])]),_:1})]),_:1}),t(u,{span:8},{default:a(()=>[t(d,{label:"并发执行",name:"concurrent"},{default:a(()=>[t(Te,{checked:l.concurrent,"onUpdate:checked":e[20]||(e[20]=n=>l.concurrent=n),"checked-children":"允许","un-checked-children":"禁止"},null,8,["checked"]),e[38]||(e[38]=w("div",{style:{"margin-top":"4px",color:"#999","font-size":"12px"}}," 是否允许同一任务并发执行 ",-1))]),_:1})]),_:1})]),_:1}),t(I,{orientation:"left"},{default:a(()=>[...e[39]||(e[39]=[o("通知配置",-1)])]),_:1}),t(T,{gutter:16},{default:a(()=>[t(u,{span:12},{default:a(()=>[t(d,{label:"成功通知",name:"successNotification"},{default:a(()=>[t(y,{value:l.successNotification,"onUpdate:value":e[21]||(e[21]=n=>l.successNotification=n),placeholder:"请选择通知方式"},{default:a(()=>[t(k,{value:"none"},{default:a(()=>[...e[40]||(e[40]=[o("不通知",-1)])]),_:1}),t(k,{value:"email"},{default:a(()=>[...e[41]||(e[41]=[o("邮件通知",-1)])]),_:1}),t(k,{value:"sms"},{default:a(()=>[...e[42]||(e[42]=[o("短信通知",-1)])]),_:1}),t(k,{value:"webhook"},{default:a(()=>[...e[43]||(e[43]=[o("Webhook通知",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),t(u,{span:12},{default:a(()=>[t(d,{label:"失败通知",name:"failureNotification"},{default:a(()=>[t(y,{value:l.failureNotification,"onUpdate:value":e[22]||(e[22]=n=>l.failureNotification=n),placeholder:"请选择通知方式"},{default:a(()=>[t(k,{value:"none"},{default:a(()=>[...e[44]||(e[44]=[o("不通知",-1)])]),_:1}),t(k,{value:"email"},{default:a(()=>[...e[45]||(e[45]=[o("邮件通知",-1)])]),_:1}),t(k,{value:"sms"},{default:a(()=>[...e[46]||(e[46]=[o("短信通知",-1)])]),_:1}),t(k,{value:"webhook"},{default:a(()=>[...e[47]||(e[47]=[o("Webhook通知",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),l.successNotification!=="none"||l.failureNotification!=="none"?(x(),_(d,{key:0,label:"通知接收人",name:"notificationRecipients"},{default:a(()=>[t(y,{value:l.notificationRecipients,"onUpdate:value":e[23]||(e[23]=n=>l.notificationRecipients=n),mode:"multiple",placeholder:"请选择通知接收人",style:{width:"100%"}},{default:a(()=>[t(k,{value:"admin@company.com"},{default:a(()=>[...e[48]||(e[48]=[o("系统管理员",-1)])]),_:1}),t(k,{value:"dev@company.com"},{default:a(()=>[...e[49]||(e[49]=[o("开发团队",-1)])]),_:1}),t(k,{value:"ops@company.com"},{default:a(()=>[...e[50]||(e[50]=[o("运维团队",-1)])]),_:1})]),_:1},8,["value"])]),_:1})):g("",!0)]),_:1},8,["model"])]),_:1},8,["open","title"]),t(L,{open:E.value,"onUpdate:open":e[25]||(e[25]=n=>E.value=n),title:"Cron表达式帮助",width:"700px",footer:null},{default:a(()=>[t(X,{columns:te,"data-source":ae,pagination:!1,size:"small"},{bodyCell:a(({column:n,record:v})=>[n.key==="expression"?(x(),_(K,{key:0,color:"blue",onClick:V=>fe(v.expression)},{default:a(()=>[o(r(v.expression),1)]),_:2},1032,["onClick"])):g("",!0)]),_:1})]),_:1},8,["open"]),t(L,{open:G.value,"onUpdate:open":e[26]||(e[26]=n=>G.value=n),title:"调度任务详情",width:"800px",footer:null},{default:a(()=>[t(we,{column:2,bordered:""},{default:a(()=>[t(m,{label:"任务ID"},{default:a(()=>[o(r(p.value.id),1)]),_:1}),t(m,{label:"任务名称"},{default:a(()=>[o(r(p.value.taskName),1)]),_:1}),t(m,{label:"任务类型"},{default:a(()=>[o(r(ve(p.value.taskType)),1)]),_:1}),t(m,{label:"任务状态"},{default:a(()=>[t(A,{status:J(p.value.status),text:W(p.value.status)},null,8,["status","text"])]),_:1}),t(m,{label:"Cron表达式"},{default:a(()=>[o(r(p.value.cronExpression),1)]),_:1}),t(m,{label:"下次执行时间"},{default:a(()=>[o(r(p.value.nextRunTime||"-"),1)]),_:1}),t(m,{label:"执行类"},{default:a(()=>[o(r(p.value.executeClass),1)]),_:1}),t(m,{label:"执行方法"},{default:a(()=>[o(r(p.value.executeMethod),1)]),_:1}),t(m,{label:"超时时间"},{default:a(()=>[o(r(p.value.timeout||0)+"秒",1)]),_:1}),t(m,{label:"重试次数"},{default:a(()=>[o(r(p.value.retryCount)+"次",1)]),_:1}),t(m,{label:"优先级"},{default:a(()=>[o(r(p.value.priority),1)]),_:1}),t(m,{label:"创建时间"},{default:a(()=>[o(r(p.value.createTime),1)]),_:1}),t(m,{label:"更新时间"},{default:a(()=>[o(r(p.value.updateTime),1)]),_:1}),t(m,{label:"最后执行时间"},{default:a(()=>[o(r(p.value.lastRunTime||"-"),1)]),_:1}),t(m,{label:"任务描述",span:2},{default:a(()=>[o(r(p.value.description||"-"),1)]),_:1}),p.value.parameters?(x(),_(m,{key:0,label:"任务参数",span:2},{default:a(()=>[w("pre",null,r(p.value.parameters),1)]),_:1})):g("",!0)]),_:1})]),_:1},8,["open"])])}}}),Le=Me(Ge,[["__scopeId","data-v-4f48e32c"]]);export{Le as default};
