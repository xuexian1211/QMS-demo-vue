import{d as ke,r,a as Z,m as Ce,c as N,e as T,x as e,q as t,s,o as f,h as u,y as Q,P as xe,S as we,p as I,f as g,t as d,F as q,C as k}from"./index-BPMZt9Bz.js";import{E as Ue}from"./ExportOutlined-D_JI9KKd.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Se={class:"data-application"},Oe={class:"page-header"},Ee={class:"search-section"},Ne={class:"test-section"},Ie=ke({__name:"DataApplication",setup(De){const F=r(""),M=r(),z=r(),A=r(!1),C=r(!1),$=r(!1),w=r(!1),D=r(!1),P=r(),p=r({}),x=r({}),V=r(""),G=r(""),U=Z({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:n=>`共 ${n} 条记录`}),ee=[{title:"应用ID",dataIndex:"id",key:"id",width:80},{title:"应用名称",dataIndex:"appName",key:"appName",width:150},{title:"应用编码",dataIndex:"appCode",key:"appCode",width:150},{title:"应用类型",dataIndex:"appType",key:"appType",width:100},{title:"状态",dataIndex:"status",key:"status",width:80},{title:"排序",dataIndex:"sortOrder",key:"sortOrder",width:80},{title:"描述",dataIndex:"description",key:"description",ellipsis:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",width:150},{title:"操作",key:"action",width:250,fixed:"right"}],o=Z({appName:"",appCode:"",appType:"",description:"",status:"active",sortOrder:0,apiUrl:"",apiMethod:"GET",dataSource:"",updateFrequency:""}),ae={appName:[{required:!0,message:"请输入应用名称",trigger:"blur"}],appCode:[{required:!0,message:"请输入应用编码",trigger:"blur"}],appType:[{required:!0,message:"请选择应用类型",trigger:"change"}]},y=r([{id:5001,appName:"物料信息接口",appCode:"material_api",appType:"api",status:"active",description:"获取物料基础信息的REST API接口",sortOrder:1,createTime:"2024-01-10 10:00:00",updateTime:"2024-01-15 14:30:00",apiUrl:"http://api.example.com/materials",apiMethod:"GET"},{id:5002,appName:"国家标准行政区划",appCode:"national_region",appType:"region",status:"active",description:"国家标准行政区划数据，支持省市区三级联动",sortOrder:2,createTime:"2024-01-08 14:20:00",updateTime:"2024-01-14 09:15:00",dataSource:"national",updateFrequency:"weekly"},{id:5003,appName:"检验数据同步",appCode:"inspection_sync",appType:"sync",status:"active",description:"检验数据与外部系统同步应用",sortOrder:3,createTime:"2024-01-05 16:45:00",updateTime:"2024-01-12 11:20:00"},{id:5004,appName:"供应商数据集成",appCode:"supplier_integration",appType:"integration",status:"inactive",description:"供应商数据集成服务，支持多数据源整合",sortOrder:4,createTime:"2024-01-03 10:30:00",updateTime:"2024-01-10 15:45:00"},{id:5005,appName:"自定义行政区划",appCode:"custom_region",appType:"region",status:"active",description:"企业自定义行政区划数据",sortOrder:5,createTime:"2024-01-02 09:15:00",updateTime:"2024-01-08 16:20:00",dataSource:"custom",updateFrequency:"monthly"}]),L=()=>{U.current=1,h()},te=()=>{F.value="",M.value=void 0,z.value=void 0,L()},le=n=>{U.current=n.current,U.pageSize=n.pageSize,h()},ne=()=>{D.value=!1,J(),C.value=!0},oe=n=>{D.value=!0,Object.assign(o,n),C.value=!0},ue=n=>{p.value={...n},$.value=!0},pe=n=>{x.value={...n},V.value="",G.value="",w.value=!0},se=n=>{k.info(`配置 ${n.appName} 功能开发中...`)},ie=n=>{const a=y.value.findIndex(v=>v.id===n);a>-1&&(y.value.splice(a,1),k.success("删除成功"),h())},de=n=>{const a=y.value.findIndex(v=>v.id===n.id);a>-1&&(y.value[a].status=n.status==="active"?"inactive":"active",k.success("状态更新成功"))},re=async()=>{try{if(await P.value.validate(),D.value){const n=y.value.findIndex(a=>a.id===o.id);n>-1&&(y.value[n]={...o,updateTime:new Date().toLocaleString()},k.success("更新成功"))}else{const n={...o,id:Date.now(),createTime:new Date().toLocaleString(),updateTime:new Date().toLocaleString()};y.value.unshift(n),k.success("创建成功")}C.value=!1,h()}catch(n){console.error("表单验证失败:",n)}},ve=()=>{C.value=!1,J()},ce=()=>{k.success(`${x.value.appName} 测试执行成功`),w.value=!1},me=()=>{k.info("导出功能开发中...")},fe=n=>{o.apiUrl="",o.apiMethod="GET",o.dataSource="",o.updateFrequency=""},h=()=>{A.value=!0,setTimeout(()=>{U.total=y.value.length,A.value=!1},500)},J=()=>{var n;Object.assign(o,{appName:"",appCode:"",appType:"",description:"",status:"active",sortOrder:0,apiUrl:"",apiMethod:"GET",dataSource:"",updateFrequency:""}),(n=P.value)==null||n.resetFields()},H=n=>({api:"blue",region:"green",integration:"purple",sync:"orange"})[n]||"default",R=n=>({api:"数据接口",region:"行政区划",integration:"数据集成",sync:"数据同步"})[n]||n;return Ce(()=>{h()}),(n,a)=>{const v=s("a-button"),K=s("a-space"),S=s("a-input"),c=s("a-col"),b=s("a-select"),O=s("a-row"),W=s("a-tag"),ye=s("a-switch"),_e=s("a-popconfirm"),ge=s("a-table"),m=s("a-form-item"),X=s("a-textarea"),be=s("a-input-number"),B=s("a-form"),j=s("a-modal"),i=s("a-descriptions-item"),Te=s("a-badge"),Y=s("a-descriptions");return f(),N("div",Se,[T("div",Oe,[a[21]||(a[21]=T("h2",null,"数据应用管理",-1)),e(K,null,{default:t(()=>[e(v,{type:"primary",onClick:ne},{icon:t(()=>[e(Q(xe))]),default:t(()=>[a[19]||(a[19]=u(" 新建应用 ",-1))]),_:1}),e(v,{onClick:me},{icon:t(()=>[e(Q(Ue))]),default:t(()=>[a[20]||(a[20]=u(" 导出配置 ",-1))]),_:1})]),_:1})]),T("div",Ee,[e(O,{gutter:16},{default:t(()=>[e(c,{span:5},{default:t(()=>[e(S,{value:F.value,"onUpdate:value":a[0]||(a[0]=l=>F.value=l),placeholder:"搜索应用名称/编码",onPressEnter:L},{prefix:t(()=>[e(Q(we))]),_:1},8,["value"])]),_:1}),e(c,{span:4},{default:t(()=>[e(b,{value:M.value,"onUpdate:value":a[1]||(a[1]=l=>M.value=l),placeholder:"应用类型",allowClear:"",options:[{value:"api",label:"数据接口"},{value:"region",label:"行政区划"},{value:"integration",label:"数据集成"},{value:"sync",label:"数据同步"}]},null,8,["value"])]),_:1}),e(c,{span:4},{default:t(()=>[e(b,{value:z.value,"onUpdate:value":a[2]||(a[2]=l=>z.value=l),placeholder:"状态",allowClear:"",options:[{value:"active",label:"启用"},{value:"inactive",label:"禁用"}]},null,8,["value"])]),_:1}),e(c,{span:5},{default:t(()=>[e(v,{type:"primary",onClick:L},{default:t(()=>[...a[22]||(a[22]=[u("查询",-1)])]),_:1}),e(v,{style:{"margin-left":"8px"},onClick:te},{default:t(()=>[...a[23]||(a[23]=[u("重置",-1)])]),_:1})]),_:1})]),_:1})]),e(ge,{columns:ee,"data-source":y.value,pagination:U,loading:A.value,onChange:le,"row-key":"id"},{bodyCell:t(({column:l,record:_})=>[l.key==="appType"?(f(),I(W,{key:0,color:H(_.appType)},{default:t(()=>[u(d(R(_.appType)),1)]),_:2},1032,["color"])):g("",!0),l.key==="status"?(f(),I(ye,{key:1,checked:_.status==="active",onChange:E=>de(_)},null,8,["checked","onChange"])):g("",!0),l.key==="action"?(f(),I(K,{key:2},{default:t(()=>[e(v,{type:"link",size:"small",onClick:E=>ue(_)},{default:t(()=>[...a[24]||(a[24]=[u("查看",-1)])]),_:1},8,["onClick"]),e(v,{type:"link",size:"small",onClick:E=>oe(_)},{default:t(()=>[...a[25]||(a[25]=[u("编辑",-1)])]),_:1},8,["onClick"]),e(v,{type:"link",size:"small",onClick:E=>pe(_)},{default:t(()=>[...a[26]||(a[26]=[u("测试",-1)])]),_:1},8,["onClick"]),e(v,{type:"link",size:"small",onClick:E=>se(_)},{default:t(()=>[...a[27]||(a[27]=[u("配置",-1)])]),_:1},8,["onClick"]),e(_e,{title:"确定要删除这个应用吗？",onConfirm:E=>ie(_.id)},{default:t(()=>[e(v,{type:"link",size:"small",danger:""},{default:t(()=>[...a[28]||(a[28]=[u("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:2},1024)):g("",!0)]),_:1},8,["data-source","pagination","loading"]),e(j,{open:C.value,"onUpdate:open":a[13]||(a[13]=l=>C.value=l),title:D.value?"编辑应用":"新建应用",width:"800px",onOk:re,onCancel:ve},{default:t(()=>[e(B,{ref_key:"formRef",ref:P,model:o,rules:ae,layout:"vertical"},{default:t(()=>[e(O,{gutter:16},{default:t(()=>[e(c,{span:12},{default:t(()=>[e(m,{label:"应用名称",name:"appName"},{default:t(()=>[e(S,{value:o.appName,"onUpdate:value":a[3]||(a[3]=l=>o.appName=l),placeholder:"请输入应用名称"},null,8,["value"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(m,{label:"应用编码",name:"appCode"},{default:t(()=>[e(S,{value:o.appCode,"onUpdate:value":a[4]||(a[4]=l=>o.appCode=l),placeholder:"请输入应用编码"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(O,{gutter:16},{default:t(()=>[e(c,{span:12},{default:t(()=>[e(m,{label:"应用类型",name:"appType"},{default:t(()=>[e(b,{value:o.appType,"onUpdate:value":a[5]||(a[5]=l=>o.appType=l),placeholder:"请选择应用类型",onChange:fe,options:[{value:"api",label:"数据接口"},{value:"region",label:"行政区划"},{value:"integration",label:"数据集成"},{value:"sync",label:"数据同步"}]},null,8,["value"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(m,{label:"状态",name:"status"},{default:t(()=>[e(b,{value:o.status,"onUpdate:value":a[6]||(a[6]=l=>o.status=l),placeholder:"请选择状态",options:[{value:"active",label:"启用"},{value:"inactive",label:"禁用"}]},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(m,{label:"应用描述",name:"description"},{default:t(()=>[e(X,{value:o.description,"onUpdate:value":a[7]||(a[7]=l=>o.description=l),rows:3,placeholder:"请输入应用描述"},null,8,["value"])]),_:1}),o.appType==="api"?(f(),I(O,{key:0,gutter:16},{default:t(()=>[e(c,{span:12},{default:t(()=>[e(m,{label:"接口地址",name:"apiUrl"},{default:t(()=>[e(S,{value:o.apiUrl,"onUpdate:value":a[8]||(a[8]=l=>o.apiUrl=l),placeholder:"请输入接口地址"},null,8,["value"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(m,{label:"请求方法",name:"apiMethod"},{default:t(()=>[e(b,{value:o.apiMethod,"onUpdate:value":a[9]||(a[9]=l=>o.apiMethod=l),placeholder:"请选择请求方法",options:[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DELETE"}]},null,8,["value"])]),_:1})]),_:1})]),_:1})):g("",!0),o.appType==="region"?(f(),I(O,{key:1,gutter:16},{default:t(()=>[e(c,{span:12},{default:t(()=>[e(m,{label:"数据源",name:"dataSource"},{default:t(()=>[e(b,{value:o.dataSource,"onUpdate:value":a[10]||(a[10]=l=>o.dataSource=l),placeholder:"请选择数据源",options:[{value:"national",label:"国家标准"},{value:"custom",label:"自定义数据"}]},null,8,["value"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(m,{label:"更新频率",name:"updateFrequency"},{default:t(()=>[e(b,{value:o.updateFrequency,"onUpdate:value":a[11]||(a[11]=l=>o.updateFrequency=l),placeholder:"请选择更新频率",options:[{value:"realtime",label:"实时"},{value:"daily",label:"每日"},{value:"weekly",label:"每周"},{value:"monthly",label:"每月"}]},null,8,["value"])]),_:1})]),_:1})]),_:1})):g("",!0),e(m,{label:"排序",name:"sortOrder"},{default:t(()=>[e(be,{value:o.sortOrder,"onUpdate:value":a[12]||(a[12]=l=>o.sortOrder=l),min:0,style:{width:"100%"},placeholder:"排序号，数字越小越靠前"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"]),e(j,{open:$.value,"onUpdate:open":a[14]||(a[14]=l=>$.value=l),title:"应用详情",width:"900px",footer:null},{default:t(()=>[e(Y,{column:2,bordered:""},{default:t(()=>[e(i,{label:"应用ID"},{default:t(()=>[u(d(p.value.id),1)]),_:1}),e(i,{label:"应用名称"},{default:t(()=>[u(d(p.value.appName),1)]),_:1}),e(i,{label:"应用编码"},{default:t(()=>[u(d(p.value.appCode),1)]),_:1}),e(i,{label:"应用类型"},{default:t(()=>[e(W,{color:H(p.value.appType)},{default:t(()=>[u(d(R(p.value.appType)),1)]),_:1},8,["color"])]),_:1}),e(i,{label:"状态"},{default:t(()=>[e(Te,{status:p.value.status==="active"?"success":"default",text:p.value.status==="active"?"启用":"禁用"},null,8,["status","text"])]),_:1}),e(i,{label:"排序"},{default:t(()=>[u(d(p.value.sortOrder),1)]),_:1}),e(i,{label:"创建时间"},{default:t(()=>[u(d(p.value.createTime),1)]),_:1}),e(i,{label:"更新时间"},{default:t(()=>[u(d(p.value.updateTime),1)]),_:1}),e(i,{label:"应用描述",span:2},{default:t(()=>[u(d(p.value.description),1)]),_:1}),p.value.appType==="api"?(f(),N(q,{key:0},[e(i,{label:"接口地址"},{default:t(()=>[u(d(p.value.apiUrl),1)]),_:1}),e(i,{label:"请求方法"},{default:t(()=>[u(d(p.value.apiMethod),1)]),_:1})],64)):g("",!0),p.value.appType==="region"?(f(),N(q,{key:1},[e(i,{label:"数据源"},{default:t(()=>[u(d(p.value.dataSource),1)]),_:1}),e(i,{label:"更新频率"},{default:t(()=>[u(d(p.value.updateFrequency),1)]),_:1})],64)):g("",!0)]),_:1})]),_:1},8,["open"]),e(j,{open:w.value,"onUpdate:open":a[17]||(a[17]=l=>w.value=l),title:"测试应用",width:"700px",onOk:ce,onCancel:a[18]||(a[18]=l=>w.value=!1)},{default:t(()=>[T("div",Ne,[a[31]||(a[31]=T("h4",null,"应用信息",-1)),e(Y,{column:2,size:"small"},{default:t(()=>[e(i,{label:"应用名称"},{default:t(()=>[u(d(x.value.appName),1)]),_:1}),e(i,{label:"应用类型"},{default:t(()=>[u(d(R(x.value.appType)),1)]),_:1})]),_:1}),x.value.appType==="api"?(f(),N(q,{key:0},[a[29]||(a[29]=T("h4",{style:{"margin-top":"16px"}},"接口测试",-1)),e(B,{layout:"vertical"},{default:t(()=>[e(m,{label:"请求参数"},{default:t(()=>[e(X,{value:V.value,"onUpdate:value":a[15]||(a[15]=l=>V.value=l),rows:4,placeholder:'{"key": "value"}'},null,8,["value"])]),_:1})]),_:1})],64)):g("",!0),x.value.appType==="region"?(f(),N(q,{key:1},[a[30]||(a[30]=T("h4",{style:{"margin-top":"16px"}},"数据测试",-1)),e(B,{layout:"vertical"},{default:t(()=>[e(m,{label:"查询条件"},{default:t(()=>[e(S,{value:G.value,"onUpdate:value":a[16]||(a[16]=l=>G.value=l),placeholder:"输入地区名称或编码"},null,8,["value"])]),_:1})]),_:1})],64)):g("",!0)])]),_:1},8,["open"])])}}}),ze=he(Ie,[["__scopeId","data-v-5835a947"]]);export{ze as default};
