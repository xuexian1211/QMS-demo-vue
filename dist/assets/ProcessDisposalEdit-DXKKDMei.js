import{x as e,N as T,k as F,j as I,r as D,a as $,m as W,c as G,o as J,e as k,q as l,h as U,y as M,K as X,s as i,E as N,u as Z,C as y}from"./index-CAjnGs0g.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";var ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};function C(p){for(var n=1;n<arguments.length;n++){var u=arguments[n]!=null?Object(arguments[n]):{},c=Object.keys(u);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(u).filter(function(m){return Object.getOwnPropertyDescriptor(u,m).enumerable}))),c.forEach(function(m){le(p,m,u[m])})}return p}function le(p,n,u){return n in p?Object.defineProperty(p,n,{value:u,enumerable:!0,configurable:!0,writable:!0}):p[n]=u,p}var h=function(n,u){var c=C({},n,u.attrs);return e(T,C({},c,{icon:ee}),null)};h.displayName="SaveOutlined";h.inheritAttrs=!1;const ae={class:"process-disposal-edit-container"},te={class:"toolbar"},se={class:"content-container"},oe={__name:"ProcessDisposalEdit",setup(p){const n=Z(),u=I(),c=F(()=>u.name==="ProcessDisposalEdit"),m=D(),w=D(!1);D("basic");const t=$({disposalNo:"",workOrder:"",discoveryDate:null,status:"pending",productionLine:void 0,process:void 0,shift:void 0,productCode:"",productName:"",defectQuantity:null,defectDescription:"",causeAnalysis:"",disposalMethod:"",urgencyLevel:void 0,disposalMeasures:"",disposalResult:"",discoverer:"",processor:"",reviewer:"",responsibleDept:void 0,responsiblePerson:"",contactPhone:"",auditOpinion:"",correctiveAction:"",remark:""}),q={workOrder:[{required:!0,message:"请输入生产工单号",trigger:"blur"}],discoveryDate:[{required:!0,message:"请选择发现日期",trigger:"change"}],productionLine:[{required:!0,message:"请选择生产线",trigger:"change"}],process:[{required:!0,message:"请选择工序",trigger:"change"}],shift:[{required:!0,message:"请选择班次",trigger:"change"}],productCode:[{required:!0,message:"请输入产品编码",trigger:"blur"}],productName:[{required:!0,message:"请输入产品名称",trigger:"blur"}],defectQuantity:[{required:!0,message:"请输入不合格数量",trigger:"blur"}],defectDescription:[{required:!0,message:"请描述不合格情况",trigger:"blur"}],disposalMethod:[{required:!0,message:"请选择处置方式",trigger:"change"}],discoverer:[{required:!0,message:"请输入发现人",trigger:"blur"}]},L=[{value:"pending",label:"待处理"},{value:"processing",label:"处理中"},{value:"completed",label:"已完成"},{value:"closed",label:"已关闭"}],A=[{value:"line1",label:"生产线A"},{value:"line2",label:"生产线B"},{value:"line3",label:"生产线C"}],R=[{value:"cutting",label:"下料工序"},{value:"welding",label:"焊接工序"},{value:"assembly",label:"装配工序"},{value:"painting",label:"喷涂工序"},{value:"testing",label:"测试工序"}],z=[{value:"day",label:"白班"},{value:"night",label:"夜班"}],x=[{value:"rework",label:"返工"},{value:"scrap",label:"报废"},{value:"repair",label:"维修"},{value:"concession",label:"让步接收"},{value:"downgrade",label:"降级使用"}],V=[{value:"low",label:"低"},{value:"medium",label:"中"},{value:"high",label:"高"},{value:"urgent",label:"紧急"}],S=[{value:"production",label:"生产部"},{value:"quality",label:"质量部"},{value:"technical",label:"技术部"},{value:"procurement",label:"采购部"}],P=()=>{n.push("/production-quality/exception-handling/process-disposal")},j=()=>{var v;(v=m.value)==null||v.resetFields(),c.value||(t.disposalNo="")},E=async()=>{try{await m.value.validate(),w.value=!0,await new Promise(v=>setTimeout(v,1e3)),c.value?y.success("更新成功"):y.success("创建成功"),P()}catch(v){v.errorFields?y.error("请检查表单填写"):y.error("保存失败")}finally{w.value=!1}},B=async()=>{c.value?(u.params.id,await new Promise(v=>setTimeout(v,500)),Object.assign(t,{disposalNo:"PROC202401001",workOrder:"WO202401001",discoveryDate:N("2024-01-15"),productionLine:"line1",process:"welding",shift:"day",productCode:"P001",productName:"传动轴组件",defectQuantity:5,defectDescription:"焊接出现气孔缺陷",causeAnalysis:"焊接参数设置不当",disposalMethod:"rework",urgencyLevel:"high",disposalMeasures:"重新调整焊接参数进行返工",discoverer:"张三",processor:"李四",reviewer:"王五",responsibleDept:"production",responsiblePerson:"张三",contactPhone:"13800138000"})):t.disposalNo=`PROC${N().format("YYYYMMDDHHmmss")}`};return W(()=>{B()}),(v,a)=>{const O=i("a-button"),f=i("a-input"),o=i("a-form-item"),r=i("a-col"),Q=i("a-date-picker"),b=i("a-select"),d=i("a-row"),_=i("a-card"),H=i("a-input-number"),g=i("a-textarea"),Y=i("a-form");return J(),G("div",ae,[k("div",te,[e(O,{onClick:P},{icon:l(()=>[e(M(X))]),default:l(()=>[a[25]||(a[25]=U(" 返回 ",-1))]),_:1}),e(O,{onClick:j},{default:l(()=>[...a[26]||(a[26]=[U("重置",-1)])]),_:1}),e(O,{type:"primary",onClick:E,loading:w.value},{icon:l(()=>[e(M(h))]),default:l(()=>[a[27]||(a[27]=U(" 保存 ",-1))]),_:1},8,["loading"])]),k("div",se,[e(Y,{ref_key:"formRef",ref:m,model:t,rules:q,layout:"vertical",class:"edit-form"},{default:l(()=>[e(_,{title:"基本信息",size:"small",class:"form-card"},{default:l(()=>[e(d,{gutter:16},{default:l(()=>[e(r,{span:6},{default:l(()=>[e(o,{label:"处置单号",name:"disposalNo"},{default:l(()=>[e(f,{value:t.disposalNo,"onUpdate:value":a[0]||(a[0]=s=>t.disposalNo=s),placeholder:"系统自动生成",disabled:""},null,8,["value"])]),_:1})]),_:1}),e(r,{span:6},{default:l(()=>[e(o,{label:"生产工单",name:"workOrder"},{default:l(()=>[e(f,{value:t.workOrder,"onUpdate:value":a[1]||(a[1]=s=>t.workOrder=s),placeholder:"请输入生产工单号"},null,8,["value"])]),_:1})]),_:1}),e(r,{span:6},{default:l(()=>[e(o,{label:"发现日期",name:"discoveryDate"},{default:l(()=>[e(Q,{value:t.discoveryDate,"onUpdate:value":a[2]||(a[2]=s=>t.discoveryDate=s),placeholder:"请选择发现日期",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),e(r,{span:6},{default:l(()=>[e(o,{label:"状态",name:"status"},{default:l(()=>[e(b,{value:t.status,"onUpdate:value":a[3]||(a[3]=s=>t.status=s),placeholder:"请选择状态",options:L},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(d,{gutter:16},{default:l(()=>[e(r,{span:6},{default:l(()=>[e(o,{label:"生产线",name:"productionLine"},{default:l(()=>[e(b,{value:t.productionLine,"onUpdate:value":a[4]||(a[4]=s=>t.productionLine=s),placeholder:"请选择生产线",options:A},null,8,["value"])]),_:1})]),_:1}),e(r,{span:6},{default:l(()=>[e(o,{label:"工序",name:"process"},{default:l(()=>[e(b,{value:t.process,"onUpdate:value":a[5]||(a[5]=s=>t.process=s),placeholder:"请选择工序",options:R},null,8,["value"])]),_:1})]),_:1}),e(r,{span:6},{default:l(()=>[e(o,{label:"班次",name:"shift"},{default:l(()=>[e(b,{value:t.shift,"onUpdate:value":a[6]||(a[6]=s=>t.shift=s),placeholder:"请选择班次",options:z},null,8,["value"])]),_:1})]),_:1}),e(r,{span:6},{default:l(()=>[e(o,{label:"发现人",name:"discoverer"},{default:l(()=>[e(f,{value:t.discoverer,"onUpdate:value":a[7]||(a[7]=s=>t.discoverer=s),placeholder:"请输入发现人"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),e(_,{title:"不合格情况描述",size:"small",class:"form-card"},{default:l(()=>[e(d,{gutter:16},{default:l(()=>[e(r,{span:8},{default:l(()=>[e(o,{label:"产品编码",name:"productCode"},{default:l(()=>[e(f,{value:t.productCode,"onUpdate:value":a[8]||(a[8]=s=>t.productCode=s),placeholder:"请输入产品编码"},null,8,["value"])]),_:1})]),_:1}),e(r,{span:8},{default:l(()=>[e(o,{label:"产品名称",name:"productName"},{default:l(()=>[e(f,{value:t.productName,"onUpdate:value":a[9]||(a[9]=s=>t.productName=s),placeholder:"请输入产品名称"},null,8,["value"])]),_:1})]),_:1}),e(r,{span:8},{default:l(()=>[e(o,{label:"不合格数量",name:"defectQuantity"},{default:l(()=>[e(H,{value:t.defectQuantity,"onUpdate:value":a[10]||(a[10]=s=>t.defectQuantity=s),placeholder:"请输入不合格数量",min:1,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(d,{gutter:16},{default:l(()=>[e(r,{span:24},{default:l(()=>[e(o,{label:"不合格描述",name:"defectDescription"},{default:l(()=>[e(g,{value:t.defectDescription,"onUpdate:value":a[11]||(a[11]=s=>t.defectDescription=s),placeholder:"请详细描述不合格情况",rows:3},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(d,{gutter:16},{default:l(()=>[e(r,{span:24},{default:l(()=>[e(o,{label:"原因分析",name:"causeAnalysis"},{default:l(()=>[e(g,{value:t.causeAnalysis,"onUpdate:value":a[12]||(a[12]=s=>t.causeAnalysis=s),placeholder:"请分析不合格原因",rows:3},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),e(_,{title:"处置方式",size:"small",class:"form-card"},{default:l(()=>[e(d,{gutter:16},{default:l(()=>[e(r,{span:8},{default:l(()=>[e(o,{label:"处置方式",name:"disposalMethod"},{default:l(()=>[e(b,{value:t.disposalMethod,"onUpdate:value":a[13]||(a[13]=s=>t.disposalMethod=s),placeholder:"请选择处置方式",options:x},null,8,["value"])]),_:1})]),_:1}),e(r,{span:8},{default:l(()=>[e(o,{label:"紧急程度",name:"urgencyLevel"},{default:l(()=>[e(b,{value:t.urgencyLevel,"onUpdate:value":a[14]||(a[14]=s=>t.urgencyLevel=s),placeholder:"请选择紧急程度",options:V},null,8,["value"])]),_:1})]),_:1}),e(r,{span:8},{default:l(()=>[e(o,{label:"处置人",name:"processor"},{default:l(()=>[e(f,{value:t.processor,"onUpdate:value":a[15]||(a[15]=s=>t.processor=s),placeholder:"请输入处置人"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(d,{gutter:16},{default:l(()=>[e(r,{span:24},{default:l(()=>[e(o,{label:"处置措施",name:"disposalMeasures"},{default:l(()=>[e(g,{value:t.disposalMeasures,"onUpdate:value":a[16]||(a[16]=s=>t.disposalMeasures=s),placeholder:"请描述具体的处置措施",rows:3},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(d,{gutter:16},{default:l(()=>[e(r,{span:24},{default:l(()=>[e(o,{label:"处置结果",name:"disposalResult"},{default:l(()=>[e(g,{value:t.disposalResult,"onUpdate:value":a[17]||(a[17]=s=>t.disposalResult=s),placeholder:"请描述处置结果",rows:3},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),e(_,{title:"人员信息",size:"small",class:"form-card"},{default:l(()=>[e(d,{gutter:16},{default:l(()=>[e(r,{span:6},{default:l(()=>[e(o,{label:"责任部门",name:"responsibleDept"},{default:l(()=>[e(b,{value:t.responsibleDept,"onUpdate:value":a[18]||(a[18]=s=>t.responsibleDept=s),placeholder:"请选择责任部门",options:S},null,8,["value"])]),_:1})]),_:1}),e(r,{span:6},{default:l(()=>[e(o,{label:"责任人",name:"responsiblePerson"},{default:l(()=>[e(f,{value:t.responsiblePerson,"onUpdate:value":a[19]||(a[19]=s=>t.responsiblePerson=s),placeholder:"请输入责任人"},null,8,["value"])]),_:1})]),_:1}),e(r,{span:6},{default:l(()=>[e(o,{label:"联系电话",name:"contactPhone"},{default:l(()=>[e(f,{value:t.contactPhone,"onUpdate:value":a[20]||(a[20]=s=>t.contactPhone=s),placeholder:"请输入联系电话"},null,8,["value"])]),_:1})]),_:1}),e(r,{span:6},{default:l(()=>[e(o,{label:"审核人",name:"reviewer"},{default:l(()=>[e(f,{value:t.reviewer,"onUpdate:value":a[21]||(a[21]=s=>t.reviewer=s),placeholder:"请输入审核人"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),e(_,{title:"审核信息",size:"small",class:"form-card"},{default:l(()=>[e(d,{gutter:16},{default:l(()=>[e(r,{span:12},{default:l(()=>[e(o,{label:"审核意见",name:"auditOpinion"},{default:l(()=>[e(g,{value:t.auditOpinion,"onUpdate:value":a[22]||(a[22]=s=>t.auditOpinion=s),placeholder:"请输入审核意见",rows:3},null,8,["value"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(o,{label:"纠正措施",name:"correctiveAction"},{default:l(()=>[e(g,{value:t.correctiveAction,"onUpdate:value":a[23]||(a[23]=s=>t.correctiveAction=s),placeholder:"请输入纠正措施",rows:3},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),e(_,{title:"备注信息",size:"small",class:"form-card"},{default:l(()=>[e(d,{gutter:16},{default:l(()=>[e(r,{span:24},{default:l(()=>[e(o,{label:"备注",name:"remark"},{default:l(()=>[e(g,{value:t.remark,"onUpdate:value":a[24]||(a[24]=s=>t.remark=s),placeholder:"请输入备注信息",rows:3},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])])])}}},ue=K(oe,[["__scopeId","data-v-6a6f2a9d"]]);export{ue as default};
