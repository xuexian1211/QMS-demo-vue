import{d as Z,a as C,r as v,m as ee,c as te,e as _,x as t,q as a,s,C as y,o as x,h as d,y as U,P as ae,S as oe,p as I,f as P,t as ne}from"./index-BsO03Xlk.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";const se={class:"problem-types-container"},re={class:"page-header"},de={class:"search-form"},ie={class:"table-container"},ue=Z({__name:"ProblemTypes",setup(ce){const r=C({name:"",status:void 0}),O=v([]),g=v(!1),u=C({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:o=>`共 ${o} 条数据`}),z=[{title:"问题类型名称",dataIndex:"name",key:"name",width:150},{title:"问题类型编码",dataIndex:"code",key:"code",width:120},{title:"描述",dataIndex:"description",key:"description",ellipsis:!0},{title:"状态",dataIndex:"status",key:"status",width:80},{title:"排序",dataIndex:"sortOrder",key:"sortOrder",width:80},{title:"创建时间",dataIndex:"createdAt",key:"createdAt",width:150},{title:"操作",key:"action",width:150,fixed:"right"}],c=v(!1),b=v("新增问题类型"),k=v(),n=C({id:"",name:"",code:"",description:"",status:"active",sortOrder:0}),D={name:[{required:!0,message:"请输入问题类型名称",trigger:"blur"}],code:[{required:!0,message:"请输入问题类型编码",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},E=[{id:"1",name:"质量问题",code:"QUALITY",description:"产品质量相关问题",status:"active",sortOrder:1,createdAt:"2024-01-01 10:00:00",updatedAt:"2024-01-01 10:00:00"},{id:"2",name:"工艺问题",code:"PROCESS",description:"生产工艺相关问题",status:"active",sortOrder:2,createdAt:"2024-01-02 10:00:00",updatedAt:"2024-01-02 10:00:00"},{id:"3",name:"设备问题",code:"EQUIPMENT",description:"生产设备相关问题",status:"inactive",sortOrder:3,createdAt:"2024-01-03 10:00:00",updatedAt:"2024-01-03 10:00:00"}],m=async()=>{g.value=!0;try{await new Promise(e=>setTimeout(e,500));let o=[...E];r.name&&(o=o.filter(e=>e.name.includes(r.name))),r.status&&(o=o.filter(e=>e.status===r.status)),O.value=o,u.total=o.length}catch{y.error("获取数据失败")}finally{g.value=!1}},M=()=>{u.current=1,m()},N=()=>{r.name="",r.status=void 0,u.current=1,m()},R=o=>{u.current=o.current,u.pageSize=o.pageSize,m()},V=()=>{b.value="新增问题类型",c.value=!0,T()},q=o=>{b.value="编辑问题类型",c.value=!0,Object.assign(n,o)},B=async o=>{try{await new Promise(e=>setTimeout(e,500)),y.success("删除成功"),m()}catch{y.error("删除失败")}},F=async()=>{try{await k.value.validate(),await new Promise(o=>setTimeout(o,500)),y.success(n.id?"更新成功":"新增成功"),c.value=!1,m()}catch(o){console.error("验证失败:",o)}},Q=()=>{c.value=!1,T()},T=()=>{var o;n.id="",n.name="",n.code="",n.description="",n.status="active",n.sortOrder=0,(o=k.value)==null||o.resetFields()};return ee(()=>{m()}),(o,e)=>{const p=s("a-button"),w=s("a-input"),i=s("a-form-item"),h=s("a-select-option"),$=s("a-select"),S=s("a-form"),j=s("a-tag"),J=s("a-popconfirm"),K=s("a-space"),L=s("a-table"),Y=s("a-textarea"),A=s("a-radio"),G=s("a-radio-group"),H=s("a-input-number"),W=s("a-modal");return x(),te("div",se,[_("div",re,[e[9]||(e[9]=_("h2",null,"问题类型管理",-1)),t(p,{type:"primary",onClick:V},{icon:a(()=>[t(U(ae))]),default:a(()=>[e[8]||(e[8]=d(" 新增问题类型 ",-1))]),_:1})]),_("div",de,[t(S,{model:r,layout:"inline"},{default:a(()=>[t(i,{label:"问题类型名称"},{default:a(()=>[t(w,{value:r.name,"onUpdate:value":e[0]||(e[0]=l=>r.name=l),placeholder:"请输入问题类型名称",allowClear:""},null,8,["value"])]),_:1}),t(i,{label:"状态"},{default:a(()=>[t($,{value:r.status,"onUpdate:value":e[1]||(e[1]=l=>r.status=l),placeholder:"请选择状态",allowClear:"",style:{width:"120px"}},{default:a(()=>[t(h,{value:"active"},{default:a(()=>[...e[10]||(e[10]=[d("启用",-1)])]),_:1}),t(h,{value:"inactive"},{default:a(()=>[...e[11]||(e[11]=[d("禁用",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(i,null,{default:a(()=>[t(p,{type:"primary",onClick:M},{icon:a(()=>[t(U(oe))]),default:a(()=>[e[12]||(e[12]=d(" 搜索 ",-1))]),_:1}),t(p,{style:{"margin-left":"8px"},onClick:N},{default:a(()=>[...e[13]||(e[13]=[d("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_("div",ie,[t(L,{columns:z,"data-source":O.value,pagination:u,loading:g.value,onChange:R,rowKey:"id"},{bodyCell:a(({column:l,record:f})=>[l.key==="status"?(x(),I(j,{key:0,color:f.status==="active"?"green":"red"},{default:a(()=>[d(ne(f.status==="active"?"启用":"禁用"),1)]),_:2},1032,["color"])):P("",!0),l.key==="action"?(x(),I(K,{key:1},{default:a(()=>[t(p,{type:"link",size:"small",onClick:X=>q(f)},{default:a(()=>[...e[14]||(e[14]=[d("编辑",-1)])]),_:1},8,["onClick"]),t(J,{title:"确定要删除这个问题类型吗？",onConfirm:X=>B(f.id),okText:"确定",cancelText:"取消"},{default:a(()=>[t(p,{type:"link",size:"small",danger:""},{default:a(()=>[...e[15]||(e[15]=[d("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:2},1024)):P("",!0)]),_:1},8,["data-source","pagination","loading"])]),t(W,{visible:c.value,"onUpdate:visible":e[7]||(e[7]=l=>c.value=l),title:b.value,onOk:F,onCancel:Q,width:"600px"},{default:a(()=>[t(S,{ref_key:"formRef",ref:k,model:n,rules:D,"label-col":{span:6},"wrapper-col":{span:16}},{default:a(()=>[t(i,{label:"问题类型名称",name:"name"},{default:a(()=>[t(w,{value:n.name,"onUpdate:value":e[2]||(e[2]=l=>n.name=l),placeholder:"请输入问题类型名称"},null,8,["value"])]),_:1}),t(i,{label:"问题类型编码",name:"code"},{default:a(()=>[t(w,{value:n.code,"onUpdate:value":e[3]||(e[3]=l=>n.code=l),placeholder:"请输入问题类型编码"},null,8,["value"])]),_:1}),t(i,{label:"描述",name:"description"},{default:a(()=>[t(Y,{value:n.description,"onUpdate:value":e[4]||(e[4]=l=>n.description=l),rows:3,placeholder:"请输入描述"},null,8,["value"])]),_:1}),t(i,{label:"状态",name:"status"},{default:a(()=>[t(G,{value:n.status,"onUpdate:value":e[5]||(e[5]=l=>n.status=l)},{default:a(()=>[t(A,{value:"active"},{default:a(()=>[...e[16]||(e[16]=[d("启用",-1)])]),_:1}),t(A,{value:"inactive"},{default:a(()=>[...e[17]||(e[17]=[d("禁用",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(i,{label:"排序",name:"sortOrder"},{default:a(()=>[t(H,{value:n.sortOrder,"onUpdate:value":e[6]||(e[6]=l=>n.sortOrder=l),min:0,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])])}}}),ve=le(ue,[["__scopeId","data-v-a11f35bc"]]);export{ve as default};
