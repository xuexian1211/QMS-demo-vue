import{d as Y,r as u,a as T,c as O,e as w,x as e,s as n,q as l,o as x,h as p,y as G,P as H,p as W,f as q,t as z,F as X}from"./index-BPMZt9Bz.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ee={class:"role-management"},te={style:{"margin-bottom":"16px",display:"flex","justify-content":"space-between","align-items":"center"}},ae=Y({__name:"Role",setup(le){const _=u(""),C=u(""),v=u(!1),y=u(!1),c=u(null),k=u([]),N=[{title:"角色名称",dataIndex:"name",key:"name"},{title:"角色编码",dataIndex:"code",key:"code"},{title:"角色描述",dataIndex:"description",key:"description"},{title:"用户数量",dataIndex:"userCount",key:"userCount"},{title:"状态",dataIndex:"status",key:"status"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"操作",key:"action",width:250}],P=u([{key:"1",name:"系统管理员",code:"ADMIN",description:"系统管理员，拥有所有权限",userCount:1,status:"active",createTime:"2023-01-01"},{key:"2",name:"质量管理员",code:"QUALITY_ADMIN",description:"质量管理员，负责质量检验相关操作",userCount:3,status:"active",createTime:"2023-01-01"},{key:"3",name:"普通用户",code:"USER",description:"普通用户，基础操作权限",userCount:25,status:"active",createTime:"2023-01-01"}]),R=u([{title:"系统管理",key:"system",children:[{title:"用户管理",key:"system:user",children:[{title:"查看用户",key:"system:user:view"},{title:"新增用户",key:"system:user:add"},{title:"编辑用户",key:"system:user:edit"},{title:"删除用户",key:"system:user:delete"}]},{title:"角色管理",key:"system:role",children:[{title:"查看角色",key:"system:role:view"},{title:"新增角色",key:"system:role:add"},{title:"编辑角色",key:"system:role:edit"},{title:"删除角色",key:"system:role:delete"}]}]},{title:"质量管理",key:"quality",children:[{title:"进货检验",key:"quality:incoming",children:[{title:"查看检验单",key:"quality:incoming:view"},{title:"创建检验单",key:"quality:incoming:add"},{title:"审核检验单",key:"quality:incoming:approve"}]}]}]),$=T({current:1,pageSize:10,total:3,showSizeChanger:!0,showQuickJumper:!0,showTotal:s=>`共 ${s} 条记录`}),o=T({name:"",code:"",description:"",dataScope:"dept",status:"active",sortOrder:0,userLimit:0,remark:""}),L=()=>{console.log("搜索:",_.value)},B=s=>{c.value=s,Object.assign(o,s),v.value=!0},M=s=>{c.value=s,k.value=["system:user:view","system:role:view"],y.value=!0},V=s=>{s.status=s.status==="active"?"inactive":"active"},j=s=>{console.log("删除记录:",s)},A=()=>{console.log("保存:",o),v.value=!1,c.value=null,Object.assign(o,{name:"",code:"",description:"",dataScope:"dept",status:"active",sortOrder:0,userLimit:0,remark:""})},D=()=>{console.log("保存权限:",k.value),y.value=!1,c.value=null};return(s,t)=>{const F=n("a-input-search"),f=n("a-select"),m=n("a-button"),K=n("a-tag"),E=n("a-table"),U=n("a-input"),i=n("a-form-item"),r=n("a-col"),b=n("a-row"),S=n("a-input-number"),h=n("a-textarea"),Q=n("a-form"),I=n("a-modal"),J=n("a-tree");return x(),O("div",ee,[w("div",te,[w("div",null,[e(F,{value:_.value,"onUpdate:value":t[0]||(t[0]=a=>_.value=a),placeholder:"搜索角色名称、编码",style:{width:"300px","margin-right":"16px"},onSearch:L},null,8,["value"]),e(f,{value:C.value,"onUpdate:value":t[1]||(t[1]=a=>C.value=a),placeholder:"状态筛选",style:{width:"120px"},options:[{value:"",label:"全部"},{value:"active",label:"启用"},{value:"inactive",label:"禁用"}]},null,8,["value"])]),w("div",null,[e(m,{type:"primary",onClick:t[2]||(t[2]=a=>v.value=!0)},{default:l(()=>[e(G(H)),t[14]||(t[14]=p(" 新增角色 ",-1))]),_:1})])]),e(E,{columns:N,"data-source":P.value,pagination:$},{bodyCell:l(({column:a,record:d})=>[a.key==="status"?(x(),W(K,{key:0,color:d.status==="active"?"green":"red"},{default:l(()=>[p(z(d.status==="active"?"启用":"禁用"),1)]),_:2},1032,["color"])):q("",!0),a.key==="action"?(x(),O(X,{key:1},[e(m,{type:"link",size:"small",onClick:g=>B(d)},{default:l(()=>[...t[15]||(t[15]=[p("编辑",-1)])]),_:1},8,["onClick"]),e(m,{type:"link",size:"small",onClick:g=>M(d)},{default:l(()=>[...t[16]||(t[16]=[p("权限配置",-1)])]),_:1},8,["onClick"]),e(m,{type:"link",size:"small",onClick:g=>V(d)},{default:l(()=>[p(z(d.status==="active"?"禁用":"启用"),1)]),_:2},1032,["onClick"]),e(m,{type:"link",size:"small",onClick:g=>j(d)},{default:l(()=>[...t[17]||(t[17]=[p("删除",-1)])]),_:1},8,["onClick"])],64)):q("",!0)]),_:1},8,["data-source","pagination"]),e(I,{open:v.value,"onUpdate:open":t[11]||(t[11]=a=>v.value=a),title:c.value?"编辑角色":"新增角色",width:"700px",onOk:A},{default:l(()=>[e(Q,{model:o,layout:"vertical"},{default:l(()=>[e(b,{gutter:16},{default:l(()=>[e(r,{span:12},{default:l(()=>[e(i,{label:"角色名称",required:""},{default:l(()=>[e(U,{value:o.name,"onUpdate:value":t[3]||(t[3]=a=>o.name=a),placeholder:"输入角色名称"},null,8,["value"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(i,{label:"角色编码",required:""},{default:l(()=>[e(U,{value:o.code,"onUpdate:value":t[4]||(t[4]=a=>o.code=a),placeholder:"输入角色编码"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(b,{gutter:16},{default:l(()=>[e(r,{span:12},{default:l(()=>[e(i,{label:"数据权限"},{default:l(()=>[e(f,{value:o.dataScope,"onUpdate:value":t[5]||(t[5]=a=>o.dataScope=a),placeholder:"选择数据权限范围",options:[{value:"all",label:"全部数据"},{value:"dept",label:"部门数据"},{value:"self",label:"个人数据"}]},null,8,["value"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(i,{label:"状态"},{default:l(()=>[e(f,{value:o.status,"onUpdate:value":t[6]||(t[6]=a=>o.status=a),placeholder:"选择状态",options:[{value:"active",label:"启用"},{value:"inactive",label:"禁用"}]},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(b,{gutter:16},{default:l(()=>[e(r,{span:12},{default:l(()=>[e(i,{label:"排序号"},{default:l(()=>[e(S,{value:o.sortOrder,"onUpdate:value":t[7]||(t[7]=a=>o.sortOrder=a),placeholder:"输入排序号",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(i,{label:"用户数量限制"},{default:l(()=>[e(S,{value:o.userLimit,"onUpdate:value":t[8]||(t[8]=a=>o.userLimit=a),placeholder:"输入用户数量限制",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(i,{label:"角色描述"},{default:l(()=>[e(h,{value:o.description,"onUpdate:value":t[9]||(t[9]=a=>o.description=a),placeholder:"输入角色描述",rows:3},null,8,["value"])]),_:1}),e(i,{label:"备注"},{default:l(()=>[e(h,{value:o.remark,"onUpdate:value":t[10]||(t[10]=a=>o.remark=a),placeholder:"输入备注信息",rows:2},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"]),e(I,{open:y.value,"onUpdate:open":t[13]||(t[13]=a=>y.value=a),title:"权限配置",width:"800px",onOk:D},{default:l(()=>[e(J,{checkedKeys:k.value,"onUpdate:checkedKeys":t[12]||(t[12]=a=>k.value=a),"tree-data":R.value,checkable:!0,"default-expand-all":!0},null,8,["checkedKeys","tree-data"])]),_:1},8,["open"])])}}}),se=Z(ae,[["__scopeId","data-v-8bf3b849"]]);export{se as default};
