import{x as e,N as ne,d as oe,r as f,a as re,k as ie,m as ue,W as ce,c as V,e as i,q as t,s as u,o as p,h as g,y as C,R as de,X as me,U as fe,H as pe,p as b,f as M,t as S,F as ve,z as _e,n as ye,C as w}from"./index-C4MSyl8P.js";import{U as ge}from"./UserOutlined-CtEdmX7z.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";var ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"}}]},name:"heart",theme:"outlined"};function F(m){for(var o=1;o<arguments.length;o++){var c=arguments[o]!=null?Object(arguments[o]):{},y=Object.keys(c);typeof Object.getOwnPropertySymbols=="function"&&(y=y.concat(Object.getOwnPropertySymbols(c).filter(function(h){return Object.getOwnPropertyDescriptor(c,h).enumerable}))),y.forEach(function(h){xe(m,h,c[h])})}return m}function xe(m,o,c){return o in m?Object.defineProperty(m,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):m[o]=c,m}var P=function(o,c){var y=F({},o,c.attrs);return e(ne,F({},y,{icon:ke}),null)};P.displayName="HeartOutlined";P.inheritAttrs=!1;const Ce={class:"system-monitor"},be={class:"page-header"},Me={class:"overview-section"},we={class:"charts-section"},Ie={class:"logs-container"},Oe={class:"log-time"},Re={class:"log-message"},Se=oe({__name:"Monitor",setup(m){const o=f(),c=f(),y=f(),h=f(),I=f(""),U=f(!1),$=f([]);let z=null;const v=re({uptime:15,onlineUsers:128,todayVisits:2568,healthScore:95}),H=[{title:"服务名称",dataIndex:"name",key:"name"},{title:"状态",dataIndex:"status",key:"status"},{title:"CPU使用率",dataIndex:"cpu",key:"cpu"},{title:"内存使用率",dataIndex:"memory",key:"memory"},{title:"启动时间",dataIndex:"startTime",key:"startTime"},{title:"操作",key:"action"}],k=f([{name:"Web服务器",status:"运行中",cpu:45,memory:62,startTime:"2024-01-15 08:00:00"},{name:"数据库服务",status:"运行中",cpu:28,memory:75,startTime:"2024-01-15 08:00:00"},{name:"Redis缓存",status:"运行中",cpu:12,memory:35,startTime:"2024-01-15 08:00:00"},{name:"消息队列",status:"运行中",cpu:18,memory:42,startTime:"2024-01-15 08:00:00"},{name:"文件服务",status:"异常",cpu:0,memory:0,startTime:"2024-01-15 08:00:00"}]),L=[{title:"告警时间",dataIndex:"time",key:"time",width:150},{title:"级别",dataIndex:"level",key:"level",width:80},{title:"告警内容",dataIndex:"message",key:"message"},{title:"来源",dataIndex:"source",key:"source",width:120},{title:"操作",key:"action",width:120}],x=f([{id:1,time:"2024-01-15 14:30:25",level:"critical",message:"文件服务连接超时，无法正常提供服务",source:"文件服务"},{id:2,time:"2024-01-15 14:25:18",level:"warning",message:"数据库连接池使用率达到85%，建议增加连接数",source:"数据库服务"},{id:3,time:"2024-01-15 14:20:12",level:"info",message:"系统自动清理临时文件完成，释放空间2.3GB",source:"系统任务"},{id:4,time:"2024-01-15 14:15:08",level:"warning",message:"CPU使用率持续超过80%已超过5分钟",source:"Web服务器"}]),j=ie(()=>I.value?x.value.filter(l=>l.level===I.value):x.value),W=()=>{w.success("数据已刷新"),T()},D=()=>{w.info("导出功能开发中...")},q=l=>{w.success(`正在重启 ${l.name}...`),setTimeout(()=>{const a=k.value.findIndex(r=>r.name===l.name);a>-1&&(k.value[a].status="运行中",k.value[a].cpu=Math.floor(Math.random()*50),k.value[a].memory=Math.floor(Math.random()*70)+20),w.success(`${l.name} 重启成功`)},2e3)},G=l=>{$.value=[{time:"2024-01-15 14:30:25",level:"INFO",message:`${l.name} 服务启动成功`},{time:"2024-01-15 14:25:18",level:"WARN",message:"连接池使用率较高: 85%"},{time:"2024-01-15 14:20:12",level:"INFO",message:"定时任务执行完成"},{time:"2024-01-15 14:15:08",level:"ERROR",message:"数据库连接异常，正在重试"},{time:"2024-01-15 14:10:05",level:"INFO",message:"服务健康检查通过"}],U.value=!0},X=()=>{},J=l=>{const a=x.value.findIndex(r=>r.id===l.id);a>-1&&(x.value.splice(a,1),w.success("告警已处理"))},Q=l=>{const a=x.value.findIndex(r=>r.id===l.id);a>-1&&(x.value.splice(a,1),w.success("告警已忽略"))},T=()=>{v.onlineUsers=Math.floor(Math.random()*50)+100,v.todayVisits=Math.floor(Math.random()*1e3)+2e3,v.healthScore=Math.floor(Math.random()*10)+90,k.value.forEach(l=>{l.status==="运行中"&&(l.cpu=Math.floor(Math.random()*60)+10,l.memory=Math.floor(Math.random()*50)+30)})},Y=l=>({运行中:"processing",异常:"error",停止:"default"})[l]||"default",Z=l=>({critical:"red",warning:"orange",info:"blue"})[l]||"default",K=l=>({critical:"严重",warning:"警告",info:"信息"})[l]||l,ee=()=>{console.log("初始化图表")};return ue(()=>{T(),ee(),z=setInterval(()=>{T()},3e4)}),ce(()=>{z&&clearInterval(z)}),(l,a)=>{const r=u("a-button"),O=u("a-space"),R=u("a-statistic"),d=u("a-card"),_=u("a-col"),N=u("a-row"),te=u("a-badge"),B=u("a-progress"),E=u("a-table"),ae=u("a-select"),le=u("a-tag"),se=u("a-modal");return p(),V("div",Ce,[i("div",be,[a[4]||(a[4]=i("h2",null,"系统监控",-1)),e(O,null,{default:t(()=>[e(r,{onClick:W},{icon:t(()=>[e(C(de))]),default:t(()=>[a[2]||(a[2]=g(" 刷新数据 ",-1))]),_:1}),e(r,{type:"primary",onClick:D},{icon:t(()=>[e(C(me))]),default:t(()=>[a[3]||(a[3]=g(" 导出报告 ",-1))]),_:1})]),_:1})]),i("div",Me,[e(N,{gutter:16},{default:t(()=>[e(_,{span:6},{default:t(()=>[e(d,null,{default:t(()=>[e(R,{title:"系统运行时间",value:v.uptime,suffix:"天","value-style":{color:"#3f8600"}},{prefix:t(()=>[e(C(fe))]),_:1},8,["value"])]),_:1})]),_:1}),e(_,{span:6},{default:t(()=>[e(d,null,{default:t(()=>[e(R,{title:"在线用户数",value:v.onlineUsers,"value-style":{color:"#1890ff"}},{prefix:t(()=>[e(C(ge))]),_:1},8,["value"])]),_:1})]),_:1}),e(_,{span:6},{default:t(()=>[e(d,null,{default:t(()=>[e(R,{title:"今日访问量",value:v.todayVisits,"value-style":{color:"#722ed1"}},{prefix:t(()=>[e(C(pe))]),_:1},8,["value"])]),_:1})]),_:1}),e(_,{span:6},{default:t(()=>[e(d,null,{default:t(()=>[e(R,{title:"系统健康度",value:v.healthScore,suffix:"%","value-style":{color:v.healthScore>=90?"#3f8600":"#cf1322"}},{prefix:t(()=>[e(C(P))]),_:1},8,["value","value-style"])]),_:1})]),_:1})]),_:1})]),i("div",we,[e(N,{gutter:16},{default:t(()=>[e(_,{span:12},{default:t(()=>[e(d,{title:"CPU使用率趋势",bordered:!1},{default:t(()=>[i("div",{ref_key:"cpuChartRef",ref:o,style:{height:"300px"}},null,512)]),_:1})]),_:1}),e(_,{span:12},{default:t(()=>[e(d,{title:"内存使用率趋势",bordered:!1},{default:t(()=>[i("div",{ref_key:"memoryChartRef",ref:c,style:{height:"300px"}},null,512)]),_:1})]),_:1})]),_:1}),e(N,{gutter:16,style:{"margin-top":"16px"}},{default:t(()=>[e(_,{span:12},{default:t(()=>[e(d,{title:"磁盘使用情况",bordered:!1},{default:t(()=>[i("div",{ref_key:"diskChartRef",ref:y,style:{height:"300px"}},null,512)]),_:1})]),_:1}),e(_,{span:12},{default:t(()=>[e(d,{title:"网络流量监控",bordered:!1},{default:t(()=>[i("div",{ref_key:"networkChartRef",ref:h,style:{height:"300px"}},null,512)]),_:1})]),_:1})]),_:1})]),e(d,{title:"服务状态监控",style:{"margin-top":"16px"}},{default:t(()=>[e(E,{columns:H,"data-source":k.value,pagination:!1,"row-key":"name"},{bodyCell:t(({column:s,record:n})=>[s.key==="status"?(p(),b(te,{key:0,status:Y(n.status),text:n.status},null,8,["status","text"])):M("",!0),s.key==="cpu"?(p(),b(B,{key:1,percent:n.cpu,status:n.cpu>80?"exception":"normal",size:"small"},null,8,["percent","status"])):M("",!0),s.key==="memory"?(p(),b(B,{key:2,percent:n.memory,status:n.memory>80?"exception":"normal",size:"small"},null,8,["percent","status"])):M("",!0),s.key==="action"?(p(),b(O,{key:3},{default:t(()=>[e(r,{type:"link",size:"small",onClick:A=>q(n)},{default:t(()=>[...a[5]||(a[5]=[g("重启",-1)])]),_:1},8,["onClick"]),e(r,{type:"link",size:"small",onClick:A=>G(n)},{default:t(()=>[...a[6]||(a[6]=[g("查看日志",-1)])]),_:1},8,["onClick"])]),_:2},1024)):M("",!0)]),_:1},8,["data-source"])]),_:1}),e(d,{title:"系统告警",style:{"margin-top":"16px"}},{extra:t(()=>[e(O,null,{default:t(()=>[e(ae,{value:I.value,"onUpdate:value":a[0]||(a[0]=s=>I.value=s),placeholder:"告警级别",style:{width:"120px"},onChange:X,options:[{value:"",label:"全部"},{value:"critical",label:"严重"},{value:"warning",label:"警告"},{value:"info",label:"信息"}]},null,8,["value"])]),_:1})]),default:t(()=>[e(E,{columns:L,"data-source":j.value,pagination:{pageSize:5},"row-key":"id"},{bodyCell:t(({column:s,record:n})=>[s.key==="level"?(p(),b(le,{key:0,color:Z(n.level)},{default:t(()=>[g(S(K(n.level)),1)]),_:2},1032,["color"])):M("",!0),s.key==="action"?(p(),b(O,{key:1},{default:t(()=>[e(r,{type:"link",size:"small",onClick:A=>J(n)},{default:t(()=>[...a[7]||(a[7]=[g("处理",-1)])]),_:1},8,["onClick"]),e(r,{type:"link",size:"small",onClick:A=>Q(n)},{default:t(()=>[...a[8]||(a[8]=[g("忽略",-1)])]),_:1},8,["onClick"])]),_:2},1024)):M("",!0)]),_:1},8,["data-source"])]),_:1}),e(se,{open:U.value,"onUpdate:open":a[1]||(a[1]=s=>U.value=s),title:"服务日志",width:"800px",footer:null},{default:t(()=>[i("div",Ie,[(p(!0),V(ve,null,_e($.value,(s,n)=>(p(),V("div",{key:n,class:"log-item"},[i("span",Oe,S(s.time),1),i("span",{class:ye(["log-level",s.level.toLowerCase()])},S(s.level),3),i("span",Re,S(s.message),1)]))),128))])]),_:1},8,["open"])])}}}),Ne=he(Se,[["__scopeId","data-v-daaa2fdf"]]);export{Ne as default};
