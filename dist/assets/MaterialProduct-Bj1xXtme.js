import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as y,a as O,k as re,m as me,c as fe,o as D,e as N,x as t,q as a,h as i,y as I,P as pe,s as u,S as ce,p as K,f as j,t as f,G as ve,H as _e,I as ye,C as R}from"./index-D0CfuKge.js";const ge={class:"material-product"},be={class:"page-header"},Ce={class:"search-form"},ke={class:"table-container"},we={__name:"MaterialProduct",setup(Ie){const T=y(!1),g=y(!1),P=y(!1),x=y(!1),M=y(),d=O({materialCode:"",materialName:"",categoryId:void 0,status:void 0}),n=O({id:"",materialCode:"",materialName:"",categoryId:void 0,specification:"",baseUnit:void 0,safetyStock:0,unitPrice:0,description:"",status:"1"}),W=[{title:"物料编码",dataIndex:"materialCode",key:"materialCode",width:120,fixed:"left"},{title:"物料名称",dataIndex:"materialName",key:"materialName",width:150,fixed:"left"},{title:"物料分类",dataIndex:"categoryId",key:"categoryId",width:100,customRender:({text:l})=>B(l)},{title:"规格型号",dataIndex:"specification",key:"specification",width:120},{title:"基本单位",dataIndex:"baseUnit",key:"baseUnit",width:80,customRender:({text:l})=>E(l)},{title:"安全库存",dataIndex:"safetyStock",key:"safetyStock",width:100,sorter:!0},{title:"单价",dataIndex:"unitPrice",key:"unitPrice",width:100,sorter:!0,customRender:({text:l})=>`¥${l}`},{title:"状态",dataIndex:"status",key:"status",width:80},{title:"创建时间",dataIndex:"createTime",key:"createTime",width:150},{title:"操作",key:"action",width:200,fixed:"right"}],v=y([{id:"1",materialCode:"RAW001",materialName:"不锈钢板",categoryId:"2",specification:"304-2B-1.0mm",baseUnit:"KG",safetyStock:100,unitPrice:15.5,description:"304不锈钢板，厚度1.0mm",status:"1",createTime:"2024-01-15 10:30:00",updateTime:"2024-01-15 10:30:00",creator:"张三"},{id:"2",materialCode:"RAW002",materialName:"铝合金型材",categoryId:"2",specification:"6061-T6-20x20mm",baseUnit:"M",safetyStock:50,unitPrice:25.8,description:"6061铝合金型材，截面20x20mm",status:"1",createTime:"2024-01-15 10:35:00",updateTime:"2024-01-15 10:35:00",creator:"李四"},{id:"3",materialCode:"PROD001",materialName:"电子控制器",categoryId:"5",specification:"ECU-2024-V1.0",baseUnit:"PCS",safetyStock:20,unitPrice:350,description:"主控制器ECU，版本1.0",status:"1",createTime:"2024-01-15 10:40:00",updateTime:"2024-01-15 10:40:00",creator:"王五"},{id:"4",materialCode:"SEMI001",materialName:"电路板组件",categoryId:"4",specification:"PCB-100x80mm",baseUnit:"PCS",safetyStock:30,unitPrice:45.6,description:"半成品电路板组件",status:"1",createTime:"2024-01-15 10:45:00",updateTime:"2024-01-15 10:45:00",creator:"赵六"},{id:"5",materialCode:"RAW003",materialName:"工程塑料",categoryId:"3",specification:"ABS-黑色",baseUnit:"KG",safetyStock:80,unitPrice:12.3,description:"ABS工程塑料，黑色颗粒",status:"1",createTime:"2024-01-15 10:50:00",updateTime:"2024-01-15 10:50:00",creator:"钱七"}]),b=O({current:1,pageSize:10,total:5,showSizeChanger:!0,showQuickJumper:!0,showTotal:(l,e)=>`第 ${e[0]}-${e[1]} 条，共 ${l} 条`}),r=y({}),H={materialCode:[{required:!0,message:"请输入物料编码",trigger:"blur"}],materialName:[{required:!0,message:"请输入物料名称",trigger:"blur"}],categoryId:[{required:!0,message:"请选择物料分类",trigger:"change"}],baseUnit:[{required:!0,message:"请选择基本单位",trigger:"change"}]},B=l=>({1:"原材料",2:"金属材料",3:"非金属材料",4:"半成品",5:"成品"})[l]||"未知",E=l=>({KG:"千克",PCS:"个",M:"米",L:"升",TON:"吨"})[l]||"未知",J=re(()=>x.value?"编辑物料":"新增物料"),V=()=>{b.current=1,C()},Q=()=>{Object.assign(d,{materialCode:"",materialName:"",categoryId:void 0,status:void 0}),V()},X=(l,e,c)=>{b.current=l.current,b.pageSize=l.pageSize,C()},Y=()=>{x.value=!1,g.value=!0,z()},Z=l=>{x.value=!0,g.value=!0,Object.assign(n,{...l})},h=l=>{r.value=l,P.value=!0},ee=l=>{const e=v.value.findIndex(c=>c.id===l);e>-1&&(v.value.splice(e,1),R.success("删除成功"),C())},te=async()=>{try{if(await M.value.validate(),x.value){const l=v.value.findIndex(e=>e.id===n.id);l>-1&&(v.value[l]={...n,updateTime:new Date().toLocaleString()},R.success("更新成功"))}else{const l=(Math.max(...v.value.map(c=>parseInt(c.id)))+1).toString(),e={...n,id:l,createTime:new Date().toLocaleString(),updateTime:new Date().toLocaleString(),creator:"当前用户"};v.value.push(e),R.success("新增成功")}g.value=!1,C()}catch(l){console.error("表单验证失败:",l)}},ae=()=>{g.value=!1,z()},z=()=>{var l;Object.assign(n,{id:"",materialCode:"",materialName:"",categoryId:void 0,specification:"",baseUnit:void 0,safetyStock:0,unitPrice:0,description:"",status:"1"}),(l=M.value)==null||l.resetFields()},C=()=>{T.value=!0,setTimeout(()=>{let l=[...v.value];d.materialCode&&(l=l.filter(e=>e.materialCode.includes(d.materialCode))),d.materialName&&(l=l.filter(e=>e.materialName.includes(d.materialName))),d.categoryId&&(l=l.filter(e=>e.categoryId===d.categoryId)),d.status!==void 0&&(l=l.filter(e=>e.status===d.status)),b.total=l.length,T.value=!1},500)};return me(()=>{C()}),(l,e)=>{const c=u("a-button"),k=u("a-input"),m=u("a-form-item"),s=u("a-select-option"),S=u("a-select"),$=u("a-form"),A=u("a-tag"),le=u("a-popconfirm"),ie=u("a-space"),oe=u("a-table"),_=u("a-col"),U=u("a-row"),q=u("a-input-number"),G=u("a-radio"),ne=u("a-radio-group"),ue=u("a-textarea"),L=u("a-modal"),p=u("a-descriptions-item"),de=u("a-descriptions");return D(),fe("div",ge,[N("div",be,[e[16]||(e[16]=N("h2",null,"物料/产品管理",-1)),t(c,{type:"primary",onClick:Y},{icon:a(()=>[t(I(pe))]),default:a(()=>[e[15]||(e[15]=i(" 新增物料 ",-1))]),_:1})]),N("div",Ce,[t($,{layout:"inline",model:d,onFinish:V},{default:a(()=>[t(m,{label:"物料编码"},{default:a(()=>[t(k,{value:d.materialCode,"onUpdate:value":e[0]||(e[0]=o=>d.materialCode=o),placeholder:"请输入物料编码","allow-clear":"",style:{width:"200px"}},null,8,["value"])]),_:1}),t(m,{label:"物料名称"},{default:a(()=>[t(k,{value:d.materialName,"onUpdate:value":e[1]||(e[1]=o=>d.materialName=o),placeholder:"请输入物料名称","allow-clear":"",style:{width:"200px"}},null,8,["value"])]),_:1}),t(m,{label:"物料分类"},{default:a(()=>[t(S,{value:d.categoryId,"onUpdate:value":e[2]||(e[2]=o=>d.categoryId=o),placeholder:"请选择分类","allow-clear":"",style:{width:"150px"}},{default:a(()=>[t(s,{value:"1"},{default:a(()=>[...e[17]||(e[17]=[i("原材料",-1)])]),_:1}),t(s,{value:"2"},{default:a(()=>[...e[18]||(e[18]=[i("金属材料",-1)])]),_:1}),t(s,{value:"3"},{default:a(()=>[...e[19]||(e[19]=[i("非金属材料",-1)])]),_:1}),t(s,{value:"4"},{default:a(()=>[...e[20]||(e[20]=[i("半成品",-1)])]),_:1}),t(s,{value:"5"},{default:a(()=>[...e[21]||(e[21]=[i("成品",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(m,{label:"状态"},{default:a(()=>[t(S,{value:d.status,"onUpdate:value":e[3]||(e[3]=o=>d.status=o),placeholder:"请选择状态","allow-clear":"",style:{width:"120px"}},{default:a(()=>[t(s,{value:"1"},{default:a(()=>[...e[22]||(e[22]=[i("启用",-1)])]),_:1}),t(s,{value:"0"},{default:a(()=>[...e[23]||(e[23]=[i("禁用",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(m,null,{default:a(()=>[t(c,{type:"primary","html-type":"submit"},{icon:a(()=>[t(I(ce))]),default:a(()=>[e[24]||(e[24]=i(" 搜索 ",-1))]),_:1}),t(c,{style:{"margin-left":"8px"},onClick:Q},{default:a(()=>[...e[25]||(e[25]=[i("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),N("div",ke,[t(oe,{columns:W,"data-source":v.value,loading:T.value,pagination:b,"row-key":"id",onChange:X},{bodyCell:a(({column:o,record:w})=>[o.key==="status"?(D(),K(A,{key:0,color:w.status==="1"?"green":"red"},{default:a(()=>[i(f(w.status==="1"?"启用":"禁用"),1)]),_:2},1032,["color"])):j("",!0),o.key==="action"?(D(),K(ie,{key:1},{default:a(()=>[t(c,{type:"link",size:"small",onClick:F=>Z(w)},{icon:a(()=>[t(I(ve))]),default:a(()=>[e[26]||(e[26]=i(" 编辑 ",-1))]),_:1},8,["onClick"]),t(c,{type:"link",size:"small",onClick:F=>h(w)},{icon:a(()=>[t(I(_e))]),default:a(()=>[e[27]||(e[27]=i(" 查看 ",-1))]),_:1},8,["onClick"]),t(le,{title:"确定要删除这个物料吗？",onConfirm:F=>ee(w.id),"ok-text":"确定","cancel-text":"取消"},{default:a(()=>[t(c,{type:"link",size:"small",danger:""},{icon:a(()=>[t(I(ye))]),default:a(()=>[e[28]||(e[28]=i(" 删除 ",-1))]),_:1})]),_:1},8,["onConfirm"])]),_:2},1024)):j("",!0)]),_:1},8,["data-source","loading","pagination"])]),t(L,{visible:g.value,"onUpdate:visible":e[13]||(e[13]=o=>g.value=o),title:J.value,width:"800px",onOk:te,onCancel:ae},{default:a(()=>[t($,{ref_key:"formRef",ref:M,model:n,rules:H,layout:"vertical"},{default:a(()=>[t(U,{gutter:16},{default:a(()=>[t(_,{span:12},{default:a(()=>[t(m,{label:"物料编码",name:"materialCode"},{default:a(()=>[t(k,{value:n.materialCode,"onUpdate:value":e[4]||(e[4]=o=>n.materialCode=o),placeholder:"请输入物料编码"},null,8,["value"])]),_:1})]),_:1}),t(_,{span:12},{default:a(()=>[t(m,{label:"物料名称",name:"materialName"},{default:a(()=>[t(k,{value:n.materialName,"onUpdate:value":e[5]||(e[5]=o=>n.materialName=o),placeholder:"请输入物料名称"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(U,{gutter:16},{default:a(()=>[t(_,{span:12},{default:a(()=>[t(m,{label:"物料分类",name:"categoryId"},{default:a(()=>[t(S,{value:n.categoryId,"onUpdate:value":e[6]||(e[6]=o=>n.categoryId=o),placeholder:"请选择物料分类"},{default:a(()=>[t(s,{value:"1"},{default:a(()=>[...e[29]||(e[29]=[i("原材料",-1)])]),_:1}),t(s,{value:"2"},{default:a(()=>[...e[30]||(e[30]=[i("金属材料",-1)])]),_:1}),t(s,{value:"3"},{default:a(()=>[...e[31]||(e[31]=[i("非金属材料",-1)])]),_:1}),t(s,{value:"4"},{default:a(()=>[...e[32]||(e[32]=[i("半成品",-1)])]),_:1}),t(s,{value:"5"},{default:a(()=>[...e[33]||(e[33]=[i("成品",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),t(_,{span:12},{default:a(()=>[t(m,{label:"规格型号",name:"specification"},{default:a(()=>[t(k,{value:n.specification,"onUpdate:value":e[7]||(e[7]=o=>n.specification=o),placeholder:"请输入规格型号"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(U,{gutter:16},{default:a(()=>[t(_,{span:12},{default:a(()=>[t(m,{label:"基本单位",name:"baseUnit"},{default:a(()=>[t(S,{value:n.baseUnit,"onUpdate:value":e[8]||(e[8]=o=>n.baseUnit=o),placeholder:"请选择基本单位"},{default:a(()=>[t(s,{value:"KG"},{default:a(()=>[...e[34]||(e[34]=[i("千克",-1)])]),_:1}),t(s,{value:"PCS"},{default:a(()=>[...e[35]||(e[35]=[i("个",-1)])]),_:1}),t(s,{value:"M"},{default:a(()=>[...e[36]||(e[36]=[i("米",-1)])]),_:1}),t(s,{value:"L"},{default:a(()=>[...e[37]||(e[37]=[i("升",-1)])]),_:1}),t(s,{value:"TON"},{default:a(()=>[...e[38]||(e[38]=[i("吨",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),t(_,{span:12},{default:a(()=>[t(m,{label:"安全库存",name:"safetyStock"},{default:a(()=>[t(q,{value:n.safetyStock,"onUpdate:value":e[9]||(e[9]=o=>n.safetyStock=o),placeholder:"请输入安全库存",min:0,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(U,{gutter:16},{default:a(()=>[t(_,{span:12},{default:a(()=>[t(m,{label:"单价",name:"unitPrice"},{default:a(()=>[t(q,{value:n.unitPrice,"onUpdate:value":e[10]||(e[10]=o=>n.unitPrice=o),placeholder:"请输入单价",min:0,precision:2,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(_,{span:12},{default:a(()=>[t(m,{label:"状态",name:"status"},{default:a(()=>[t(ne,{value:n.status,"onUpdate:value":e[11]||(e[11]=o=>n.status=o)},{default:a(()=>[t(G,{value:"1"},{default:a(()=>[...e[39]||(e[39]=[i("启用",-1)])]),_:1}),t(G,{value:"0"},{default:a(()=>[...e[40]||(e[40]=[i("禁用",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t(m,{label:"描述",name:"description"},{default:a(()=>[t(ue,{value:n.description,"onUpdate:value":e[12]||(e[12]=o=>n.description=o),placeholder:"请输入物料描述",rows:3},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"]),t(L,{visible:P.value,"onUpdate:visible":e[14]||(e[14]=o=>P.value=o),title:"物料详情",width:"800px",footer:null},{default:a(()=>[t(de,{column:3,bordered:""},{default:a(()=>[t(p,{label:"物料编码"},{default:a(()=>[i(f(r.value.materialCode),1)]),_:1}),t(p,{label:"物料名称"},{default:a(()=>[i(f(r.value.materialName),1)]),_:1}),t(p,{label:"物料分类"},{default:a(()=>[i(f(B(r.value.categoryId)),1)]),_:1}),t(p,{label:"规格型号"},{default:a(()=>[i(f(r.value.specification),1)]),_:1}),t(p,{label:"基本单位"},{default:a(()=>[i(f(E(r.value.baseUnit)),1)]),_:1}),t(p,{label:"安全库存"},{default:a(()=>[i(f(r.value.safetyStock),1)]),_:1}),t(p,{label:"单价"},{default:a(()=>[i("¥"+f(r.value.unitPrice),1)]),_:1}),t(p,{label:"状态"},{default:a(()=>[t(A,{color:r.value.status==="1"?"green":"red"},{default:a(()=>[i(f(r.value.status==="1"?"启用":"禁用"),1)]),_:1},8,["color"])]),_:1}),t(p,{label:"创建时间"},{default:a(()=>[i(f(r.value.createTime),1)]),_:1}),t(p,{label:"更新时间"},{default:a(()=>[i(f(r.value.updateTime),1)]),_:1}),t(p,{label:"创建人"},{default:a(()=>[i(f(r.value.creator),1)]),_:1}),t(p,{label:"描述",span:3},{default:a(()=>[i(f(r.value.description||"无"),1)]),_:1})]),_:1})]),_:1},8,["visible"])])}}},Ue=se(we,[["__scopeId","data-v-eef997b1"]]);export{Ue as default};
