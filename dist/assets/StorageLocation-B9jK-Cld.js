import{_ as ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as b,a as V,k as ge,m as _e,c as Ce,o as x,e as q,x as a,q as t,h as o,y as N,P as be,s as p,S as we,p as L,f as M,t as m,G as ke,H as Te,I as Ie,C as $}from"./index-D0CfuKge.js";const xe={class:"storage-location"},Ne={class:"page-header"},Ue={class:"search-form"},Se={class:"table-container"},qe={__name:"StorageLocation",setup(Le){const R=b(!1),w=b(!1),D=b(!1),U=b(!1),B=b(),d=V({locationCode:"",locationName:"",locationType:void 0,managerName:"",status:void 0}),u=V({id:"",locationCode:"",locationName:"",locationType:"warehouse",departmentId:void 0,managerId:void 0,totalCapacity:0,usedCapacity:0,phone:"",address:"",temperature:"",humidity:"",ventilation:"normal",fireLevel:"B",specialRequirements:"",remark:"",status:"1"}),Y=[{title:"地点编码",dataIndex:"locationCode",key:"locationCode",width:120,fixed:"left"},{title:"地点名称",dataIndex:"locationName",key:"locationName",width:150,fixed:"left"},{title:"地点类型",dataIndex:"locationType",key:"locationType",width:100},{title:"所属部门",dataIndex:"departmentName",key:"departmentName",width:120,customRender:({record:l})=>j(l.departmentId)},{title:"负责人",dataIndex:"managerName",key:"managerName",width:100,customRender:({record:l})=>z(l.managerId)},{title:"容量使用情况",dataIndex:"capacity",key:"capacity",width:180},{title:"温度要求",dataIndex:"temperature",key:"temperature",width:100},{title:"联系电话",dataIndex:"phone",key:"phone",width:120},{title:"状态",dataIndex:"status",key:"status",width:80},{title:"创建时间",dataIndex:"createTime",key:"createTime",width:150},{title:"操作",key:"action",width:200,fixed:"right"}],g=b([{id:"1",locationCode:"WH001",locationName:"原料仓库A",locationType:"warehouse",departmentId:"3",managerId:"1",totalCapacity:1e3,usedCapacity:750,phone:"13800138001",address:"厂区北侧A栋1楼",temperature:"常温",humidity:"30-70%",ventilation:"good",fireLevel:"A",specialRequirements:"防潮、防尘",remark:"主要存储原材料",status:"1",createTime:"2024-01-15 10:30:00",updateTime:"2024-01-15 10:30:00"},{id:"2",locationCode:"WH002",locationName:"成品仓库B",locationType:"warehouse",departmentId:"3",managerId:"2",totalCapacity:800,usedCapacity:400,phone:"13800138002",address:"厂区南侧B栋2楼",temperature:"常温",humidity:"30-60%",ventilation:"good",fireLevel:"A",specialRequirements:"定期通风",remark:"存储成品产品",status:"1",createTime:"2024-01-15 10:35:00",updateTime:"2024-01-15 10:35:00"},{id:"3",locationCode:"WS001",locationName:"装配车间",locationType:"workshop",departmentId:"1",managerId:"3",totalCapacity:500,usedCapacity:300,phone:"13800138003",address:"厂区中央C栋1楼",temperature:"18-25℃",humidity:"40-60%",ventilation:"normal",fireLevel:"B",specialRequirements:"恒温恒湿",remark:"产品装配区域",status:"1",createTime:"2024-01-15 10:40:00",updateTime:"2024-01-15 10:40:00"},{id:"4",locationCode:"CF001",locationName:"冷藏库",locationType:"warehouse",departmentId:"3",managerId:"4",totalCapacity:200,usedCapacity:150,phone:"13800138004",address:"厂区东侧D栋地下1层",temperature:"0-4℃",humidity:"80-90%",ventilation:"poor",fireLevel:"A",specialRequirements:"低温存储",remark:"存储需要冷藏的物料",status:"1",createTime:"2024-01-15 10:45:00",updateTime:"2024-01-15 10:45:00"}]),k=V({current:1,pageSize:10,total:4,showSizeChanger:!0,showQuickJumper:!0,showTotal:(l,e)=>`第 ${e[0]}-${e[1]} 条，共 ${l} 条`}),r=b({}),Z={locationCode:[{required:!0,message:"请输入地点编码",trigger:"blur"}],locationName:[{required:!0,message:"请输入地点名称",trigger:"blur"}],locationType:[{required:!0,message:"请选择地点类型",trigger:"change"}],departmentId:[{required:!0,message:"请选择所属部门",trigger:"change"}],managerId:[{required:!0,message:"请选择负责人",trigger:"change"}],totalCapacity:[{required:!0,message:"请输入总容量",trigger:"blur"}]},E=l=>({warehouse:"仓库",workshop:"车间",office:"办公室",outdoor:"室外"})[l]||"未知",F=l=>({warehouse:"blue",workshop:"green",office:"orange",outdoor:"cyan"})[l]||"default",j=l=>({1:"生产一部",2:"生产二部",3:"仓储部",4:"质量部"})[l]||"未知",z=l=>({1:"张三",2:"李四",3:"王五",4:"赵六"})[l]||"未指定",ee=l=>({good:"良好",normal:"一般",poor:"较差"})[l]||"未知",O=l=>!l.totalCapacity||l.totalCapacity===0?0:Math.round(l.usedCapacity/l.totalCapacity*100),H=l=>{const e=O(l);return e>=90?"exception":e>=80?"active":"normal"},ae=ge(()=>U.value?"编辑存储地点":"新增存储地点"),P=()=>{k.current=1,T()},te=()=>{Object.assign(d,{locationCode:"",locationName:"",locationType:void 0,managerName:"",status:void 0}),P()},le=(l,e,y)=>{k.current=l.current,k.pageSize=l.pageSize,T()},oe=()=>{U.value=!1,w.value=!0,W()},ne=l=>{U.value=!0,w.value=!0,Object.assign(u,l)},ue=l=>{r.value=l,D.value=!0},ie=l=>{const e=g.value.findIndex(y=>y.id===l);e>-1&&(g.value.splice(e,1),$.success("删除成功"),T())},de=async()=>{try{if(await B.value.validate(),U.value){const l=g.value.findIndex(e=>e.id===u.id);l>-1&&(g.value[l]={...u,updateTime:new Date().toLocaleString()},$.success("更新成功"))}else{const l=(Math.max(...g.value.map(y=>parseInt(y.id)))+1).toString(),e={...u,id:l,usedCapacity:0,createTime:new Date().toLocaleString(),updateTime:new Date().toLocaleString()};g.value.push(e),$.success("新增成功")}w.value=!1,T()}catch(l){console.error("表单验证失败:",l)}},re=()=>{w.value=!1,W()},W=()=>{var l;Object.assign(u,{id:"",locationCode:"",locationName:"",locationType:"warehouse",departmentId:void 0,managerId:void 0,totalCapacity:0,usedCapacity:0,phone:"",address:"",temperature:"",humidity:"",ventilation:"normal",fireLevel:"B",specialRequirements:"",remark:"",status:"1"}),(l=B.value)==null||l.resetFields()},T=()=>{R.value=!0,setTimeout(()=>{let l=[...g.value];d.locationCode&&(l=l.filter(e=>e.locationCode.includes(d.locationCode))),d.locationName&&(l=l.filter(e=>e.locationName.includes(d.locationName))),d.locationType&&(l=l.filter(e=>e.locationType===d.locationType)),d.managerName&&(l=l.filter(e=>z(e.managerId).includes(d.managerName))),d.status!==void 0&&(l=l.filter(e=>e.status===d.status)),k.total=l.length,R.value=!1},500)};return _e(()=>{T()}),(l,e)=>{const y=p("a-button"),_=p("a-input"),s=p("a-form-item"),i=p("a-select-option"),C=p("a-select"),G=p("a-form"),S=p("a-tag"),J=p("a-progress"),se=p("a-popconfirm"),pe=p("a-space"),me=p("a-table"),v=p("a-col"),I=p("a-row"),fe=p("a-input-number"),Q=p("a-radio"),ve=p("a-radio-group"),h=p("a-divider"),A=p("a-textarea"),K=p("a-modal"),f=p("a-descriptions-item"),ye=p("a-descriptions");return x(),Ce("div",xe,[q("div",Ne,[e[23]||(e[23]=q("h2",null,"存储地点管理",-1)),a(y,{type:"primary",onClick:oe},{icon:t(()=>[a(N(be))]),default:t(()=>[e[22]||(e[22]=o(" 新增地点 ",-1))]),_:1})]),q("div",Ue,[a(G,{layout:"inline",model:d,onFinish:P},{default:t(()=>[a(s,{label:"地点编码"},{default:t(()=>[a(_,{value:d.locationCode,"onUpdate:value":e[0]||(e[0]=n=>d.locationCode=n),placeholder:"请输入地点编码","allow-clear":"",style:{width:"200px"}},null,8,["value"])]),_:1}),a(s,{label:"地点名称"},{default:t(()=>[a(_,{value:d.locationName,"onUpdate:value":e[1]||(e[1]=n=>d.locationName=n),placeholder:"请输入地点名称","allow-clear":"",style:{width:"200px"}},null,8,["value"])]),_:1}),a(s,{label:"地点类型"},{default:t(()=>[a(C,{value:d.locationType,"onUpdate:value":e[2]||(e[2]=n=>d.locationType=n),placeholder:"请选择地点类型","allow-clear":"",style:{width:"150px"}},{default:t(()=>[a(i,{value:"warehouse"},{default:t(()=>[...e[24]||(e[24]=[o("仓库",-1)])]),_:1}),a(i,{value:"workshop"},{default:t(()=>[...e[25]||(e[25]=[o("车间",-1)])]),_:1}),a(i,{value:"office"},{default:t(()=>[...e[26]||(e[26]=[o("办公室",-1)])]),_:1}),a(i,{value:"outdoor"},{default:t(()=>[...e[27]||(e[27]=[o("室外",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),a(s,{label:"负责人"},{default:t(()=>[a(_,{value:d.managerName,"onUpdate:value":e[3]||(e[3]=n=>d.managerName=n),placeholder:"请输入负责人姓名","allow-clear":"",style:{width:"150px"}},null,8,["value"])]),_:1}),a(s,{label:"状态"},{default:t(()=>[a(C,{value:d.status,"onUpdate:value":e[4]||(e[4]=n=>d.status=n),placeholder:"请选择状态","allow-clear":"",style:{width:"120px"}},{default:t(()=>[a(i,{value:"1"},{default:t(()=>[...e[28]||(e[28]=[o("启用",-1)])]),_:1}),a(i,{value:"0"},{default:t(()=>[...e[29]||(e[29]=[o("禁用",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),a(s,null,{default:t(()=>[a(y,{type:"primary","html-type":"submit"},{icon:t(()=>[a(N(we))]),default:t(()=>[e[30]||(e[30]=o(" 搜索 ",-1))]),_:1}),a(y,{style:{"margin-left":"8px"},onClick:te},{default:t(()=>[...e[31]||(e[31]=[o("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),q("div",Se,[a(me,{columns:Y,"data-source":g.value,loading:R.value,pagination:k,"row-key":"id",onChange:le},{bodyCell:t(({column:n,record:c})=>[n.key==="locationType"?(x(),L(S,{key:0,color:F(c.locationType)},{default:t(()=>[o(m(E(c.locationType)),1)]),_:2},1032,["color"])):M("",!0),n.key==="capacity"?(x(),L(J,{key:1,percent:O(c),size:"small",status:H(c),format:()=>`${c.usedCapacity}/${c.totalCapacity}m³`},null,8,["percent","status","format"])):M("",!0),n.key==="status"?(x(),L(S,{key:2,color:c.status==="1"?"green":"red"},{default:t(()=>[o(m(c.status==="1"?"启用":"禁用"),1)]),_:2},1032,["color"])):M("",!0),n.key==="action"?(x(),L(pe,{key:3},{default:t(()=>[a(y,{type:"link",size:"small",onClick:X=>ne(c)},{icon:t(()=>[a(N(ke))]),default:t(()=>[e[32]||(e[32]=o(" 编辑 ",-1))]),_:1},8,["onClick"]),a(y,{type:"link",size:"small",onClick:X=>ue(c)},{icon:t(()=>[a(N(Te))]),default:t(()=>[e[33]||(e[33]=o(" 查看 ",-1))]),_:1},8,["onClick"]),a(se,{title:"确定要删除这个存储地点吗？",onConfirm:X=>ie(c.id),"ok-text":"确定","cancel-text":"取消"},{default:t(()=>[a(y,{type:"link",size:"small",danger:""},{icon:t(()=>[a(N(Ie))]),default:t(()=>[e[34]||(e[34]=o(" 删除 ",-1))]),_:1})]),_:1},8,["onConfirm"])]),_:2},1024)):M("",!0)]),_:1},8,["data-source","loading","pagination"])]),a(K,{visible:w.value,"onUpdate:visible":e[20]||(e[20]=n=>w.value=n),title:ae.value,width:"900px",onOk:de,onCancel:re},{default:t(()=>[a(G,{ref_key:"formRef",ref:B,model:u,rules:Z,layout:"vertical"},{default:t(()=>[a(I,{gutter:16},{default:t(()=>[a(v,{span:12},{default:t(()=>[a(s,{label:"地点编码",name:"locationCode"},{default:t(()=>[a(_,{value:u.locationCode,"onUpdate:value":e[5]||(e[5]=n=>u.locationCode=n),placeholder:"请输入地点编码"},null,8,["value"])]),_:1})]),_:1}),a(v,{span:12},{default:t(()=>[a(s,{label:"地点名称",name:"locationName"},{default:t(()=>[a(_,{value:u.locationName,"onUpdate:value":e[6]||(e[6]=n=>u.locationName=n),placeholder:"请输入地点名称"},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(I,{gutter:16},{default:t(()=>[a(v,{span:8},{default:t(()=>[a(s,{label:"地点类型",name:"locationType"},{default:t(()=>[a(C,{value:u.locationType,"onUpdate:value":e[7]||(e[7]=n=>u.locationType=n),placeholder:"请选择地点类型"},{default:t(()=>[a(i,{value:"warehouse"},{default:t(()=>[...e[35]||(e[35]=[o("仓库",-1)])]),_:1}),a(i,{value:"workshop"},{default:t(()=>[...e[36]||(e[36]=[o("车间",-1)])]),_:1}),a(i,{value:"office"},{default:t(()=>[...e[37]||(e[37]=[o("办公室",-1)])]),_:1}),a(i,{value:"outdoor"},{default:t(()=>[...e[38]||(e[38]=[o("室外",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(v,{span:8},{default:t(()=>[a(s,{label:"总容量(m³)",name:"totalCapacity"},{default:t(()=>[a(fe,{value:u.totalCapacity,"onUpdate:value":e[8]||(e[8]=n=>u.totalCapacity=n),placeholder:"请输入总容量",min:0,precision:2,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),a(v,{span:8},{default:t(()=>[a(s,{label:"状态",name:"status"},{default:t(()=>[a(ve,{value:u.status,"onUpdate:value":e[9]||(e[9]=n=>u.status=n)},{default:t(()=>[a(Q,{value:"1"},{default:t(()=>[...e[39]||(e[39]=[o("启用",-1)])]),_:1}),a(Q,{value:"0"},{default:t(()=>[...e[40]||(e[40]=[o("禁用",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),a(h,null,{default:t(()=>[...e[41]||(e[41]=[o("位置信息",-1)])]),_:1}),a(I,{gutter:16},{default:t(()=>[a(v,{span:12},{default:t(()=>[a(s,{label:"所属部门",name:"departmentId"},{default:t(()=>[a(C,{value:u.departmentId,"onUpdate:value":e[10]||(e[10]=n=>u.departmentId=n),placeholder:"请选择所属部门"},{default:t(()=>[a(i,{value:"1"},{default:t(()=>[...e[42]||(e[42]=[o("生产一部",-1)])]),_:1}),a(i,{value:"2"},{default:t(()=>[...e[43]||(e[43]=[o("生产二部",-1)])]),_:1}),a(i,{value:"3"},{default:t(()=>[...e[44]||(e[44]=[o("仓储部",-1)])]),_:1}),a(i,{value:"4"},{default:t(()=>[...e[45]||(e[45]=[o("质量部",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(v,{span:12},{default:t(()=>[a(s,{label:"负责人",name:"managerId"},{default:t(()=>[a(C,{value:u.managerId,"onUpdate:value":e[11]||(e[11]=n=>u.managerId=n),placeholder:"请选择负责人"},{default:t(()=>[a(i,{value:"1"},{default:t(()=>[...e[46]||(e[46]=[o("张三",-1)])]),_:1}),a(i,{value:"2"},{default:t(()=>[...e[47]||(e[47]=[o("李四",-1)])]),_:1}),a(i,{value:"3"},{default:t(()=>[...e[48]||(e[48]=[o("王五",-1)])]),_:1}),a(i,{value:"4"},{default:t(()=>[...e[49]||(e[49]=[o("赵六",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),a(I,{gutter:16},{default:t(()=>[a(v,{span:12},{default:t(()=>[a(s,{label:"联系电话",name:"phone"},{default:t(()=>[a(_,{value:u.phone,"onUpdate:value":e[12]||(e[12]=n=>u.phone=n),placeholder:"请输入联系电话"},null,8,["value"])]),_:1})]),_:1}),a(v,{span:12},{default:t(()=>[a(s,{label:"温度要求",name:"temperature"},{default:t(()=>[a(_,{value:u.temperature,"onUpdate:value":e[13]||(e[13]=n=>u.temperature=n),placeholder:"如：常温、0-4℃、-20℃等"},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(s,{label:"详细地址",name:"address"},{default:t(()=>[a(A,{value:u.address,"onUpdate:value":e[14]||(e[14]=n=>u.address=n),placeholder:"请输入详细地址",rows:2},null,8,["value"])]),_:1}),a(h,null,{default:t(()=>[...e[50]||(e[50]=[o("存储条件",-1)])]),_:1}),a(I,{gutter:16},{default:t(()=>[a(v,{span:8},{default:t(()=>[a(s,{label:"湿度要求",name:"humidity"},{default:t(()=>[a(_,{value:u.humidity,"onUpdate:value":e[15]||(e[15]=n=>u.humidity=n),placeholder:"如：30-70%"},null,8,["value"])]),_:1})]),_:1}),a(v,{span:8},{default:t(()=>[a(s,{label:"通风要求",name:"ventilation"},{default:t(()=>[a(C,{value:u.ventilation,"onUpdate:value":e[16]||(e[16]=n=>u.ventilation=n),placeholder:"请选择通风要求"},{default:t(()=>[a(i,{value:"good"},{default:t(()=>[...e[51]||(e[51]=[o("良好",-1)])]),_:1}),a(i,{value:"normal"},{default:t(()=>[...e[52]||(e[52]=[o("一般",-1)])]),_:1}),a(i,{value:"poor"},{default:t(()=>[...e[53]||(e[53]=[o("较差",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(v,{span:8},{default:t(()=>[a(s,{label:"防火等级",name:"fireLevel"},{default:t(()=>[a(C,{value:u.fireLevel,"onUpdate:value":e[17]||(e[17]=n=>u.fireLevel=n),placeholder:"请选择防火等级"},{default:t(()=>[a(i,{value:"A"},{default:t(()=>[...e[54]||(e[54]=[o("A级",-1)])]),_:1}),a(i,{value:"B"},{default:t(()=>[...e[55]||(e[55]=[o("B级",-1)])]),_:1}),a(i,{value:"C"},{default:t(()=>[...e[56]||(e[56]=[o("C级",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),a(s,{label:"特殊要求",name:"specialRequirements"},{default:t(()=>[a(A,{value:u.specialRequirements,"onUpdate:value":e[18]||(e[18]=n=>u.specialRequirements=n),placeholder:"请输入特殊存储要求",rows:2},null,8,["value"])]),_:1}),a(s,{label:"备注",name:"remark"},{default:t(()=>[a(A,{value:u.remark,"onUpdate:value":e[19]||(e[19]=n=>u.remark=n),placeholder:"请输入备注信息",rows:2},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"]),a(K,{visible:D.value,"onUpdate:visible":e[21]||(e[21]=n=>D.value=n),title:"存储地点详情",width:"800px",footer:null},{default:t(()=>[a(ye,{column:3,bordered:""},{default:t(()=>[a(f,{label:"地点编码"},{default:t(()=>[o(m(r.value.locationCode),1)]),_:1}),a(f,{label:"地点名称"},{default:t(()=>[o(m(r.value.locationName),1)]),_:1}),a(f,{label:"地点类型"},{default:t(()=>[a(S,{color:F(r.value.locationType)},{default:t(()=>[o(m(E(r.value.locationType)),1)]),_:1},8,["color"])]),_:1}),a(f,{label:"所属部门"},{default:t(()=>[o(m(j(r.value.departmentId)),1)]),_:1}),a(f,{label:"负责人"},{default:t(()=>[o(m(z(r.value.managerId)),1)]),_:1}),a(f,{label:"联系电话"},{default:t(()=>[o(m(r.value.phone),1)]),_:1}),a(f,{label:"总容量"},{default:t(()=>[o(m(r.value.totalCapacity)+"m³",1)]),_:1}),a(f,{label:"已使用"},{default:t(()=>[o(m(r.value.usedCapacity)+"m³",1)]),_:1}),a(f,{label:"使用率"},{default:t(()=>[a(J,{percent:O(r.value),size:"small",status:H(r.value)},null,8,["percent","status"])]),_:1}),a(f,{label:"温度要求"},{default:t(()=>[o(m(r.value.temperature),1)]),_:1}),a(f,{label:"湿度要求"},{default:t(()=>[o(m(r.value.humidity),1)]),_:1}),a(f,{label:"通风要求"},{default:t(()=>[o(m(ee(r.value.ventilation)),1)]),_:1}),a(f,{label:"防火等级"},{default:t(()=>[o(m(r.value.fireLevel)+"级",1)]),_:1}),a(f,{label:"状态"},{default:t(()=>[a(S,{color:r.value.status==="1"?"green":"red"},{default:t(()=>[o(m(r.value.status==="1"?"启用":"禁用"),1)]),_:1},8,["color"])]),_:1}),a(f,{label:"创建时间"},{default:t(()=>[o(m(r.value.createTime),1)]),_:1}),a(f,{label:"详细地址",span:3},{default:t(()=>[o(m(r.value.address),1)]),_:1}),a(f,{label:"特殊要求",span:3},{default:t(()=>[o(m(r.value.specialRequirements||"无"),1)]),_:1}),a(f,{label:"备注",span:3},{default:t(()=>[o(m(r.value.remark||"无"),1)]),_:1})]),_:1})]),_:1},8,["visible"])])}}},De=ce(qe,[["__scopeId","data-v-01edc1b1"]]);export{De as default};
