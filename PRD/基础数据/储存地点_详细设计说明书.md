# 储存地点管理 (Storage Location) - 详细设计文档

## 1. 模块概述
**模块名称**：库位/储存地点关联管理
**所属子系统**：基础数据 / 辅仓储模块
**目标**：统一定义和精细化管理厂区内的储位三维空间资源，建立容积率模型，同时针对高危及特定物料记录强制性的现场环控条件（如温湿度、消防要求等），辅助IQC验收入库和现场质检防呆预警。

## 2. 界面布局与交互设计
### 2.1 查询与操作
- 具有标准的多维度搜索栏目（编码、名称、地点类型——包括仓库、车间、室外等）。
- 操作按钮提供常规的增改删导体系，批量状态控制等。

### 2.2 数据表格特色组件 (进度条)
- **容量可视化机制**：表格内引入并重点打磨了 **容量使用情况 (`capacity`)** 的 `a-progress` 进度条列设计。
  - 根据 `已用容量 / 总容量` 动态计算百分比。
  - 若超出安全阈值 (例如 80% 变为警告活跃态，>90% 变为异常红色警告态)，直观呈现库区的爆仓压力。

## 3. 核心功能设计
### 3.1 环境控制体系 (Environmental Storage Conditions)
此页面表单针对 QMS 典型的储藏变异情况额外新增了多个质量前置限定字段：
- **温湿度范围录入 (`temperature`, `humidity`)**：限制例如部分电子料对 `18-25℃ / 40-60%` 绝对湿度的强需求登记。
- **危化品及环安限制录入 (`ventilation`, `fireLevel`)**：下拉选择如防火等级 A/B/C 及对应的通风环境等级。

### 3.2 空间分配机制
- 提供全量的三维容量 `totalCapacity` 记录。
- 该容量模块预留了外接出入库实时接口对接，计算出的 `usedCapacity` 可做前端阻断（例如超出容量禁止新建入库任务，这在需求链内预留了扩展锚点）。

### 3.3 表单组块分段
由于字段涵盖业务、环境、物理三维度，其添加/编辑表单使用 `a-divider` （分隔线）进行了业务语义化分割为：
1. 基本定义段 (名称/类型/尺寸)
2. 责任分配信息段 (部门/责任人/电话)
3. 存储环控条件段 (温湿度/防火等)

## 4. 数据模型 (Data Model)
核心实体 `StorageLocation` 属性定义：
- `id`: 唯一编号
- `locationCode`: 物理储存编码 (如：WH001)
- `locationName`: 名称
- `locationType`: 分类（`warehouse`, `workshop`, `office`, `outdoor` 等）
- `departmentId`: 运维挂靠部门
- `managerId`: 行政/质量看守责任人
- `totalCapacity`: 总体积或安全存放面积数
- `usedCapacity`: 目前统计被占据数值
- `phone`, `address`: 地理通信信息
- `temperature`: 指导存储温度设定
- `humidity`: 指导存储湿度设定
- `ventilation`: 通风安全度级别
- `fireLevel`: 必须满足的防火等级预设
- `specialRequirements`: 人工补充的其他条件（如防潮、隔离存放等）
- `status`: 状态

## 5. 约束与规则
- **可用性检验**：对环境要求极其严苛且状态标记为禁用的区域，后续 WMS 服务不允许下发转移物料到该片区的指令。
- **空间合理性**：表单录入时，总容量 (`totalCapacity`) 不允许录入负数。
