# 供应商档案 (Supplier Archive) - 详细设计文档

## 1. 模块概述
**模块名称**：供应商档案管理
**所属子系统**：基础数据管理模块
**目标**：对企业的各类供应商（原材料、设备、服务等）进行统一的主数据维护，满足多工厂化组织层级的数据管控需求，并加强对供应商相关资质证明文件的监管。

## 2. 界面布局与交互设计
### 2.1 整体布局
页面结构维持系统的统一交互规范，采用典型的“条件查询 + 数据操作 + 列表展示”的主体布局结构。

### 2.2 搜索区设计
- **所属组织**：支持多选的下拉组织选择器，控制数据视界。
- **供应商编码**：输入框检索。
- **供应商名称**：输入框检索。
- **供应商等级**：A/B/C 三级下拉筛选。
- **供应类型**：下拉单选（原材料 / 设备 / 服务 / 其他）。
- **状态**：启用/禁用状态筛选。

### 2.3 操作栏功能
- 支持常规的：新增、编辑、删除（批量）、状态变更（启用/禁用）、刷新。
- **导入功能**：集成“下载模板”与“文件上传”下拉操作，支持将Excel格式的供应商名单批量录入系统。
- **导出功能**：前端/后端导出过滤后的列表台账。

## 3. 核心功能设计
### 3.1 多组织适配
- 融合 `orgId` 机制处理视图数据域。
- 新增与调整操作中，“所属组织”为强制前置字段。
- 列表对不同组织属性做颜色视觉隔离，例如“集团”层级和具体工厂使用不同色块。

### 3.2 资质证明及有效期预警管理
- 由于供应商通常需要具备特种资质或 ISO 体系认证，系统特别增加了“资质附件管理”区块。
- 新增 **`资质证明 (qualifications)`**：上传营业执照、认证报告等文件的组件。
- 新增 **`资质有效期 (qualificationExpiry)`**：支持选择有效截止日期。
- **自动预警评估**：利用前端 `computed` (基于 dayjs) 或后端定时任务，动态计算当前时间是否已超过资质有效期。若识别已过期，表单编辑界面将展示红色 `<a-alert>` 强提醒，督促采购或质量人员及时联系供应商进行证件更新。

## 4. 数据模型 (Data Model)
核心实体 `Supplier` 属性定义：
- `id`: 唯一主键
- `orgId`: 所属组织标识
- `supplierCode`: 供应商编码
- `supplierName`: 供应商名称
- `supplierLevel`: 供应商等级
- `supplyType`: 供应类型
- `creditLevel`: 信用分/级别的量化考核值
- `cooperationYears`: 合作年限
- `creditCode`: 统一社会信用代码
- `legalPerson`: 法人代表
- `phone` / `email` / `address`: 基础联系信息
- `status`: 生命周期状态标识
- `qualifications`: 资质证明附件集合
- `qualificationExpiry`: 资质有效期 (Date)

## 5. 约束与规则
- **关联限制**：已被来料检验（IQC）单据引用的供应商不可被物理删除。
- **过期限制**：在部分深层次业务（如发放下单）中，若遇到资质已过期供应商可拦截报警（本页面为基础定义，拦截动作落地于其他业务链）。
