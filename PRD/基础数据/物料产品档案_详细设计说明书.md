# 物料/产品档案 (Material & Product Archive) - 详细设计文档

## 1. 模块概述
**模块名称**：物料产品档案管理
**所属子系统**：基础数据管理模块 / 质量主数据（融合）
**目标**：统管工厂中各种流转实体（含原物料、半成品、产成品）的基本属性；它是整个质量管理系统(QMS)的最高频被引用对象；支持关联各类质量特有标准设定。

## 2. 界面布局与交互设计
### 2.1 高级版块布局（左树右表联动）
引入了复杂的组合视图：
- **左侧分类导航树**：完全复用来自《物料分类管理》的分类拓扑树（即：原材料、半成品、成品分支）。
- **点击穿透**：当用户在左侧选中了某分类分支（如“成品”），右侧的表格内容区将**立刻只过滤并呈现**归属于该分类标识（包括其子类）的所有具体物料 SKU 条目。
- **树搜索**：左侧树自带过滤搜索，避免由于分类层级过多导致的浏览困难。

### 2.2 右侧核心管理面板
包含标准的快速信息检索区和工具栏：
- **组合搜索**：支持“所属组织”组织层级、“物料编码”、“物料名称”字段检索。
- **数据导入导出**：通过工具栏按钮直接响应大批量的料号 Excel 上传解析以及输出台账诉求。
- **表格核心列**：物料编码、规格型号、单位、来源模式（自制/外购），以及最为特殊的统计列：**工艺路线数**。

## 3. 核心功能与集成设计
### 3.1 跨模块的质量设置融合
本模块在基础属性CRUD外，通过弹窗/抽屉（Drawer）的方式承载并外接了多个高阶的质量主数据：
- **检验规格 (Spec Drawer)**：从列表的“更多/动作”或详细页可以针对某项物料开启配置其专有检测属性定义。
- **工艺路线 (Route Drawer)**：物料具体的生产流转经由工序设定，表格中以显性的蓝色超链接直观显现该物料拥有几条流线。
- **检验方案 (Plan Drawer)**：快捷地挂载此物料在各类特定事件（入库、过程、成品环节）触发时应响应的质检执行计划配置方案。

### 3.2 多组织维度的管控
- 数据表含有 `orgId` 业务标识字段。
- 支持同一套物理编码的物料在不同工厂间不同的属性隔离描述呈现。由于涉及到各组织，所以在数据入库及查询环节均强制通过组织维度的校验。

## 4. 数据模型 (Data Model)
基础物料实体 `Material` 属性定义：
- `id`: 唯一识别号
- `orgId`: 所属组织控制标识
- `code`: 物料/产品编码 (SKU)
- `name`: 物料/产品名称
- `spec`: 规格参数信息
- `category`: 归属分类引用标识
- `unit`: 计量单位 (pcs, kg, set等)
- `source`: 获取来源类别 (Buy:外购 / Make:自制)
- `remark`: 其他描述提示情况

## 5. 约束与规则
- **多业务交错控制**：被生产单据或入库流水等已经占用的实体物料通常从业务上被判定为不可直接清除。
- **分类依赖限制**：新增物料时只能选择末级最细的可用分类节点进行挂靠绑定。
