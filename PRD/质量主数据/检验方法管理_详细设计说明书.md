# 检验方法管理 (Inspection Method) - 详细设计文档

## 1. 模块概述
**模块名称**：检验方法与操作规范资源管理 (Inspection Method)
**所属子系统**：质量主数据模块 (Quality Master Data)
**目标**：统管质量系统内涵盖的一切测定动作及 SOP(标准操作程序)的索引数据，为主测数据（检验项目）提供作业指导文本或附件支持。

## 2. 界面布局与交互设计
### 2.1 查询与检索
系统采用了简单的卡片轻量检索：
- **方法名称 / 附件ID / 组织筛选**。
- 操作区支持典型的增、删、改、导出。

### 2.2 表格与文字展示
- 默认在主表格将步骤核心文本以文本切省 `ellipsis=true` 方式进行渲染，便于直接快览部分核心步骤（例如需要特殊的蓝牙数显卡尺连接校准步骤提示）。

## 3. 核心功能设计
### 3.1 集团/组织数据下放
同检验项目类似，方法库同样建立在集团下发与各工厂自建组合的体系中。
新增/编辑表单要求定义 `orgId` 域，方便集团推行大一统检验要求时能在不同工厂被共享。

### 3.2 检验SOP的绑定机制
建立针对此方法的详尽多步流控制：
- 字段 `operationText` 提供大量人工指令（如 1.校准...2.放置...3.读取...）的支持。
- 字段 `attachmentId` 支持关联物理上的多媒体指导文档，使得在后续 IPQC（首检/巡检）触屏应用端能够快速调起说明书。

## 4. 数据模型 (Data Model)
核心实体 `InspectionMethod` 属性定义：
- `id`: 实例主键
- `orgId`: 归属组织域 (null为集团总管)
- `methodName`: 工具操作方案命名 (如: 蓝牙卡尺检定法)
- `attachmentId`: 绑定对应服务端的文件管理服务器凭证ID（关联SOP）
- `operationText`: 特定的手写检测作业书说明详情。

## 5. 约束与规则
- **重名排他验证**：为防范工厂下建操作标准引起混乱，新增和修改方法提交前引入异步唯一性鉴别。判断方式为：同 `orgId` 作用域下，`methodName` 不可发生完全一致冲突重复。
